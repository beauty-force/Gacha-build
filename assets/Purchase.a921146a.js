import{o as i,c as l,d as e,H as p,L as _,a as w,r as b,b as h,w as x,F as v,t as u,h as d,J as k,a2 as M,e as y,I as C,n as c}from"./app.d1d77031.js";import{A as j}from"./UserLayout.39229af5.js";import{u as P}from"./useConfirm.801861ec.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Category.e6f31134.js";import"./index.17902c99.js";function L(o,t){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})])}const{confirm:te,alert:m}=P(),S={components:{Head:p,AdminLayout:j,Link:_,ArrowLeftIcon:L},props:{errors:Object,auth:Object,point:Object,is_admin:Number,amount:Number,amount_str:String,testOrLive:String,supported_pay_type:Object,rank:Object,coupon_id:Number},data(){return{selectedMethod:null,agreeTerms:!1,loading:!1}},methods:{selectPaymentMethod(o){this.selectedMethod=o},handleSubmit(){if(!this.selectedMethod){m("\u652F\u6255\u3044\u65B9\u6CD5\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044");return}if(!this.agreeTerms){m("\u500B\u4EBA\u60C5\u5831\u306E\u53D6\u308A\u6271\u3044\u306B\u540C\u610F\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");return}this.paymentRegister(this.selectedMethod)},submit(){},format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},paymentRegister(o){this.loading=!0,w.post(this.is_admin==1?route("test.user.point.paymentRegister"):route("user.point.paymentRegister"),{id:this.point.id,pay_type:o,coupon_id:this.coupon_id}).then(t=>{t.data.status==0?m(t.data.message):(o=="Card"||o=="Paypay"||o=="Konbini"||o=="Virtualaccount")&&t.data.status&&(window.location.href=t.data.link_url),this.loading=!1})}},mounted(){}},N={class:"flex justify-center items-center flex-1 bg-white py-2"},A={class:"p-6 w-full max-w-md"},O={class:"text-center text-xl font-semibold text-gray-800 mb-7"},B={key:0,class:"text-rose-500 leading-8 text-base"},H={class:"bg-gray-100 p-4 text-xl text-center mb-4"},K={class:"text-center text-gray-600 mb-4 py-4"},T={class:"flex items-center justify-center leading-7 gap-2"},R=["href"],z={key:0,class:"mb-4"},D={key:1,class:"mb-4"},F={key:2,class:"mb-4"},I={key:3,class:"mb-4"},E=["disabled"],J={key:0,class:"fixed inset-0 flex justify-center items-center bg-gray-800 bg-opacity-75 z-[20]"},U=e("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[e("svg",{class:"animate-spin h-8 w-8 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1),q=[U];function G(o,t,n,Q,r,s){const g=b("Head"),f=b("AdminLayout");return i(),l(v,null,[h(g,{title:"\u6C7A\u6E08\u767B\u9332"}),h(f,null,{default:x(()=>[e("div",N,[e("div",A,[e("h2",O,[e("div",null,u(s.format_number(n.point.point))+" \u30DD\u30A4\u30F3\u30C8\u8CFC\u5165",1),n.rank&&n.rank.pt_rate>0?(i(),l("span",B," ( + "+u(s.format_number(n.point.point*n.rank.pt_rate/100))+" \u30DC\u30FC\u30CA\u30B9 ) ",1)):d("",!0)]),e("div",H," \xA5 "+u(n.amount_str),1),e("div",K,[e("label",T,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>r.agreeTerms=a),class:"focus:ring-0 rounded-sm"},null,512),[[M,r.agreeTerms]]),y(" \u500B\u4EBA\u60C5\u5831\u306E\u53D6\u308A\u6271\u3044\u306B\u540C\u610F\u3059\u308B ")]),y(" \uFF08 "),e("a",{href:o.route("main.privacy_police"),class:"text-yellow-500 hover:text-yellow-600"},"\u53D6\u308A\u6271\u3044\u306E\u8A73\u7D30\u3092\u78BA\u8A8D\u3059\u308B",8,R),y(" \uFF09 ")]),e("form",{onSubmit:t[5]||(t[5]=C((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"]))},[n.supported_pay_type.includes("Card")?(i(),l("div",z,[e("button",{type:"button",onClick:t[1]||(t[1]=a=>s.selectPaymentMethod("Card")),class:c([{"border-yellow-500 bg-yellow-100 font-bold text-yellow-500":r.selectedMethod==="Card","hover:bg-gray-100 hover:border-gray-300":r.selectedMethod!=="Card"},"w-full p-4 bg-white border-2 border-gray-200 rounded-lg flex justify-center items-center transition duration-200 hover:-translate-y-0.5"])}," \u30AF\u30EC\u30B8\u30C3\u30C8\u30AB\u30FC\u30C9 ",2)])):d("",!0),n.supported_pay_type.includes("Paypay")?(i(),l("div",D,[e("button",{type:"button",onClick:t[2]||(t[2]=a=>s.selectPaymentMethod("Paypay")),class:c([{"border-yellow-500 bg-yellow-100 font-bold text-yellow-500":r.selectedMethod==="Paypay","hover:bg-gray-100 hover:border-gray-300":r.selectedMethod!=="Paypay"},"w-full p-4 bg-white border-2 border-gray-200 rounded-lg flex justify-center items-center transition duration-200 hover:-translate-y-0.5"])}," PayPay ",2)])):d("",!0),n.supported_pay_type.includes("Konbini")?(i(),l("div",F,[e("button",{type:"button",onClick:t[3]||(t[3]=a=>s.selectPaymentMethod("Konbini")),class:c([{"border-yellow-500 bg-yellow-100 font-bold text-yellow-500":r.selectedMethod==="Konbini","hover:bg-gray-100 hover:border-gray-300":r.selectedMethod!=="Konbini"},"w-full p-4 bg-white border-2 border-gray-200 rounded-lg flex justify-center items-center transition duration-200 hover:-translate-y-0.5"])}," \u30B3\u30F3\u30D3\u30CB\u6255\u3044 ",2)])):d("",!0),n.supported_pay_type.includes("Virtualaccount")?(i(),l("div",I,[e("button",{type:"button",onClick:t[4]||(t[4]=a=>s.selectPaymentMethod("Virtualaccount")),class:c([{"border-yellow-500 bg-yellow-100 font-bold text-yellow-500":r.selectedMethod==="Virtualaccount","hover:bg-gray-100 hover:border-gray-300":r.selectedMethod!=="Virtualaccount"},"w-full p-4 bg-white border-2 border-gray-200 rounded-lg flex justify-center items-center transition duration-200 hover:-translate-y-0.5"])}," \u9280\u884C\u632F\u8FBC ",2)])):d("",!0),e("button",{type:"submit",disabled:r.selectedMethod==null,class:"w-full p-4 bg-yellow-500 text-white rounded-lg text-lg font-semibold transition duration-200 hover:bg-yellow-600 mt-4"}," \u652F\u6255\u3044 ",8,E)],32),r.loading?(i(),l("div",J,q)):d("",!0)])])]),_:1})],64)}const oe=V(S,[["render",G]]);export{oe as default};
