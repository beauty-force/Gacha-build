import{d as c,r as l,c as u,o as p,a,w as g,b as t,h as m,j as b,i as C,v as f,t as h,F as _,f as L,n as A}from"./app-DgUmgxei.js";import{A as D}from"./Admin-CiPIkyx0.js";import{d as I}from"./index-CkxHydh2.js";import{r as U,a as V,V as S}from"./ArrowLongUpIcon-CQkQODrC.js";import{u as j}from"./useConfirm-C4UDPcad.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Category-BQFnIiTG.js";const{confirm:M}=j(),H={components:{Link:c.Link,Head:c.Head,AppLayout:D,draggable:S,ArrowLongUpIcon:V,ArrowLongDownIcon:U},props:{errors:Object,auth:Object,categories:Object},methods:{log(){},submit(){this.new_form.post(route("admin.category.store"),{onSuccess:()=>this.new_form.reset(),preserveScroll:!0})},destroy(r){M("削除してもいいですか？","","error").then(e=>{e&&I.Inertia.delete(route("admin.category.destroy",r),{preserveScroll:!0})})},levelUp(r){let e;for(e=1;e<this.categories.data.length&&this.categories.data[e].id!=r;e++);e<this.categories.data.length&&this.arrayMove(e,e-1)},arrayMove(r,e){this.categories.data.splice(e,0,this.categories.data.splice(r,1)[0])},levelDown(r){let e;for(e=0;e<this.categories.data.length-1&&this.categories.data[e].id!=r;e++);e<this.categories.data.length-1&&this.arrayMove(e,e+1)},submit_order(){this.order_form.categories=this.categories,this.order_form.post(route("admin.category.sorting.store"),{preserveScroll:!0,onFinish:()=>{}})}},data(){return{open:!0,dragging:!1}},setup(r){const e=c.useForm({title:""}),s=c.useForm({categories:[]});return{new_form:e,order_form:s}},mounted(){}},N={class:"md:px-4 px-2"},B={class:""},E={class:"m-auto min-w-full text-sm font-medium"},O={class:"border-t"},q={class:"border-b border-r border-l"},z={class:"font-light p-1 whitespace-nowrap"},T={key:0,class:"text-red-600 mt-1 text-center"},G={class:"text-center pb-2"},J={class:"flex mb-1"},K={class:"px-2"},P={class:"flex-1 rounded-md text-left cursor-pointer border h-12 border-neutral-500 flex items-center hover:bg-neutral-100 focus:bg-neutral-100 gap-2"},Q={class:"flex-1 whitespace-nowrap h-full"},R=["onUpdate:modelValue"],W={class:"align-middle h-full flex items-center gap-1"},X=["onClick"],Y=["onClick"],Z=["onClick"],$={class:"p-1 flex justify-center"},ee=["disabled"];function te(r,e,s,i,oe,n){const x=l("Head"),v=l("ArrowLongUpIcon"),w=l("ArrowLongDownIcon"),y=l("draggable"),k=l("AppLayout");return p(),u(_,null,[a(x,{title:"カテゴリー"}),a(k,null,{default:g(()=>[t("div",N,[e[7]||(e[7]=t("div",{class:"border-b w-full p-2 my-2 font-semibold"},[t("h3",null,"カテゴリー")],-1)),t("div",B,[t("form",{onSubmit:e[1]||(e[1]=m(o=>n.submit(),["prevent"]))},[t("table",E,[t("tbody",O,[t("tr",q,[e[3]||(e[3]=t("td",{class:"bg-neutral-300 px-3 py-2 whitespace-nowrap border-r w-32"},"カテゴリー",-1)),t("td",z,[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.new_form.title=o),type:"text",class:"bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-lg block px-2 py-1.5 w-full focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50",placeholder:"",required:""},null,512),[[f,i.new_form.title]]),s.errors.title?(p(),u("div",T,h(s.errors.title),1)):C("",!0)])])])]),e[4]||(e[4]=t("div",{class:"text-center py-2"},[t("button",{type:"submit",class:"w-32 bg-neutral-500 hover:bg-neutral-700 text-white text-sm font-normal py-2 px-5 rounded"}," 登録 ")],-1))],32)]),e[8]||(e[8]=t("hr",{class:"my-4"},null,-1)),t("div",G,[e[6]||(e[6]=t("div",{class:"border-b border-r border-l bg-neutral-300 p-2"}," カテゴリー編集 ",-1)),t("div",J,[a(y,{class:"w-full list-group",list:s.categories.data,onChange:n.log},{default:g(()=>[(p(!0),u(_,null,L(s.categories.data,o=>(p(),u("div",{class:"my-1 flex w-full items-center",key:o.id},[t("div",K,h(o.id),1),t("div",P,[t("div",Q,[b(t("input",{"onUpdate:modelValue":d=>o.title=d,type:"text",class:"bg-neutral-50 text-neutral-900 text-sm rounded-l-md border-neutral-300 block px-2 h-full w-full focus:border-blue-400 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"",required:""},null,8,R),[[f,o.title]])]),t("div",W,[t("button",{onClick:m(d=>n.levelUp(o.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[a(v,{class:"w-5 h-5 text-white block"})],8,X),t("button",{onClick:m(d=>n.levelDown(o.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[a(w,{class:"w-5 h-5 text-white block"})],8,Y)]),t("button",{onClick:d=>n.destroy(o.id),class:"bg-red-500 hover:bg-red-700 text-white text-sm font-normal py-1 px-2 mr-2 rounded"},"削除",8,Z)])]))),128))]),_:1},8,["list","onChange"])]),t("div",$,[t("button",{onClick:e[2]||(e[2]=m(o=>n.submit_order(),["prevent"])),class:A([{"opacity-25":i.order_form.processing},"w-32 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-normal py-2 px-3 inline-block rounded"]),disabled:i.order_form.processing},[...e[5]||(e[5]=[t("div",{class:"inline-block"},"保存する",-1)])],10,ee)])])])]),_:1})],64)}const ce=F(H,[["render",te]]);export{ce as default};
