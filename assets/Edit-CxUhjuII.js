import{d as I,r as v,c as i,o as a,a as _,w as h,b as e,i as m,n as O,h as j,e as b,t as u,j as c,v as p,m as P,F as k,f as U,k as L,y as N,x as R}from"./app-DFfLvpWw.js";import{A as H}from"./Admin-C9NOjBgR.js";import{d as J}from"./index-BmjjM9FL.js";import{B as Q}from"./main-BAUdGTZ4.js";import{b as z,S as B,h as G,V as X,G as Y,Y as K,u as W}from"./useConfirm-DdSEq25l.js";import{l as Z}from"./index-CqSmXmTT.js";import{s as $}from"./vue-multiselect-C_w__nVP.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as et}from"./ExclamationTriangleIcon-w3cecXHC.js";import"./isNativeReflectConstruct-zdezgZUv.js";const{confirm:M,alert:F}=W(),st={components:{Link:I.Link,Head:I.Head,AppLayout:H,Dialog:K,DialogPanel:Y,DialogTitle:X,TransitionChild:G,TransitionRoot:B,ExclamationTriangleIcon:et,XMarkIcon:z,VueDatePicker:Q,Multiselect:$},props:{errors:Object,gacha:Object,category_share:Object,product_last:Object,products:Object,productsLostSetting:Object,videos:Object,titles:Object,ranks:Object,lost_types:Object,video_names:Object,plans:Object,tags:Object,auth:Object,items:Array,gachaTicketItems:Array,currentRequiredItems:Array},data(){return{url:null,url1:null,url2:null,open:!1,sorting:"point_down",csvDialogOpen:!1,csvFile:null,imageFiles:[],csvUploading:!1,rank_selection:[],plan_selection:[],tag_selection:[],limit_type:0,buttons:[],selected_group:null,selectedItemToAdd:null,selectedItemQuantity:1,video_entries:[],selectedItem:null}},methods:{format_number(l){return String(l).replace(/(.)(?=(\d{3})+$)/g,"$1,")},addTag(l){l=parseInt(l),l&&!this.buttons.find(t=>t.value==l)&&(this.buttons.push({label:l+(l>1?"連":"回"),value:l}),this.buttons.sort(function(t,r){return t.value-r.value}))},addVideoEntry(){if(this.video_names.length==0){F("登録された動画がありません。");return}this.video_entries.push({point:0,levels:[]})},deleteVideoEntry(l){this.video_entries.splice(l,1)},onGroupChange(){this.video_entries=[]},destroy_product_last(l){M("削除してもいいですか？","","error").then(t=>{t&&J.Inertia.delete(route("admin.gacha.product_last.destroy",{id:l}))})},modalProductLastOpen(){this.product_last.name?(this.product_last.item_id?(this.form_last.use_item=!0,this.form_last.item_id=this.product_last.item_id,this.selectedItem=this.items.find(l=>l.id===this.product_last.item_id)||null,this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.url2=""):(this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null,this.form_last.last_name=this.product_last.name,this.form_last.last_point=this.product_last.point,this.form_last.last_rare=this.product_last.rare,this.form_last.last_image="",this.url2=this.product_last.image),this.form_last.is_update=1):(this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.form_last.is_update=0,this.url2="",this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null),this.form_last.is_last=1,this.form_last.last_marks=0,this.open=!0},modalProductOpen(l){l?(this.form_last.last_id=l.id,l.item_id?(this.form_last.use_item=!0,this.form_last.item_id=l.item_id,this.selectedItem=this.items.find(t=>t.id===l.item_id)||null,this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.url2=""):(this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null,this.form_last.last_name=l.name,this.form_last.last_point=l.point,this.form_last.last_rare=l.rare,this.form_last.last_image="",this.url2=l.image),this.form_last.last_marks=parseFloat((l.marks*this.count_step).toFixed(7)),this.form_last.category_id=parseFloat((l.category_id*this.count_step).toFixed(7)),this.form_last.last_order=l.order,this.form_last.is_update=1,this.form_last.rank=l.rank,this.form_last.delivery_only=l.lost_type%2==1,this.form_last.black_case=Math.floor(l.lost_type/2)==1,this.form_last.min_purchase_amount=l.min_purchase_amount||0):(this.form_last.last_id="",this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_marks=0,this.form_last.last_order=0,this.form_last.last_image="",this.form_last.is_update=0,this.url2="",this.form_last.rank=0,this.form_last.category_id=0,this.form_last.delivery_only=!1,this.form_last.black_case=!1,this.form_last.use_item=!1,this.form_last.item_id=null,this.form_last.min_purchase_amount=0,this.selectedItem=null),this.form_last.is_last=0,this.open=!0},closeModal(){this.open=!1},getItemTypeText(l){return{gacha_ticket:"ガチャチケット",point_lottery:"ポイント抽選",rank_double:"ランクアップ2倍",point_discount:"ポイント購入割引",daily_reset:"日次リセット",hidden_gacha_key:"隠しガチャ鍵",chip_card:"チップカード",purchase_discount:"購入割引チケット"}[l]||l},itemLabel(l){return l?`${l.name} (${this.getItemTypeText(l.type)})`:""},onItemSelected(l){l?this.form_last.item_id=l.id:this.form_last.item_id=null},addRequiredItem(){if(!this.selectedItemToAdd||this.selectedItemQuantity<1)return;const l=this.selectedItemToAdd;if(!l||!l.id)return;this.form.required_items||(this.form.required_items=[]);let t=this.form.required_items;if(typeof t=="string")try{t=JSON.parse(t)}catch{t=[]}Array.isArray(t)||(t=[]),this.form.required_items=t;const r=this.form.required_items.findIndex(o=>Number(o.item_id)==Number(l.id));r>=0?this.form.required_items[r].quantity=Number(this.form.required_items[r].quantity)+this.selectedItemQuantity:this.form.required_items.push({item_id:Number(l.id),quantity:Number(this.selectedItemQuantity)}),this.selectedItemToAdd=null,this.selectedItemQuantity=1},removeRequiredItem(l){const t=this.displayRequiredItems[l];if(!t)return;let r=this.form.required_items;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}Array.isArray(r)||(r=[]);const o=r.findIndex(d=>Number(d.item_id)===Number(t.item_id));o>=0&&(r.splice(o,1),this.form.required_items=r)},updateRequiredItemQuantity(l,t){const r=this.displayRequiredItems[l];if(!r)return;let o=this.form.required_items;if(typeof o=="string")try{o=JSON.parse(o)}catch{o=[]}Array.isArray(o)||(o=[]);const d=o.findIndex(n=>Number(n.item_id)===Number(r.item_id));d>=0&&(o[d].quantity=Number(t)||1,this.form.required_items=o)},submit_last(){if(this.form_last.is_last==1)this.$refs.photo2.files[0]&&(this.form_last.last_image=this.$refs.photo2.files[0]),this.form_last.post(route("admin.gacha.product_last.create"),{preserveScroll:!0,onFinish:()=>{}});else{if(this.form_last.use_item&&this.form_last.item_id){this.form_last.post(route("admin.gacha.product.create"),{preserveScroll:!0,onFinish:()=>{this.open=!1}});return}if(this.$refs.photo2.files[0]&&(this.form_last.last_image=this.$refs.photo2.files[0]),this.form_last.last_order>0&&this.form_last.last_marks!=1){F("排出順序は点数の値が1の場合にのみ設定できます。");return}if(this.form_last.last_order>0&&this.form_last.last_order<=this.gacha.count){F("このガチャはすでに "+this.gacha.count+" 回回されています。 "+this.gacha.count+" 以上を設定する必要があります。");return}if(this.form_last.last_order>0&&this.products.data.find(t=>t.order==this.form_last.last_order&&t.id!=this.form_last.last_id)){F("この排出順序はすでに使用しました。");return}let l=I.useForm(this.form_last.data());l.last_marks/=this.count_step,l.category_id/=this.count_step,l.post(route("admin.gacha.product.create"),{onFinish:()=>{},preserveScroll:!0})}},submit(){let l=this.form.count_card-this.gacha.count;var t=0;let r;for(r=0;r<this.form.lostProducts.length;r++)this.form.lostProducts[r].key&&(t=t+this.form.lostProducts[r].count);let o=0;for(r=0;r<this.products.data.length;r++)(this.form.lost_product_type!="1"||this.products.data[r].order==0)&&(o=o+Math.max(0,this.products.data[r].marks)*this.count_step);this.form.lost_product_type=="1"&&(this.form.count_card=0);let d=t+o;d=parseFloat(d.toFixed(7));let n="",C=!1;if(this.form.lost_product_type=="1")n=d==100?"カード排出率の合計が正確です。":`カード排出率の合計は100％でなければなりません。現在${d}%です。`,this.form.spin_limit=0,C=d==100;else{let w=0;this.form.lostProducts.forEach(x=>{w+=x.point*x.count/this.count_step}),this.products.data.forEach(x=>{x.marks>0&&(w+=x.point*x.marks/this.count_step)}),this.product_last.name&&(w+=this.product_last.point/this.count_step),n="残り口数 "+l.toLocaleString(),n+="<br/>合計枚数 = 当たりカードの残り数 "+o.toLocaleString()+" + カード指定の残り数 "+t.toLocaleString(),n+="<br/><br/>保存しますか？",n+="<br/><br/>現在の還元率は "+this.point_rate+"% です。",n+="<br/>"+this.form.point.toLocaleString()+" × "+l.toLocaleString()+" = "+(this.form.point*l).toLocaleString(),n+="<br/>(100 - "+this.point_rate+"%) × "+(this.form.point*l).toLocaleString()+" = "+(this.form.point*l-w).toLocaleString()+"ptの "+(this.point_rate<100?"利益":"損失"),C=d==l}M("",n,C?"success":"warning").then(w=>{w&&(this.$refs.photo&&(this.form.image=this.$refs.photo.files[0]),this.$refs.photo1&&(this.form.thumbnail=this.$refs.photo1.files[0]),this.limit_type==0?(this.form.rank_limit=this.rank_selection.map(f=>f.rank).reduce((f,V)=>f|1<<V,0),this.ranks.forEach(f=>{this.form.rank_limit^=1<<f.rank})):this.form.rank_limit=this.limit_type,this.form.plan_limit=this.plan_selection.map(f=>f.id).reduce((f,V)=>f|1<<V,0),this.form.tag_limit=this.tag_selection.length>0?this.tag_selection.map(f=>f.id):null,this.form.buttons=this.buttons.map(f=>f.value).join(","),this.form.required_items&&Array.isArray(this.form.required_items)?this.form.required_items=JSON.stringify(this.form.required_items.map(f=>({item_id:Number(f.item_id),quantity:Number(f.quantity)||1}))):this.form.required_items=null,this.form.videos=[],this.video_entries.forEach(f=>{f.levels.forEach(V=>{this.form.videos.push({group:this.selected_group,level:V.value,point:f.point||0})})}),I.useForm({...this.form.data(),dp_gacha:this.form.dp_gacha?1:0,show_count:this.form.show_count?1:0,lostProducts:this.form.lostProducts.map(f=>({...f,count:f.count/this.count_step}))}).post(route("admin.gacha.update"),{preserveScroll:!0}))})},previewImage(l){const t=l.target.files[0];this.url=URL.createObjectURL(t)},previewImage1(l){const t=l.target.files[0];this.url1=URL.createObjectURL(t)},previewImage2(l){const t=l.target.files[0];this.url2=URL.createObjectURL(t)},toPublic(l){this.form_to_public.to_status=l,this.form_to_public.post(route("admin.gacha.to_public"),{onFinish:()=>{},preserveScroll:!0})},addLostProduct(){let l=0,t;for(t=0;t<this.form.lostProducts.length;t++)l<this.form.lostProducts[t].key&&(l=this.form.lostProducts[t].key);l=l+1,this.form.lostProducts.push({id:0,point:0,count:0,key:l})},deleteLostProduct(l){let t;for(t=0;t<this.form.lostProducts.length;t++)if(l==this.form.lostProducts[t].key){this.form.lostProducts[t].key=0;break}},copyLink(l){navigator.clipboard.writeText(l).then(()=>{Z("URLをコピーしました。",{autoClose:2e3})})},onCsvFileChange(l){this.csvFile=l.target.files[0]},onImageFilesChange(l){this.imageFiles=Array.from(l.target.files)},removeImageFile(l){this.imageFiles.splice(l,1)},submitCsv(){if(!this.csvFile){F("CSVファイルを選択してください");return}this.csvUploading=!0;const l=new FormData;l.append("csv",this.csvFile),l.append("gacha_id",this.gacha.id),this.imageFiles.forEach((t,r)=>{l.append(`images[${r}]`,t)});try{I.useForm({csv:this.csvFile,gacha_id:this.gacha.id,images:this.imageFiles}).post(route("admin.gacha.upload_csv"),{preserveScroll:!0,onFinish:()=>{this.csvUploading=!1,this.csvDialogOpen=!1,this.csvFile=null,this.imageFiles=[]}})}catch{F("アップロードに失敗しました"),this.csvUploading=!1}}},setup(l){const t=I.useForm({id:l.gacha.id,title:l.gacha.title,point:l.gacha.point,consume_point:l.gacha.consume_point,count_card:l.gacha.count_card,count:l.gacha.count,lost_product_type:l.gacha.lost_product_type,thumbnail:"",image:"",category_id:l.category_share.cat_id,lostProducts:[],spin_limit:l.gacha.spin_limit,daily_limit:l.gacha.gacha_limit_on_setting,button_limit:l.gacha.gacha_limit_status,ids:[],videos:l.videos,start_time:l.gacha.start_time,end_time:l.gacha.end_time,rank_limit:l.gacha.rank_limit,plan_limit:l.gacha.plan_limit,tag_limit:l.gacha.tag_limit||null,publish_at:l.gacha.publish_at,unpublish_at:l.gacha.unpublish_at,buttons:l.gacha.buttons,dp_gacha:l.gacha.dp_gacha==1,show_count:l.gacha.show_count!==void 0?l.gacha.show_count==1:!0,required_items:(l.currentRequiredItems||[]).map(C=>({item_id:Number(C.item_id),quantity:Number(C.quantity)||1}))});let r={last_id:"",last_name:"",last_point:"",last_rare:"",last_marks:"",last_image:"",last_order:"",is_last:0,gacha_id:l.gacha.id,is_update:0,rank:0,category_id:0,delivery_only:!1,black_case:!1,use_item:!1,item_id:null,min_purchase_amount:0};const o=I.useForm(r),d=I.useForm({gacha_id:l.gacha.id,to_status:1}),n=I.useForm({gacha_id:l.gacha.id,to_status:1});return{form:t,form_last:o,form_to_public:d,form_to_limit:n}},mounted(){this.url=this.gacha.image,this.url1=this.gacha.thumbnail,this.form.lostProducts=[];let l;for(l=0;l<this.productsLostSetting.length;l++){let t=this.productsLostSetting[l];this.form.lostProducts.push({id:t.id,count:parseFloat((t.count*this.count_step).toFixed(7)),point:t.point,key:t.id})}if(this.limit_type=this.gacha.rank_limit<0?this.gacha.rank_limit:0,this.ranks.forEach(t=>{(this.gacha.rank_limit<0||!(this.gacha.rank_limit&1<<t.rank))&&this.rank_selection.push(t)}),this.plans.forEach(t=>{this.gacha.plan_limit&1<<t.id&&this.plan_selection.push(t)}),this.gacha.tag_limit&&Array.isArray(this.gacha.tag_limit)&&this.gacha.tag_limit.length>0&&this.gacha.tag_limit.forEach(t=>{const r=this.tags.find(o=>o.id===t);r&&this.tag_selection.push(r)}),this.buttons=this.gacha.buttons?this.gacha.buttons.split(",").map(t=>({label:t+(t>1?"連":"回"),value:t})):[],this.form.videos.length>0){this.selected_group=this.form.videos[0].group;const t={};this.form.videos.forEach(r=>{r.group===this.selected_group&&(t[r.point]||(t[r.point]=[]),t[r.point].push(r.level))}),this.video_entries=Object.keys(t).map(r=>({point:parseFloat(r),levels:t[r].map(o=>({label:o,value:o}))}))}else this.video_names.length>0&&(this.selected_group=this.video_names[0].group)},computed:{count_step(){return this.form.lost_product_type=="1"?.01:1},availableVideoLevels(){if(!this.selected_group||!this.video_names)return[];const l=this.video_names.find(t=>t.group===this.selected_group);return!l||!l.levels?[]:l.levels.map(t=>({label:t,value:t}))},availableItemsForSelection(){if(!this.gachaTicketItems||!Array.isArray(this.gachaTicketItems))return[];const l=this.form.required_items||[];let t=l;if(typeof l=="string")try{t=JSON.parse(l)}catch{t=[]}if(!Array.isArray(t))return this.gachaTicketItems;const r=t.map(o=>Number(o.item_id));return this.gachaTicketItems.filter(o=>!r.includes(Number(o.id)))},displayRequiredItems(){if(!this.form.required_items)return[];let l=this.form.required_items;if(typeof l=="string")try{l=JSON.parse(l)}catch{return[]}return Array.isArray(l)?!this.gachaTicketItems||!Array.isArray(this.gachaTicketItems)?l.map(t=>({item_id:Number(t.item_id),quantity:Number(t.quantity)||1,name:"読み込み中...",image:null})):l.map(t=>{const r=this.gachaTicketItems.find(o=>Number(o.id)===Number(t.item_id));return{item_id:Number(t.item_id),quantity:Number(t.quantity)||1,name:r?r.name:"不明なアイテム",image:r?r.image:null}}):[]},sortedProducts(){let l=this.products.data;return this.sorting=="point_up"&&l.sort((t,r)=>t.point-r.point),this.sorting=="point_down"&&l.sort((t,r)=>r.point-t.point),this.sorting=="count_up"&&l.sort((t,r)=>t.marks-r.marks),this.sorting=="count_down"&&l.sort((t,r)=>r.marks-t.marks),l},point_rate(){let l=this.form.point*(this.form.count_card-this.gacha.count);this.form.lost_product_type=="1"&&(l=this.form.point*1e4);let t=0;return this.form.lostProducts.forEach(r=>{t+=r.point*r.count/this.count_step}),this.products.data.forEach(r=>{r.marks>0&&(t+=r.point*r.marks/this.count_step)}),this.product_last.name&&(t+=this.product_last.point/this.count_step),(t*100/l).toFixed(2)}},watch:{selectedItem(l){l?this.form_last.item_id=l.id:this.form_last.item_id=null}}},lt={class:"pt-6 md:px-6 px-4"},ot={class:"flex flex-wrap justify-between mb-4 gap-2"},rt={class:"text-right"},it=["disabled"],at=["disabled"],nt={key:0,class:"mb-4 flex flex-wrap gap-2 items-center justify-between"},dt={class:"font-medium text-sm text-neutral-700 flex items-center gap-2"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},mt={class:"w-full flex flex-wrap gap-3 items-center"},ct={class:"w-full flex flex-wrap gap-3 items-center"},ft={class:"mb-4"},_t={key:0,class:"text-red-500 text-sm mt-1"},bt={class:"mb-4 flex items-center gap-2"},pt={key:0,class:"text-red-500 text-sm mt-1"},ht={class:"mb-4 flex items-center gap-2"},gt={key:0,class:"text-red-500 text-sm mt-1"},yt={class:"mb-4 border p-4 rounded-lg bg-gray-50"},xt={key:0,class:"mb-3 space-y-2"},vt=["src"],kt={class:"flex-1 min-w-32"},wt={class:"font-medium"},Vt={class:"flex items-center gap-2"},It=["onUpdate:modelValue","onInput"],Ct=["onClick"],Ut={class:"space-y-2"},Lt={class:"flex items-center gap-2 flex-wrap"},Ft={class:"flex-1 min-w-48"},qt={class:"flex items-center gap-3 py-2"},Pt=["src","alt"],jt={key:1,class:"w-12 h-12 -my-2 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Tt={key:2,class:"flex-1"},St={class:"font-medium text-sm text-gray-900"},At={class:"text-xs text-gray-500"},Ot={key:0,class:"flex items-center gap-3"},Nt=["src","alt"],Rt={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Mt={class:"font-medium text-sm"},Dt=["disabled"],Et={key:1,class:"text-xs text-gray-500 mt-2"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Jt={for:"point",class:"block font-medium text-sm text-neutral-700 mb-1"},Qt={key:0,class:"text-red-500 text-sm mt-1"},zt={key:0,class:"text-red-500 text-sm mt-1"},Bt={class:"mb-4"},Gt={key:1,class:"mb-4"},Xt={key:0,class:"text-red-500 text-sm mt-1"},Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Kt={key:0,class:"text-red-500 text-sm mt-1"},Wt={key:0,class:"text-red-500 text-sm mt-1"},Zt={key:0,class:"text-red-500 text-sm mt-1"},$t={class:"mb-4"},te={class:"mb-4"},ee={key:2,class:"mb-4"},se={class:"mb-4"},le={class:"mb-4"},oe={slot:"option","slot-scope":"props"},re={class:"flex items-center gap-2"},ie={key:0,class:"text-xs text-gray-500"},ae={slot:"tag","slot-scope":"props"},ne={class:"flex items-center gap-1 px-2 py-1 bg-blue-100 rounded"},de={class:"text-sm"},ue={class:"mb-4"},me={class:"w-full flex flex-wrap gap-3 items-center"},ce={class:"mb-4"},fe={class:"w-full flex flex-wrap gap-3 items-center"},_e={class:"mb-4"},be={key:0,class:"w-full flex flex-row items-center mb-3"},pe={class:"flex-1 flex items-center"},he={class:"flex-1 inline-block pr-1"},ge=["onUpdate:modelValue"],ye={class:"flex-1 inline-block pr-1"},xe=["onUpdate:modelValue","step"],ve={class:"px-2"},ke={class:"w-10 shrink h-10"},we=["onClick"],Ve={class:"text-center pt-2"},Ie={class:"mb-4"},Ce={class:"text-center w-full"},Ue=["src"],Le={key:0,class:"text-red-500 text-sm mt-1"},Fe={class:"mb-8"},qe={class:"text-center w-full"},Pe=["src"],je={key:0,class:"text-red-500 text-sm mt-1"},Te={class:"mb-8"},Se={class:"flex items-center gap-3 mb-3"},Ae=["value"],Oe={class:"flex items-center gap-2 flex-wrap"},Ne=["onUpdate:modelValue"],Re={class:"flex-1 min-w-48"},Me=["onClick"],De={class:"text-center pt-2"},Ee={class:"mb-8 text-center flex gap-2 justify-center sticky bottom-5"},He={class:"mb-6 py-2 border-neutral-200 border-b flex flex-wrap justify-center items-center gap-2"},Je={key:0,class:"flex-1 flex border-neutral-200 items-center"},Qe=["src"],ze={class:"flex flex-col justify-evenly text-sm py-1 px-2"},Be={class:"text-red-500"},Ge={class:"flex-1 flex flex-wrap gap-2 justify-center"},Xe={class:"flex flex-wrap justify-between mb-4 gap-2"},Ye={class:"flex justify-between items-center mb-2 gap-2"},Ke={class:"flex items-center gap-2"},We={value:"count_up"},Ze={value:"count_down"},$e={class:"mb-2 pb-2 border-neutral-200 border-b flex items-center justify-between flex-wrap"},ts={class:"flex border-neutral-200 items-center gap-1"},es=["src"],ss={class:"flex-1 inline-block text-sm py-1 px-2"},ls={key:0},os={key:0,class:"text-red-500"},rs={key:0,class:"space-x-3"},is={key:0},as={key:1},ns={class:"text-center flex flex-wrap gap-2"},ds=["onClick"],us=["onClick"],ms={class:"flex justify-between text-center my-6 items-center gap-4"},cs={class:"fixed inset-0 z-10 overflow-y-auto"},fs={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},_s={class:"mb-4"},bs={class:"flex gap-4"},ps={class:"flex items-center gap-2 cursor-pointer"},hs={class:"flex items-center gap-2 cursor-pointer"},gs={key:0},ys={class:"mb-4"},xs={class:"flex items-center gap-3 py-2"},vs=["src","alt"],ks={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},ws={key:2,class:"flex-1"},Vs={class:"font-medium text-sm text-gray-900"},Is={class:"text-xs text-gray-500"},Cs={key:0,class:"flex items-center gap-3"},Us=["src","alt"],Ls={key:1,class:"w-8 h-8 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Fs={class:"font-medium text-sm"},qs={class:"text-red-500 text-sm mt-1"},Ps={key:0,class:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50"},js={class:"flex items-center gap-4"},Ts={class:"flex-shrink-0"},Ss=["src","alt"],As={key:1,class:"w-24 h-24 flex items-center justify-center border border-gray-300 rounded-lg bg-white text-gray-400 text-xs"},Os={class:"flex-1"},Ns={class:"font-semibold text-base text-gray-900 mb-1"},Rs={class:"text-sm text-gray-600 mb-2"},Ms={key:0,class:"text-sm text-gray-500"},Ds={key:1,class:"mb-4"},Es={key:2,class:"mb-4"},Hs={for:"text1-4_item",class:"block font-medium text-sm text-neutral-700 mb-1"},Js=["step"],Qs={class:"text-red-500 text-sm mt-1"},zs={key:3,class:"mb-4"},Bs={for:"text1-4_item2",class:"block font-medium text-sm text-neutral-700 mb-1"},Gs=["step"],Xs={class:"text-red-500 text-sm mt-1"},Ys={key:4,class:"mb-4"},Ks=["disabled"],Ws={class:"text-red-500 text-sm mt-1"},Zs={key:5,class:"mb-4"},$s={class:"mb-4"},tl={class:"text-red-500 text-sm mt-1"},el={class:"mb-4"},sl={class:"text-red-500 text-sm mt-1"},ll={class:"mb-4 flex items-center gap-2"},ol={class:"mb-4 flex items-center gap-2"},rl={class:"mb-4"},il=["value"],al={key:0,class:"mb-4"},nl={key:1,class:"mb-4"},dl={for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},ul=["step"],ml={class:"text-red-500 text-sm mt-1"},cl={key:2,class:"mb-4"},fl={for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},_l=["step"],bl={class:"text-red-500 text-sm mt-1"},pl={key:3,class:"mb-4"},hl=["disabled"],gl={class:"text-red-500 text-sm mt-1"},yl={key:4,class:"mb-4"},xl={key:5,class:"mb-4"},vl={class:"text-center w-full"},kl=["src"],wl={class:"text-red-500 text-sm mt-1"},Vl={class:"mb-6 text-center"},Il={class:"fixed inset-0 z-40 overflow-y-auto"},Cl={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},Ul={class:"mb-4"},Ll={class:"mb-4"},Fl={key:0,class:"mt-2"},ql={class:"mt-1 text-sm text-gray-500"},Pl=["onClick"],jl={class:"flex gap-2 justify-end"},Tl=["disabled"],Sl={key:0},Al={key:1};function Ol(l,t,r,o,d,n){const C=v("Head"),w=v("Link"),x=v("VueDatePicker"),f=v("multiselect"),V=v("XMarkIcon"),q=v("TransitionChild"),T=v("DialogPanel"),S=v("Dialog"),A=v("TransitionRoot"),D=v("DialogTitle"),E=v("AppLayout");return a(),i(k,null,[_(C,{title:"ガチャ 編集"}),_(E,{closeModal:n.closeModal},{default:h(()=>[e("div",lt,[e("div",ot,[e("div",rt,[r.gacha.status==1?(a(),i("button",{key:0,type:"button",onClick:t[0]||(t[0]=s=>n.toPublic(0)),class:O([{"opacity-25":o.form_to_public.processing},"inline w-44 py-2.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150"]),disabled:o.form_to_public.processing}," 非公開にする ",10,it)):(a(),i("button",{key:1,type:"button",onClick:t[1]||(t[1]=s=>n.toPublic(1)),class:O([{"opacity-25":o.form_to_public.processing},"inline w-44 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"]),disabled:o.form_to_public.processing}," 公開にする ",10,at))])]),e("form",{onSubmit:t[31]||(t[31]=j(s=>n.submit(),["prevent"]))},[o.form.rank_limit==-1?(a(),i("div",nt,[e("span",dt,[t[65]||(t[65]=b(" 専用URL: ",-1)),_(w,{href:l.route("user.gacha",{id:r.gacha.id,code:r.gacha.description}),class:"text-blue-500 hover:text-blue-700"},{default:h(()=>[b(u(l.route("user.gacha",{id:r.gacha.id,code:r.gacha.description})),1)]),_:1},8,["href"])]),e("button",{type:"button",onClick:t[2]||(t[2]=s=>n.copyLink(l.route("user.gacha",{id:r.gacha.id,code:r.gacha.description}))),class:"px-3 py-1 rounded-full border text-sm"},"URLをコピー")])):m("",!0),e("div",ut,[e("div",null,[t[66]||(t[66]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"公開時刻",-1)),e("div",mt,[_(x,{modelValue:o.form.publish_at,"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.publish_at=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"非公開時刻",-1)),e("div",ct,[_(x,{modelValue:o.form.unpublish_at,"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.unpublish_at=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])])]),e("div",ft,[t[68]||(t[68]=e("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},"タイトル",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.form.title=s),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.title]]),r.errors.title?(a(),i("div",_t,u(r.errors.title),1)):m("",!0)]),e("div",bt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>o.form.dp_gacha=s),id:"dp_gacha",class:"w-4 h-4 focus:ring-0 text-neutral-600 cursor-pointer"},null,512),[[P,o.form.dp_gacha]]),t[69]||(t[69]=e("label",{for:"dp_gacha",class:"block font-medium text-sm text-neutral-700 cursor-pointer"},"EPガチャ",-1)),r.errors.dp_gacha?(a(),i("div",pt,u(r.errors.dp_gacha),1)):m("",!0)]),e("div",ht,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.show_count=s),id:"show_count",class:"w-4 h-4 focus:ring-0 text-neutral-600 cursor-pointer"},null,512),[[P,o.form.show_count]]),t[70]||(t[70]=e("label",{for:"show_count",class:"block font-medium text-sm text-neutral-700 cursor-pointer"},"残り口数を表示",-1)),r.errors.show_count?(a(),i("div",gt,u(r.errors.show_count),1)):m("",!0)]),e("div",yt,[t[74]||(t[74]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2"}," 必要なアイテム（ガチャチケット） ",-1)),t[75]||(t[75]=e("p",{class:"text-xs text-gray-600 mb-3"}," 複数のアイテムを設定できます。各アイテムの必要数量を指定してください。設定しない場合はポイント消費になります。 ",-1)),n.displayRequiredItems&&n.displayRequiredItems.length>0?(a(),i("div",xt,[(a(!0),i(k,null,U(n.displayRequiredItems,(s,y)=>(a(),i("div",{key:y,class:"p-3 bg-blue-50 border border-blue-200 rounded flex items-center gap-3 flex-wrap"},[s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 object-cover border border-gray-200 rounded"},null,8,vt)):m("",!0),e("div",kt,[e("span",wt,u(s.name),1)]),e("div",Vt,[t[71]||(t[71]=e("label",{class:"text-sm whitespace-nowrap"},"数量:",-1)),c(e("input",{"onUpdate:modelValue":g=>s.quantity=g,type:"number",min:"1",class:"w-20 border-neutral-300 rounded-md shadow-sm text-sm",onInput:g=>n.updateRequiredItemQuantity(y,g.target.value)},null,40,It),[[p,s.quantity,void 0,{number:!0}]])]),e("button",{type:"button",onClick:g=>n.removeRequiredItem(y),class:"px-3 py-1 bg-red-500 hover:bg-red-700 text-white rounded text-sm whitespace-nowrap"}," 削除 ",8,Ct)]))),128))])):m("",!0),e("div",Ut,[e("div",Lt,[e("div",Ft,[_(f,{modelValue:d.selectedItemToAdd,"onUpdate:modelValue":t[8]||(t[8]=s=>d.selectedItemToAdd=s),options:n.availableItemsForSelection,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"アイテムを選択...","allow-empty":!0,noResult:"該当するアイテムが見つかりません","custom-label":n.itemLabel,class:"w-full"},{option:h(({option:s})=>[e("div",qt,[s&&s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 -my-2 object-contain border border-gray-200 rounded",alt:s.name},null,8,Pt)):(a(),i("span",jt," 画像なし ")),s?(a(),i("div",Tt,[e("div",St,u(s.name),1),e("div",At,u(n.getItemTypeText(s.type)),1)])):m("",!0)])]),singleLabel:h(({option:s})=>[s?(a(),i("div",Ot,[s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:s.name},null,8,Nt)):(a(),i("span",Rt," - ")),e("span",Mt,u(s.name),1)])):m("",!0)]),noResult:h(()=>[...t[72]||(t[72]=[e("div",{class:"text-center py-2 text-gray-500 text-sm"}," 該当するアイテムが見つかりません ",-1)])]),noOptions:h(()=>[...t[73]||(t[73]=[e("div",{class:"text-center py-2 text-gray-500 text-sm"}," 選択可能なアイテムがありません ",-1)])]),_:1},8,["modelValue","options","custom-label"])]),c(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>d.selectedItemQuantity=s),type:"number",min:"1",placeholder:"数量",class:"w-24 border-neutral-300 rounded-md shadow-sm"},null,512),[[p,d.selectedItemQuantity,void 0,{number:!0}]]),e("button",{type:"button",onClick:t[10]||(t[10]=(...s)=>n.addRequiredItem&&n.addRequiredItem(...s)),disabled:!d.selectedItemToAdd||d.selectedItemQuantity<1,class:"px-4 py-2 bg-green-500 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"}," 追加 ",8,Dt)])]),r.gachaTicketItems.length===0?(a(),i("div",Et," ガチャチケットアイテムがありません。 ")):m("",!0)]),e("div",Ht,[e("div",null,[e("label",Jt,[b("消費"+u(o.form.dp_gacha?"EP":"ポイント")+"（テキスト）",1),t[76]||(t[76]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.form.point=s),id:"point",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.point]]),r.errors.point?(a(),i("div",Qt,u(r.errors.point),1)):m("",!0)]),e("div",null,[t[77]||(t[77]=e("label",{for:"consume_point",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("ランクアップポイント（テキスト）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.form.consume_point=s),id:"consume_point",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.consume_point]]),r.errors.point?(a(),i("div",zt,u(r.errors.point),1)):m("",!0)])]),e("div",Bt,[t[79]||(t[79]=e("label",{for:"type",class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},[b("種類 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.form.lost_product_type=s),id:"type",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[...t[78]||(t[78]=[e("option",{value:"0"},"限定カード",-1),e("option",{value:"1"},"無限ガチャ",-1)])],512),[[L,o.form.lost_product_type]])]),o.form.lost_product_type=="0"?(a(),i("div",Gt,[t[80]||(t[80]=e("label",{for:"text2",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("総カード数（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.form.count_card=s),id:"text2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.count_card]]),r.errors.count_card?(a(),i("div",Xt,u(r.errors.count_card),1)):m("",!0)])):m("",!0),e("div",Yt,[e("div",null,[t[81]||(t[81]=e("label",{for:"daily_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b(" 1日上限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.form.daily_limit=s),id:"daily_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.daily_limit]]),r.errors.daily_limit?(a(),i("div",Kt,u(r.errors.daily_limit),1)):m("",!0)]),e("div",null,[t[82]||(t[82]=e("label",{for:"button_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b(" 1日ボタン上限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>o.form.button_limit=s),id:"button_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.button_limit]]),r.errors.button_limit?(a(),i("div",Wt,u(r.errors.button_limit),1)):m("",!0)]),e("div",null,[t[83]||(t[83]=e("label",{for:"spin_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("全期間制限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>o.form.spin_limit=s),id:"spin_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[p,o.form.spin_limit]]),r.errors.spin_limit?(a(),i("div",Zt,u(r.errors.spin_limit),1)):m("",!0)])]),e("div",$t,[t[84]||(t[84]=e("label",{for:"count_card",class:"block font-medium text-sm text-neutral-700 mb-1"},"ガチャ試行回数",-1)),_(f,{modelValue:this.buttons,"onUpdate:modelValue":t[18]||(t[18]=s=>this.buttons=s),"tag-placeholder":"",placeholder:"",showNoOptions:!1,options:[],multiple:!0,taggable:!0,label:"label","track-by":"value",onTag:n.addTag},null,8,["modelValue","onTag"])]),e("div",te,[t[86]||(t[86]=e("label",{for:"limit_type",class:"block font-medium text-sm text-neutral-700 mb-1"},"制限種類",-1)),c(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>d.limit_type=s),id:"limit_type",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[...t[85]||(t[85]=[e("option",{value:"0"},"ランク制限",-1),e("option",{value:"-1"},"シークレット",-1),e("option",{value:"-2"},"登録後24時間限定ガチャ",-1),e("option",{value:"-3"},"登録数1週間限定ガチャ",-1)])],512),[[L,d.limit_type]])]),d.limit_type==0?(a(),i("div",ee,[t[87]||(t[87]=e("label",{for:"rank_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},"ランク制限",-1)),_(f,{modelValue:d.rank_selection,"onUpdate:modelValue":t[20]||(t[20]=s=>d.rank_selection=s),options:r.ranks,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"title","track-by":"title",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"入力してください"},null,8,["modelValue","options"])])):m("",!0),e("div",se,[t[88]||(t[88]=e("label",{for:"plan_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},"サブスクリプション制限",-1)),_(f,{modelValue:d.plan_selection,"onUpdate:modelValue":t[21]||(t[21]=s=>d.plan_selection=s),options:r.plans,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"name","track-by":"name",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"入力してください"},null,8,["modelValue","options"])]),e("div",le,[t[89]||(t[89]=e("label",{for:"tag_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},"タグ制限",-1)),_(f,{modelValue:d.tag_selection,"onUpdate:modelValue":t[22]||(t[22]=s=>d.tag_selection=s),options:r.tags,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"name","track-by":"id",searchable:!0,language:"JP",taggable:!1,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"タグを選択してください（空欄の場合は制限なし）"},{default:h(()=>[e("template",oe,[e("div",re,[e("div",{class:"w-4 h-4 rounded border",style:N({backgroundColor:l.props.option.color_theme})},null,4),e("span",null,u(l.props.option.name),1),l.props.option.type==="auto"?(a(),i("span",ie," (自動: "+u(n.format_number(l.props.option.purchase_amount_limit))+"円) ",1)):m("",!0)])]),e("template",ae,[e("div",ne,[e("div",{class:"w-3 h-3 rounded border",style:N({backgroundColor:l.props.option.color_theme})},null,4),e("span",de,u(l.props.option.name),1)])])]),_:1},8,["modelValue","options"]),t[90]||(t[90]=e("div",{class:"text-sm text-gray-500 mt-1"}," 選択したタグのいずれかを持つユーザーのみがこのガチャを引くことができます。空欄の場合は制限なしです。 ",-1))]),e("div",ue,[t[91]||(t[91]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"開始時刻",-1)),e("div",me,[_(x,{modelValue:o.form.start_time,"onUpdate:modelValue":t[23]||(t[23]=s=>o.form.start_time=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",ce,[t[92]||(t[92]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"終了時刻",-1)),e("div",fe,[_(x,{modelValue:o.form.end_time,"onUpdate:modelValue":t[24]||(t[24]=s=>o.form.end_time=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",_e,[t[94]||(t[94]=e("label",{for:"cards",class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"ハズレカード登録（半角数字）",-1)),(a(!0),i(k,null,U(o.form.lostProducts,(s,y)=>(a(),i(k,null,[s.key?(a(),i("div",be,[e("div",pe,[e("div",he,[c(e("input",{"onUpdate:modelValue":g=>s.point=g,type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"変換pt"},null,8,ge),[[p,s.point]])]),t[93]||(t[93]=e("span",{class:"pl-1 pr-3"},"PT : ",-1)),e("div",ye,[c(e("input",{"onUpdate:modelValue":g=>s.count=g,type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"枚数",step:n.count_step},null,8,xe),[[p,s.count]])]),e("span",ve,u(n.count_step==1?"枚":"%"),1)]),e("div",ke,[e("button",{type:"button",onClick:g=>n.deleteLostProduct(s.key),class:"h-full w-10 text-center"},[_(V,{class:"h-5 w-5 inline-block"})],8,we)])])):m("",!0)],64))),256)),e("div",Ve,[e("button",{type:"button",onClick:t[25]||(t[25]=s=>n.addLostProduct()),class:"inline-block items-center max-w-60 w-full mx-auto py-2.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 mr-2"}," カード追加 ")])]),e("div",Ie,[t[95]||(t[95]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("サムネイル "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ce,[d.url1?(a(),i("img",{key:0,src:d.url1,class:"inline-block mt-4 h-52"},null,8,Ue)):m("",!0)]),e("input",{onChange:t[26]||(t[26]=(...s)=>n.previewImage1&&n.previewImage1(...s)),ref:"photo1",id:"file1",type:"file",class:"w-full"},null,544),r.errors.thumbnail?(a(),i("div",Le,u(r.errors.thumbnail),1)):m("",!0)]),e("div",Fe,[t[96]||(t[96]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("詳細ページ画像 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",qe,[d.url?(a(),i("img",{key:0,src:d.url,class:"inline-block mt-4 h-52"},null,8,Pe)):m("",!0)]),e("input",{onChange:t[27]||(t[27]=(...s)=>n.previewImage&&n.previewImage(...s)),ref:"photo",id:"file1",type:"file",class:"w-full"},null,544),r.errors.image?(a(),i("div",je,u(r.errors.image),1)):m("",!0)]),e("div",Te,[t[99]||(t[99]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-2"},[b("動画設定"),e("span",{class:"text-red-500"},"*")],-1)),e("div",Se,[t[97]||(t[97]=e("label",{for:"video_group",class:"font-medium text-sm text-neutral-700 whitespace-nowrap"},"グループ",-1)),c(e("select",{"onUpdate:modelValue":t[28]||(t[28]=s=>d.selected_group=s),onChange:t[29]||(t[29]=(...s)=>n.onGroupChange&&n.onGroupChange(...s)),id:"video_group",class:"flex-1 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300 max-w-64"},[(a(!0),i(k,null,U(r.video_names,(s,y)=>(a(),i("option",{value:s.group},u(s.group),9,Ae))),256))],544),[[L,d.selected_group]])]),(a(!0),i(k,null,U(d.video_entries,(s,y)=>(a(),i("div",{key:y,class:"mb-2 rounded-md"},[e("div",Oe,[c(e("input",{type:"number",class:"h-9 w-24 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300","onUpdate:modelValue":g=>s.point=g,placeholder:"pt"},null,8,Ne),[[p,s.point]]),t[98]||(t[98]=e("span",{class:"text-sm text-neutral-600 whitespace-nowrap"},"以上 =",-1)),e("div",Re,[_(f,{modelValue:s.levels,"onUpdate:modelValue":g=>s.levels=g,options:n.availableVideoLevels,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"label","track-by":"value",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"動画レベルを選択"},null,8,["modelValue","onUpdate:modelValue","options"])]),e("button",{type:"button",onClick:g=>n.deleteVideoEntry(y),class:"h-9 w-9 shrink-0 text-center hover:bg-neutral-100 rounded"},[_(V,{class:"h-5 w-5 inline-block"})],8,Me)])]))),128)),e("div",De,[e("button",{type:"button",onClick:t[30]||(t[30]=s=>n.addVideoEntry()),class:"inline-block items-center px-8 py-2 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 mr-2"}," 追加 ")])]),e("div",Ee,[t[101]||(t[101]=e("button",{type:"submit",class:"inline-block items-center flex-1 max-w-60 py-2 bg-green-500 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 保存 ",-1)),_(w,{href:l.route("admin.gacha",{cat_id:r.gacha.category_id}),as:"button",class:"inline-block items-center flex-1 max-w-60 py-2 bg-rose-500 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-rose-700 active:bg-rose-700 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150"},{default:h(()=>[...t[100]||(t[100]=[b(" 戻る ",-1)])]),_:1},8,["href"])])],32),o.form.lost_product_type=="0"?(a(),i(k,{key:0},[t[102]||(t[102]=e("h3",{class:"mb-2 font-bold"},"ラストワン賞 登録",-1)),t[103]||(t[103]=e("hr",null,null,-1)),e("div",He,[r.product_last.id?(a(),i("div",Je,[e("img",{src:r.product_last.image,class:"w-20 h-20 inline-block object-contain"},null,8,Qe),e("div",ze,[e("div",null,u(r.product_last.name),1),e("div",null,u(r.product_last.rare),1),e("div",Be,u(r.product_last.point.toLocaleString())+"pt",1)])])):m("",!0),e("div",Ge,[r.product_last.name?(a(),i("button",{key:0,type:"button",onClick:t[32]||(t[32]=s=>n.modalProductLastOpen()),class:"items-center flex-1 min-w-16 py-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 編集 ")):(a(),i("button",{key:1,type:"button",onClick:t[33]||(t[33]=s=>n.modalProductLastOpen()),class:"items-center flex-1 max-w-60 py-2 my-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 追加 ")),r.product_last.name?(a(),i("button",{key:2,onClick:t[34]||(t[34]=s=>n.destroy_product_last(r.product_last.id)),type:"button",class:"items-center flex-1 min-w-16 py-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," 削除 ")):m("",!0)])])],64)):m("",!0),e("div",Xe,[e("div",Ye,[t[104]||(t[104]=e("span",{class:"font-bold"},"当たりカード 登録",-1)),e("button",{type:"button",onClick:t[35]||(t[35]=s=>d.csvDialogOpen=!0),class:"inline-block px-4 py-2 bg-emerald-600 text-white text-xs rounded hover:bg-emerald-700 transition-colors"}," CSVで登録 ")]),e("div",Ke,[t[107]||(t[107]=e("label",{for:"sorting",class:"block font-medium text-sm text-neutral-700 text-nowrap"},"ソート",-1)),c(e("select",{"onUpdate:modelValue":t[36]||(t[36]=s=>d.sorting=s),id:"sorting",class:"text-sm w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[t[105]||(t[105]=e("option",{value:"point_up"},"ポイント昇順",-1)),t[106]||(t[106]=e("option",{value:"point_down"},"ポイント降順",-1)),e("option",We,u(o.form.lost_product_type=="1"?"排出率昇順":"カード枚数昇順"),1),e("option",Ze,u(o.form.lost_product_type=="1"?"排出率降順":"カード枚数降順"),1)],512),[[L,d.sorting]])])]),t[111]||(t[111]=e("hr",{class:"mb-2"},null,-1)),(a(!0),i(k,null,U(n.sortedProducts,(s,y)=>(a(),i("div",$e,[e("div",ts,[e("img",{src:s.image,class:"w-20 h-20 inline-block object-contain"},null,8,es),e("div",ss,[e("div",null,"ID: "+u(s.id)+" "+u(s.rank?`(${s.rank}等)`:""),1),e("div",null,u(s.name),1),e("div",null,u(s.rare),1),e("div",null,[b(u(parseFloat((s.marks*n.count_step).toFixed(7)))+" ",1),s.order?(a(),i("span",ls,"("+u(s.order)+"番)",1)):m("",!0),t[108]||(t[108]=b("  ",-1)),e("span",null,"(表示用: "+u(parseFloat((s.category_id*n.count_step).toFixed(7)))+")",1)]),s.rare!="アイテム"?(a(),i("div",os,[b(u(n.format_number(s.point))+"pt ",1),s.lost_type&&s.lost_type!=0?(a(),i("span",rs,[t[109]||(t[109]=b(" ( ",-1)),s.lost_type%2==1?(a(),i("span",is,"発送専用")):m("",!0),Math.floor(s.lost_type/2)==1?(a(),i("span",as,"黒ケース付き")):m("",!0),t[110]||(t[110]=b(" ) ",-1))])):m("",!0)])):m("",!0)])]),e("div",ns,[e("button",{type:"button",onClick:g=>n.modalProductOpen(s),class:"inline-block items-center flex-1 min-w-16 py-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 編集 ",8,ds),e("button",{type:"button",onClick:g=>n.destroy_product_last(s.id),class:"inline-block items-center flex-1 min-w-16 py-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," 削除 ",8,us)])]))),256)),e("div",ms,[e("span",null,"還元率: "+u(n.point_rate)+"%",1),e("button",{type:"button",onClick:t[37]||(t[37]=s=>n.modalProductOpen(0)),class:"inline-block items-center flex-1 max-w-48 py-2 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150"}," 追加 ")])]),e("template",null,[_(A,{as:"template",show:d.open},{default:h(()=>[_(S,{as:"div",class:"relative z-20",onClose:t[59]||(t[59]=s=>d.open=!1)},{default:h(()=>[_(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:h(()=>[...t[112]||(t[112]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",cs,[e("div",fs,[_(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:h(()=>[_(T,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:h(()=>[e("form",{onSubmit:t[58]||(t[58]=j(s=>n.submit_last(),["prevent"]))},[e("div",_s,[t[115]||(t[115]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2"},"商品タイプ",-1)),e("div",bs,[e("label",ps,[c(e("input",{type:"radio","onUpdate:modelValue":t[38]||(t[38]=s=>o.form_last.use_item=s),value:!1,class:"w-4 h-4"},null,512),[[R,o.form_last.use_item]]),t[113]||(t[113]=e("span",null,"商品を作成",-1))]),e("label",hs,[c(e("input",{type:"radio","onUpdate:modelValue":t[39]||(t[39]=s=>o.form_last.use_item=s),value:!0,class:"w-4 h-4"},null,512),[[R,o.form_last.use_item]]),t[114]||(t[114]=e("span",null,"アイテムを選択",-1))])])]),o.form_last.use_item?(a(),i("div",gs,[e("div",ys,[t[116]||(t[116]=e("label",{for:"item_id",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("アイテム"),e("span",{class:"text-red-500"},"*")],-1)),_(f,{modelValue:d.selectedItem,"onUpdate:modelValue":t[40]||(t[40]=s=>d.selectedItem=s),options:r.items,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"選択してください","allow-empty":!0,noResult:"該当するアイテムが見つかりません",class:"w-full"},{option:h(({option:s})=>[e("div",xs,[s&&s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 -my-2 object-contain border border-gray-200 rounded",alt:s.name},null,8,vs)):(a(),i("span",ks," 画像なし ")),s?(a(),i("div",ws,[e("div",Vs,u(s.name),1),e("div",Is,u(n.getItemTypeText(s.type)),1)])):m("",!0)])]),singleLabel:h(({option:s})=>[s?(a(),i("div",Cs,[s.image?(a(),i("img",{key:0,src:s.image,class:"w-8 h-8 object-contain border border-gray-200 rounded",alt:s.name},null,8,Us)):(a(),i("span",Ls," - ")),e("span",Fs,u(s.name),1)])):m("",!0)]),_:1},8,["modelValue","options"]),e("div",qs,u(r.errors.item_id),1)]),d.selectedItem?(a(),i("div",Ps,[e("div",js,[e("div",Ts,[d.selectedItem.image?(a(),i("img",{key:0,src:d.selectedItem.image,class:"w-24 h-24 object-contain border border-gray-300 rounded-lg bg-white p-2",alt:d.selectedItem.name},null,8,Ss)):(a(),i("div",As," 画像なし "))]),e("div",Os,[e("div",Ns,u(d.selectedItem.name),1),e("div",Rs,u(n.getItemTypeText(d.selectedItem.type)),1),d.selectedItem.description?(a(),i("div",Ms,u(d.selectedItem.description),1)):m("",!0)])])])):m("",!0),o.form_last.is_last==0?(a(),i("div",Ds,[t[118]||(t[118]=e("label",{for:"rank_item",class:"block font-medium text-sm text-neutral-700 mb-1"},"カードランク",-1)),c(e("select",{"onUpdate:modelValue":t[41]||(t[41]=s=>o.form_last.rank=s),id:"rank_item",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[...t[117]||(t[117]=[e("option",{value:"0"},"その他",-1),e("option",{value:"1"},"1等",-1),e("option",{value:"2"},"2等",-1),e("option",{value:"3"},"3等",-1),e("option",{value:"4"},"4等",-1)])],512),[[L,o.form_last.rank]])])):m("",!0),o.form_last.is_last==0?(a(),i("div",Es,[e("label",Hs,[b(u(o.form.lost_product_type=="1"?"排出率 (%)":"枚数")+"（半角数字）",1),t[119]||(t[119]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[42]||(t[42]=s=>o.form_last.last_marks=s),id:"text1-4_item",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,Js),[[p,o.form_last.last_marks]]),e("div",Qs,u(r.errors.last_marks),1)])):m("",!0),o.form_last.is_last==0?(a(),i("div",zs,[e("label",Bs,[b(u(o.form.lost_product_type=="1"?"表示用の排出率 (%)":"表示用の在庫数")+"（半角数字）",1),t[120]||(t[120]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[43]||(t[43]=s=>o.form_last.category_id=s),id:"text1-4_item2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,Gs),[[p,o.form_last.category_id]]),e("div",Xs,u(r.errors.category_id),1)])):m("",!0),o.form_last.is_last==0&&o.form.lost_product_type!="1"?(a(),i("div",Ys,[t[121]||(t[121]=e("label",{for:"text1-4_item3",class:"block font-medium text-sm text-neutral-700 mb-1"},"排出順序",-1)),c(e("input",{"onUpdate:modelValue":t[44]||(t[44]=s=>o.form_last.last_order=s),id:"text1-4_item3",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"排出設定がない場合は、0を入力してください。",required:"",disabled:r.auth.user.type!=1},null,8,Ks),[[p,o.form_last.last_order]]),e("div",Ws,u(r.errors.last_order),1)])):m("",!0),o.form_last.is_last==0?(a(),i("div",Zs,[t[122]||(t[122]=e("label",{for:"min_purchase_amount_item",class:"block font-medium text-sm text-neutral-700 mb-1"},"最低課金限度額（円）",-1)),c(e("input",{"onUpdate:modelValue":t[45]||(t[45]=s=>o.form_last.min_purchase_amount=s),id:"min_purchase_amount_item",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"0を入力すると制限なし（デフォルト: 0）",min:"0"},null,512),[[p,o.form_last.min_purchase_amount]]),t[123]||(t[123]=e("div",{class:"text-sm text-gray-500 mt-1"}," このカードが排出されるための最低課金限度額を設定します。ユーザーの総課金額がこの値未満の場合、このカードは排出されません。 ",-1))])):m("",!0)])):(a(),i(k,{key:1},[e("div",$s,[t[124]||(t[124]=e("label",{for:"text1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("名前"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[46]||(t[46]=s=>o.form_last.last_name=s),id:"text1-1",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",required:""},null,512),[[p,o.form_last.last_name]]),e("div",tl,u(r.errors.last_name),1)]),e("div",el,[t[125]||(t[125]=e("label",{for:"text1-2",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("変換ポイント（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[47]||(t[47]=s=>o.form_last.last_point=s),id:"text1-2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",required:""},null,512),[[p,o.form_last.last_point]]),e("div",sl,u(r.errors.last_point),1)]),e("div",ll,[c(e("input",{id:"delivery_only","onUpdate:modelValue":t[48]||(t[48]=s=>o.form_last.delivery_only=s),type:"checkbox"},null,512),[[P,o.form_last.delivery_only]]),t[126]||(t[126]=e("label",{for:"delivery_only",class:"cursor-pointer text-sm py-1"}," 発送専用 ",-1))]),e("div",ol,[c(e("input",{id:"black_case","onUpdate:modelValue":t[49]||(t[49]=s=>o.form_last.black_case=s),type:"checkbox"},null,512),[[P,o.form_last.black_case]]),t[127]||(t[127]=e("label",{for:"black_case",class:"cursor-pointer text-sm py-1"}," 黒ケース付き ",-1))]),e("div",rl,[t[128]||(t[128]=e("label",{for:"last_rare",class:"block font-medium text-sm text-neutral-700 mb-1"},"種類",-1)),c(e("select",{"onUpdate:modelValue":t[50]||(t[50]=s=>o.form_last.last_rare=s),id:"last_rare",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(a(!0),i(k,null,U(r.lost_types,(s,y)=>(a(),i("option",{value:s},u(s),9,il))),256))],512),[[L,o.form_last.last_rare]])]),o.form_last.is_last==0?(a(),i("div",al,[t[130]||(t[130]=e("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},"カードランク",-1)),c(e("select",{"onUpdate:modelValue":t[51]||(t[51]=s=>o.form_last.rank=s),id:"rank",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[...t[129]||(t[129]=[e("option",{value:"0"},"その他",-1),e("option",{value:"1"},"1等",-1),e("option",{value:"2"},"2等",-1),e("option",{value:"3"},"3等",-1),e("option",{value:"4"},"4等",-1)])],512),[[L,o.form_last.rank]])])):m("",!0),o.form_last.is_last==0?(a(),i("div",nl,[e("label",dl,[b(u(o.form.lost_product_type=="1"?"排出率 (%)":"枚数")+"（半角数字）",1),t[131]||(t[131]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[52]||(t[52]=s=>o.form_last.last_marks=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,ul),[[p,o.form_last.last_marks]]),e("div",ml,u(r.errors.last_marks),1)])):m("",!0),o.form_last.is_last==0?(a(),i("div",cl,[e("label",fl,[b(u(o.form.lost_product_type=="1"?"表示用の排出率 (%)":"表示用の在庫数")+"（半角数字）",1),t[132]||(t[132]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[53]||(t[53]=s=>o.form_last.category_id=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,_l),[[p,o.form_last.category_id]]),e("div",bl,u(r.errors.last_marks),1)])):m("",!0),o.form_last.is_last==0&&o.form.lost_product_type!="1"?(a(),i("div",pl,[t[133]||(t[133]=e("label",{for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},"排出順序",-1)),c(e("input",{"onUpdate:modelValue":t[54]||(t[54]=s=>o.form_last.last_order=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"排出設定がない場合は、0を入力してください。",required:"",disabled:r.auth.user.type!=1},null,8,hl),[[p,o.form_last.last_order]]),e("div",gl,u(r.errors.last_order),1)])):m("",!0),o.form_last.is_last==0?(a(),i("div",yl,[t[134]||(t[134]=e("label",{for:"min_purchase_amount",class:"block font-medium text-sm text-neutral-700 mb-1"},"最低課金限度額（円）",-1)),c(e("input",{"onUpdate:modelValue":t[55]||(t[55]=s=>o.form_last.min_purchase_amount=s),id:"min_purchase_amount",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"0を入力すると制限なし（デフォルト: 0）",min:"0"},null,512),[[p,o.form_last.min_purchase_amount]]),t[135]||(t[135]=e("div",{class:"text-sm text-gray-500 mt-1"}," このカードが排出されるための最低課金限度額を設定します。ユーザーの総課金額がこの値未満の場合、このカードは排出されません。 ",-1))])):m("",!0),o.form_last.use_item?m("",!0):(a(),i("div",xl,[t[136]||(t[136]=e("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("画像アップロード "),e("span",{class:"text-red-500"},"*")],-1)),e("div",vl,[d.url2?(a(),i("img",{key:0,src:d.url2,class:"inline-block mt-4 h-24"},null,8,kl)):m("",!0)]),e("input",{onChange:t[56]||(t[56]=(...s)=>n.previewImage2&&n.previewImage2(...s)),ref:"photo2",id:"file1-1",type:"file",class:"w-full"},null,544),e("div",wl,u(r.errors.last_image),1)]))],64)),e("div",Vl,[t[137]||(t[137]=e("button",{type:"submit",class:"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"}," 保存 ",-1)),e("button",{type:"button",onClick:t[57]||(t[57]=s=>d.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," キャンセル ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),e("template",null,[_(A,{as:"template",show:d.csvDialogOpen},{default:h(()=>[_(S,{as:"div",class:"relative z-30",onClose:t[64]||(t[64]=s=>d.csvDialogOpen=!1)},{default:h(()=>[_(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:h(()=>[...t[138]||(t[138]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",Il,[e("div",Cl,[_(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:h(()=>[_(T,{class:"p-4 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:h(()=>[_(D,{class:"text-lg font-bold mb-2"},{default:h(()=>[...t[139]||(t[139]=[b("CSVでカード登録",-1)])]),_:1}),t[144]||(t[144]=e("div",{class:"mb-4"},[e("a",{href:"/gacha_csv/product.csv",download:"",class:"text-blue-600 underline"},"CSVテンプレートをダウンロード")],-1)),e("form",{onSubmit:t[63]||(t[63]=j((...s)=>n.submitCsv&&n.submitCsv(...s),["prevent"]))},[e("div",Ul,[t[140]||(t[140]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSVファイル",-1)),e("input",{type:"file",accept:".csv",onChange:t[60]||(t[60]=(...s)=>n.onCsvFileChange&&n.onCsvFileChange(...s)),class:"w-full"},null,32)]),e("div",Ll,[t[142]||(t[142]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"画像ファイル",-1)),e("input",{type:"file",multiple:"",accept:"image/*",onChange:t[61]||(t[61]=(...s)=>n.onImageFilesChange&&n.onImageFilesChange(...s)),class:"w-full"},null,32),t[143]||(t[143]=e("p",{class:"text-sm text-gray-500 mt-1"}," 画像ファイルは任意です。CSVに記載された画像名と一致するファイルを選択してください。",-1)),d.imageFiles.length>0?(a(),i("div",Fl,[t[141]||(t[141]=e("p",{class:"text-sm font-medium text-gray-700"},"選択された画像:",-1)),e("ul",ql,[(a(!0),i(k,null,U(d.imageFiles,(s,y)=>(a(),i("li",{key:y,class:"flex items-center gap-2"},[e("span",null,u(s.name),1),e("button",{type:"button",onClick:g=>n.removeImageFile(y),class:"text-red-500 hover:text-red-700"},[_(V,{class:"h-4 w-4"})],8,Pl)]))),128))])])):m("",!0)]),e("div",jl,[e("button",{type:"button",onClick:t[62]||(t[62]=s=>d.csvDialogOpen=!1),class:"px-4 py-2 bg-neutral-300 text-neutral-700 rounded hover:bg-neutral-400"},"キャンセル"),e("button",{type:"submit",disabled:d.csvUploading,class:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"},[d.csvUploading?(a(),i("span",Sl,"アップロード中...")):(a(),i("span",Al,"登録"))],8,Tl)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1},8,["closeModal"])],64)}const Gl=tt(st,[["render",Ol]]);export{Gl as default};
