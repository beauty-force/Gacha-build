import{H as g,L as w,E as k,r as i,o as a,c as r,b as c,w as d,F as m,d as t,e as h,n as b,t as s,f as L,h as _,i as C}from"./app.030f6f10.js";import{A as T}from"./Admin.95365d0d.js";import{u as j}from"./useConfirm.2c683f6c.js";import{P as H}from"./Pagination.a59e0d2b.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";import"./ChevronRightIcon.6d75498a.js";import"./EllipsisHorizontalIcon.159c2b7b.js";const{confirm:B}=j(),P={components:{Head:g,AppLayout:T,Link:w,Pagination:H},props:{coupons:Object,types:Object,auth:Object,availableTotal:Number,unavailableTotal:Number,totalPages:Number,search_cond:Object},data(){return{activeTab:this.search_cond.tab||"available",_search_cond:this.search_cond}},mounted(){},methods:{delete_coupon(o){B("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F","","error").then(l=>{l&&k.Inertia.delete(route("admin.coupon.delete",{id:o}))})},switchTab(o){this.activeTab=o,this._search_cond.tab=o,this._search_cond.page=1,this.$inertia.get(route("admin.coupon"),this._search_cond)}}},A={class:"md:px-4 px-2"},V={class:"border-b w-full px-2 py-3 mb-2 flex justify-between items-center"},M=t("h3",{class:"font-semibold"},"\u30AF\u30FC\u30DD\u30F3\u767A\u884C",-1),O={class:"border-b border-gray-200 mb-4"},S={class:"-mb-px flex space-x-8"},z={class:"ml-2 bg-teal-100 text-teal-600 py-0.5 px-2.5 rounded-full text-xs font-medium"},E={class:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2.5 rounded-full text-xs font-medium"},F={class:"w-full overflow-auto"},I={class:"w-full table-auto"},D=t("thead",null,[t("tr",{class:"border-b border-collapse text-nowrap font-bold text-sm"},[t("th",{class:"text-center px-1 py-2"},"\u540D\u524D"),t("th",{class:"text-center px-1 py-2"},"\u30B3\u30FC\u30C9"),t("th",{class:"text-center px-1 py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center px-1 py-2"},"\u6709\u52B9\u671F\u9650"),t("th",{class:"text-center px-1 py-2"},"\u679A\u6570(\u4F7F\u7528)"),t("th",{class:"text-center px-1 py-2"},"\u4E00\u4EBA\u5F53\u4E0A\u9650"),t("th",{class:"text-center px-1 py-2"})])],-1),R={class:"text-sm"},q={class:"border-b border-collapse"},G={class:"text-center px-1 py-2"},J={class:"text-center px-1 py-2 text-red-600"},K={key:0,class:"text-center px-1 py-2"},Q={key:1,class:"text-center px-1 py-2"},U={class:"text-center px-1 py-2"},W={class:"text-center px-1 py-2"},X={key:0},Y={class:"text-center px-1 py-2"},Z={class:"flex justify-center items-center py-2 gap-1"},$=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),tt=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),et=["onClick"],st=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),at=[st],ot={key:0,class:"mt-6"};function rt(o,l,n,nt,p,u){const v=i("Head"),x=i("Link"),y=i("Pagination"),f=i("AppLayout");return a(),r(m,null,[c(v,{title:"\u30AF\u30FC\u30DD\u30F3\u767A\u884C"}),c(f,null,{default:d(()=>[t("div",A,[t("div",V,[M,c(x,{href:o.route("admin.coupon.create"),class:"rounded float-right px-8 py-1.5 text-sm bg-teal-600 hover:bg-teal-700 text-neutral-50"},{default:d(()=>[h(" \u65B0\u898F\u8FFD\u52A0 ")]),_:1},8,["href"])]),t("div",O,[t("nav",S,[t("button",{onClick:l[0]||(l[0]=e=>u.switchTab("available")),class:b(["py-2 px-1 border-b-2 font-medium text-sm",p.activeTab==="available"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[h(" \u5229\u7528\u53EF\u80FD\u30AF\u30FC\u30DD\u30F3 "),t("span",z,s(n.availableTotal),1)],2),t("button",{onClick:l[1]||(l[1]=e=>u.switchTab("unavailable")),class:b(["py-2 px-1 border-b-2 font-medium text-sm",p.activeTab==="unavailable"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[h(" \u5229\u7528\u4E0D\u53EF\u30AF\u30FC\u30DD\u30F3 "),t("span",E,s(n.unavailableTotal),1)],2)])]),t("div",F,[t("table",I,[D,t("tbody",R,[(a(!0),r(m,null,L(n.coupons,e=>(a(),r("tr",q,[t("td",G,s(e.title),1),t("td",J,s(e.code),1),e.type=="NORMAL"?(a(),r("td",K,s(e.point.toLocaleString()+"pt"),1)):(a(),r("td",Q,s("\u5272\u5F15\u7387: "+e.min_rate+"~"+e.max_rate+"%"),1)),t("td",U,s(e.expiration),1),t("td",W,[h(s(e.count.toLocaleString())+" ",1),e.used_count>0?(a(),r("span",X,"/ "+s(e.used_count.toLocaleString()),1)):_("",!0)]),t("td",Y,s(e.user_limit),1),t("td",null,[t("div",Z,[c(x,{href:o.route("admin.coupon.create",{id:e.id}),class:"rounded float-right p-1.5 text-sm bg-yellow-500 hover:bg-yellow-600 text-neutral-50 text-nowrap"},{default:d(()=>[$]),_:2},1032,["href"]),n.auth.user.type==1?(a(),C(x,{key:0,href:o.route("admin.coupon.edit",e.id),class:"rounded float-right p-1.5 text-sm bg-cyan-600 hover:bg-cyan-700 text-neutral-50 text-nowrap"},{default:d(()=>[tt]),_:2},1032,["href"])):_("",!0),n.auth.user.type==1?(a(),r("button",{key:1,onClick:lt=>u.delete_coupon(e.id),class:"rounded float-right p-1.5 text-sm bg-neutral-600 hover:bg-neutral-700 text-neutral-50 text-nowrap"},at,8,et)):_("",!0)])])]))),256))])]),n.totalPages>1?(a(),r("div",ot,[c(y,{route_name:"admin.coupon",search_cond:p._search_cond,total:n.totalPages},null,8,["route_name","search_cond","total"])])):_("",!0)])])]),_:1})],64)}const xt=N(P,[["render",rt]]);export{xt as default};
