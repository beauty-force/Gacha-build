import{d as c,r as s,c as a,o as i,a as n,w as f,b as t,e as _,i as h,j as v,v as D,n as k,t as u,F as L}from"./app-BnS6p37g.js";import{A as I}from"./UserLayout-DTYNAcEA.js";import{_ as C}from"./InputError-1MNd4p-k.js";import{a as E,u as A}from"./useConfirm-zA1IHriv.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as T}from"./ExclamationTriangleIcon-CoOdPbvx.js";import"./index-D0nRK_3F.js";const{confirm:V,alert:q}=A(),H={components:{Head:c.Head,AppLayout:I,Link:c.Link,InputError:C,ChevronLeftIcon:E,ExclamationTriangleIcon:T},props:{withdrawalRequestedAt:String},setup(){return{form:c.useForm({confirmation:""})}},methods:{submitWithdrawal(){if(this.form.confirmation!=="削除"){q("「削除」と正確に入力してください。");return}V("本当に退会しますか？","退会申請を行うと、7日後にアカウントが完全に削除されます。7日以内にログインするとキャンセルされます。","warning").then(o=>{o&&this.form.post(route("account.deletion.request"),{preserveState:!1,preserveScroll:!1})})},formatDate(o){return o?new Date(o).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},getDeletionDate(o){if(!o)return null;const e=new Date(o);return e.setDate(e.getDate()+7),e.toISOString()}}},N={class:"w-full min-h-full"},R={class:"px-4 pt-4 pb-1"},W={class:"px-4 pb-6 space-y-6"},B={class:"space-y-4"},F=["disabled"],j={key:0},M={key:1},P={key:0,class:"bg-yellow-50 rounded-lg border border-yellow-300 p-4"},z={class:"flex items-start gap-2"},J={class:"space-y-2 text-sm"},O={class:"text-yellow-800"},U={class:"text-yellow-800"};function G(o,e,d,r,K,l){const p=s("Head"),x=s("ChevronLeftIcon"),b=s("Link"),w=s("InputError"),g=s("ExclamationTriangleIcon"),y=s("AppLayout");return i(),a(L,null,[n(p,{title:"退会申請"}),n(y,null,{default:f(()=>[t("div",N,[t("div",R,[n(b,{href:o.route("profile.index"),class:"text-sm text-neutral-600 hover:text-yellow-500 mb-4 inline-flex items-center"},{default:f(()=>[n(x,{class:"w-4 h-4 mr-1"}),e[2]||(e[2]=_(" マイページ ",-1))]),_:1},8,["href"]),e[3]||(e[3]=t("h1",{class:"text-xl font-bold mb-6"},"退会申請",-1))]),t("div",W,[e[7]||(e[7]=t("div",{class:"bg-white rounded-lg border border-neutral-200 p-4 space-y-4"},[t("div",{class:"space-y-2 text-sm text-neutral-700"},[t("p",null," 退会申請を行うと、申請日から7日後にアカウントが完全に削除されます。 "),t("p",null," 申請後7日以内に再度ログインされた場合、退会申請は自動的にキャンセルされます。 "),t("p",{class:"text-xs text-neutral-500"}," *完全削除される日付と時刻は1日前にメールでお知らせします。 ")]),t("div",{class:"font-bold text-base text-neutral-900 pt-2 border-t border-neutral-200"}," 本当に退会されますか？ ")],-1)),e[8]||(e[8]=t("div",{class:"bg-red-50 rounded-lg border border-red-200 p-4 space-y-3"},[t("div",{class:"space-y-2 text-sm text-neutral-700"},[t("p",null," 退会申請から7日が経過し、アカウントが削除されると、保有しているコイン、獲得済みカードを含むすべてのデータおよび商品は完全に消去され、復元することはできません。 "),t("p",null," また、発送依頼中、発送済みなどの全ての商品に関するサポート、対応等ができかねます。 "),t("p",null," 削除をご希望の場合は、下記フォームに「削除」と入力のうえ、送信ボタンをタップしてください。退会が完了すると所持されているポイント、EPは全て消失いたします。 "),t("p",{class:"text-xs text-neutral-600 pt-2 border-t border-red-200"}," また、新たにアカウントを作成される場合、不正利用防止の観点から、以前ご登録されていた電話番号でのSMS認証はご利用いただけませんので、あらかじめご了承ください。 ")])],-1)),t("div",B,[t("div",null,[e[4]||(e[4]=t("label",{for:"confirmation",class:"block text-sm font-bold mb-2"}," 確認のため「削除」と入力してください ",-1)),v(t("input",{id:"confirmation","onUpdate:modelValue":e[0]||(e[0]=m=>r.form.confirmation=m),type:"text",class:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:border-yellow-500 focus:ring focus:ring-yellow-200 focus:ring-opacity-50",placeholder:"削除"},null,512),[[D,r.form.confirmation]]),n(w,{class:"mt-2",message:r.form.errors.confirmation},null,8,["message"])]),t("button",{type:"button",onClick:e[1]||(e[1]=(...m)=>l.submitWithdrawal&&l.submitWithdrawal(...m)),disabled:r.form.processing||r.form.confirmation!=="削除",class:k(["w-full py-3 rounded-md font-semibold text-white transition-colors",r.form.processing||r.form.confirmation!=="削除"?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])},[r.form.processing?(i(),a("span",j,"処理中...")):(i(),a("span",M,"削除する"))],10,F)]),d.withdrawalRequestedAt?(i(),a("div",P,[t("div",z,[n(g,{class:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),t("div",J,[e[5]||(e[5]=t("p",{class:"font-bold text-yellow-900"}," 退会申請が受理されました ",-1)),t("p",O," 退会申請日: "+u(l.formatDate(d.withdrawalRequestedAt)),1),t("p",U," 削除予定日: "+u(l.formatDate(l.getDeletionDate(d.withdrawalRequestedAt))),1),e[6]||(e[6]=t("p",{class:"text-xs text-yellow-700 pt-2"}," 7日以内にログインすると、退会申請は自動的にキャンセルされます。 ",-1))])])])):h("",!0)])])]),_:1})],64)}const ot=S(H,[["render",G]]);export{ot as default};
