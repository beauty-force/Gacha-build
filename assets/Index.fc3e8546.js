import{H as M,E as L,G as H,r as m,o as f,c as _,b as d,w as p,F as x,d as e,f as j,t as l,Y as S,I as V,J as c,K as u,h as W,n as U,e as a}from"./app.3de5bdca.js";import{A as D}from"./Admin.b765831f.js";import{N as P,e as q,U as I,o as N,f as O,u as z}from"./useConfirm.ba0ea4e2.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const{confirm:B}=z(),R={components:{Head:M,AppLayout:D,Dialog:P,DialogPanel:q,DialogTitle:I,TransitionChild:N,TransitionRoot:O},props:{errors:Object,ranks:Object},data(){return{url1:null,url2:null,open:!1}},methods:{destroy_rank(o){B("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F","","error").then(s=>{s&&L.Inertia.delete(route("admin.rank.destroy",{id:o}))})},modalOpen(o){o?(this.form.id=o.id,this.form.rank=o.rank,this.form.title=o.title,this.form.limit=o.limit,this.form.keep_limit=o.keep_limit,this.form.bonus=o.bonus,this.form.pt_rate=o.pt_rate,this.form.dp_rate=o.dp_rate,this.form.badge="",this.url2=o.badge):(this.form.id=0,this.form.rank="",this.form.title="",this.form.limit="",this.form.keep_limit="",this.form.bonus="",this.form.pt_rate=0,this.form.dp_rate=1,this.form.badge="",this.url2=""),this.open=!0},closeModal(){this.open=!1},submit(){this.$refs.photo2.files[0]&&(this.form.badge=this.$refs.photo2.files[0]),this.form.post(route("admin.rank.store"),{preserveScroll:!0,onFinish:()=>{}})},previewImage2(o){const s=o.target.files[0];this.url2=URL.createObjectURL(s)},pt_rate_string(o){return o.rank==1?'<span class="text-[1.5em]">\u2014</span>':o.limit<0||o.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${o.pt_rate}%\u4ED8\u4E0E<br/>(\u8CFC\u5165\u6642PT\u306E)`},format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},bonus_pt_string(o){return o.rank==1?'<span class="text-[1.5em]">\u2014</span>':o.limit<0||o.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${this.format_number(o.bonus)}PT`}},setup(o){return{form:H({id:"",rank:"",title:"",limit:"",keep_limit:"",bonus:"",pt_rate:"",dp_rate:"",image:"",badge:""})}},mounted(){}},F={class:"pt-4 px-5 py-2"},E=e("h1",{class:"mb-2 text-lg font-bold"},"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A",-1),G=e("hr",{class:"mb-2"},null,-1),J={class:"flex flex-wrap border-neutral-200 items-center gap-[0.8em]"},K={class:"w-[1em]"},Y={class:"flex-1 flex bg-neutral-200 rounded-lg justify-center relative"},Q=["src"],X={class:"absolute top-0 bottom-0 left-0 right-0 flex items-center"},Z={class:"text-center text-[0.9em] text-black font-black w-[30%] h-full flex flex-col items-center justify-center relative"},$=["innerHTML"],ee=["innerHTML"],te=e("div",{class:"h-full w-[0.3em] bg-white"},null,-1),se={class:"text-center text-[0.8em] font-bold text-white w-[40%] h-full flex items-center justify-center"},oe={class:"text-center flex gap-[0.4em] items-end h-full"},re={class:"relative flex justify-center text-[1em]"},ne={class:"absolute leading-[1.2em]"},le=e("div",{class:"h-full w-[0.3em] bg-white"},null,-1),ie={class:"w-[30%] flex divide-x-[0.3em] divide-white h-full relative"},ae={class:"text-center text-[0.9em] text-black font-black w-[40%] h-full flex items-center justify-center"},de=["innerHTML"],ce=["innerHTML"],ue={class:"text-center text-[0.9em] text-black font-black w-[60%] h-full flex items-center justify-center relative"},me=["innerHTML"],fe=["innerHTML"],_e={class:"flex items-center justify-between"},pe={key:0,class:"text-sm"},be={key:1},he={class:"my-2 text-center flex justify-center gap-2"},xe=["onClick"],ge=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),ve=[ge],ye=["onClick"],ke=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),we=[ke],Te={class:"text-center mb-6"},Ce=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Me={class:"fixed inset-0 z-20 overflow-y-auto"},Le={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},He={class:"mb-4"},je=e("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u30E9\u30F3\u30AF\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),e("span",{class:"text-red-500"},"*")],-1),Se={class:"text-red-500 text-sm mt-1"},Ve={class:"mb-4"},We=e("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u30E9\u30F3\u30AF\u540D"),e("span",{class:"text-red-500"},"*")],-1),Ue={class:"text-red-500 text-sm mt-1"},De={class:"mb-4"},Pe=e("label",{for:"limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u5230\u9054\u57FA\u6E96\u6D88\u8CBB\u91CF\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),e("span",{class:"text-red-500"},"*")],-1),qe={class:"text-red-500 text-sm mt-1"},Ie={class:"mb-4"},Ne=e("label",{for:"keep_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u7DAD\u6301\u57FA\u6E96\u6D88\u8CBB\u91CF\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),e("span",{class:"text-red-500"},"*")],-1),Oe={class:"text-red-500 text-sm mt-1"},ze={class:"mb-4"},Ae=e("label",{for:"bonus",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u30DC\u30FC\u30CA\u30B9PT\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),e("span",{class:"text-red-500"},"*")],-1),Be={class:"text-red-500 text-sm mt-1"},Re={class:"mb-4"},Fe=e("label",{for:"pt_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u8CFC\u5165\u6642PT\u4ED8\u4E0E\u7279\u5178 (%)"),e("span",{class:"text-red-500"},"*")],-1),Ee={class:"text-red-500 text-sm mt-1"},Ge={class:"mb-4"},Je=e("label",{for:"dp_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("EP\u4ED8\u4E0E\u7387 (%)"),e("span",{class:"text-red-500"},"*")],-1),Ke={class:"text-red-500 text-sm mt-1"},Ye={class:"mb-4"},Qe=e("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("\u30E9\u30F3\u30AF\u30AB\u30FC\u30C9\u753B\u50CF "),e("span",{class:"text-red-500"},"*")],-1),Xe={class:"text-center w-full"},Ze=["src"],$e={class:"text-red-500 text-sm mt-1"},et={class:"mb-6 text-center"},tt=["disabled"];function st(o,s,i,r,b,n){const g=m("Head"),h=m("TransitionChild"),v=m("DialogPanel"),y=m("Dialog"),k=m("TransitionRoot"),w=m("AppLayout");return f(),_(x,null,[d(g,{title:"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A"}),d(w,{closeModal:n.closeModal},{default:p(()=>[e("div",F,[E,G,(f(!0),_(x,null,j(i.ranks,(t,T)=>(f(),_("div",{class:"my-2 text-[0.6em] md:text-[1em] sm:text-[0.8em]",key:T},[e("div",J,[e("div",K,l(t.rank),1),e("div",Y,[e("img",{src:t.badge,class:"h-[8.5vw] max-h-[80px]"},null,8,Q),e("div",X,[e("div",Z,[e("span",{class:"leading-[1.4em]",innerHTML:n.pt_rate_string(t),style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,$),e("span",{class:"absolute leading-[1.4em]",innerHTML:n.pt_rate_string(t)},null,8,ee)]),te,e("div",se,[e("div",oe,[e("div",re,[e("span",{class:"leading-[1.2em]",style:S({WebkitTextStrokeColor:"black",WebkitTextStrokeWidth:"2.5px"})},"( "+l(t.title)+" )",5),e("span",ne,"( "+l(t.title)+" )",1)])])]),le,e("div",ie,[e("div",ae,[e("span",{innerHTML:t.dp_rate>0?t.dp_rate+"%":"<span class='text-[1.2em]'>???</span>",style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,de),e("span",{class:"absolute",innerHTML:t.dp_rate>0?t.dp_rate+"%":"<span class='text-[1.2em]'>???</span>"},null,8,ce)]),e("div",ue,[e("span",{class:"leading-[1.4em]",innerHTML:n.bonus_pt_string(t),style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,me),e("span",{class:"absolute leading-[1.4em]",innerHTML:n.bonus_pt_string(t)},null,8,fe)])])])])]),e("div",_e,[t.limit>0?(f(),_("span",pe,"\u5230\u9054 / \u7DAD\u6301\u57FA\u6E96: "+l(n.format_number(t.limit))+" / "+l(n.format_number(t.keep_limit))+" PT",1)):(f(),_("span",be)),e("div",he,[e("button",{type:"button",onClick:C=>n.modalOpen(t),class:"inline-flex items-center justify-center p-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-1",title:"\u7DE8\u96C6"},ve,8,xe),e("button",{type:"button",onClick:C=>n.destroy_rank(t.id),class:"inline-flex items-center justify-center p-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150",title:"\u524A\u9664"},we,8,ye)])])]))),128)),e("div",Te,[e("button",{type:"button",onClick:s[0]||(s[0]=t=>n.modalOpen(0)),class:"inline-block items-center px-10 py-2.5 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 mr-2"}," \u8FFD\u52A0 ")])]),e("template",null,[d(k,{as:"template",show:b.open},{default:p(()=>[d(y,{as:"div",class:"relative z-20",onClose:s[11]||(s[11]=t=>b.open=!1)},{default:p(()=>[d(h,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[Ce]),_:1}),e("div",Me,[e("div",Le,[d(h,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[d(v,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:p(()=>[e("form",{onSubmit:s[10]||(s[10]=V(t=>n.submit(),["prevent"]))},[e("div",He,[je,c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.form.rank=t),id:"rank",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.rank]]),e("div",Se,l(i.errors.rank),1)]),e("div",Ve,[We,c(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.form.title=t),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.title]]),e("div",Ue,l(i.errors.title),1)]),e("div",De,[Pe,c(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.form.limit=t),id:"limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.limit]]),e("div",qe,l(i.errors.limit),1)]),e("div",Ie,[Ne,c(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>r.form.keep_limit=t),id:"keep_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.keep_limit]]),e("div",Oe,l(i.errors.keep_limit),1)]),e("div",ze,[Ae,c(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>r.form.bonus=t),id:"bonus",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.bonus]]),e("div",Be,l(i.errors.bonus),1)]),e("div",Re,[Fe,c(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>r.form.pt_rate=t),id:"pt_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.pt_rate]]),e("div",Ee,l(i.errors.pt_rate),1)]),e("div",Ge,[Je,c(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>r.form.dp_rate=t),id:"dp_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[u,r.form.dp_rate]]),e("div",Ke,l(i.errors.dp_rate),1)]),e("div",Ye,[Qe,e("div",Xe,[b.url2?(f(),_("img",{key:0,src:b.url2,class:"inline-block mt-4 h-24"},null,8,Ze)):W("",!0)]),e("input",{onChange:s[8]||(s[8]=(...t)=>n.previewImage2&&n.previewImage2(...t)),ref:"photo2",id:"file1-1",type:"file",class:"w-full"},null,544),e("div",$e,l(i.errors.badge),1)]),e("div",et,[e("button",{type:"submit",class:U([{"opacity-25":r.form.processing},"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"]),disabled:r.form.processing}," \u4FDD\u5B58 ",10,tt),e("button",{type:"button",onClick:s[9]||(s[9]=t=>b.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," \u30AD\u30E3\u30F3\u30BB\u30EB ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1},8,["closeModal"])],64)}const it=A(R,[["render",st]]);export{it as default};
