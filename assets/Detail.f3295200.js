import{r as p,o as i,c,h as u,b as _,t as o,d as t,n as y,H as k,L as C,G as f,w as P,F as m,J as j,K as L,f as g}from"./app.7e4cc698.js";import{A as S}from"./Admin.0a751ba6.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as F}from"./ChevronRightIcon.9ae41883.js";import{a as H,u as I}from"./useConfirm.b9f55074.js";import{r as O}from"./EllipsisHorizontalIcon.1dd22034.js";const E={components:{ChevronRightIcon:F,ChevronLeftIcon:H,EllipsisHorizontalIcon:O},props:{callback:Function,total:Number},data(){return{page:1}},methods:{}},N={key:0,class:"flex justify-center items-center"},T={key:1,class:"p-2"},z={key:4,class:"p-2"};function A(n,s,e,d,r,a){const h=p("EllipsisHorizontalIcon");return e.total>1?(i(),c("div",N,[r.page>1?(i(),c("button",{key:0,onClick:s[0]||(s[0]=()=>{e.callback(r.page=1)}),class:"rounded-l-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},"1")):u("",!0),r.page>3?(i(),c("span",T,[_(h,{class:"w-5"})])):u("",!0),r.page>2?(i(),c("button",{key:2,onClick:s[1]||(s[1]=()=>{e.callback(r.page=r.page-1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(r.page-1),1)):u("",!0),t("button",{onClick:s[2]||(s[2]=()=>{e.callback(r.page)}),class:y(["w-9 h-9 flex justify-center items-center text-white bg-neutral-600",{"rounded-l-md":r.page==1,"rounded-r-md":r.page==e.total}])},o(r.page),3),r.page+1<e.total?(i(),c("button",{key:3,onClick:s[3]||(s[3]=()=>{e.callback(r.page=r.page+1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(r.page+1),1)):u("",!0),r.page+2<e.total?(i(),c("span",z,[_(h,{class:"w-5"})])):u("",!0),r.page<e.total?(i(),c("button",{key:5,onClick:s[4]||(s[4]=()=>{e.callback(r.page=e.total)}),class:"rounded-r-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(e.total),1)):u("",!0)])):u("",!0)}const D=w(E,[["render",A]]),{confirm:M}=I(),V={components:{Head:k,AppLayout:S,Link:C,PaginationClientSide:D},props:{errors:Object,user:Object,profile:Object,payments:Object,coupons:Object,point_logs:Object,show_limit:Number,rank:String},mounted(){},methods:{submit(){this.form.post(route("admin.users.update"),{preserveScroll:!0,onFinish:()=>{}})},clear_history(){M("\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F \u671F\u9593\u30E9\u30F3\u30AF\u30C7\u30FC\u30BF\u304C\u521D\u671F\u5316\u3055\u308C\u307E\u3059\u3002").then(n=>{n&&this.clear_form.post(route("admin.users.clear_history"),{preserveScroll:!0,onFinish:()=>{}})})},format_number(n){return String(n).replace(/(.)(?=(\d{3})+$)/g,"$1,")},onPageChange(n){this.current_page=n},onPageChange1(n){this.current_page1=n},onPageChange2(n){this.current_page2=n},add_point(n){f({id:this.user.id,point:n}).post(route("admin.users.add_point"),{preserveScroll:!0,onFinish:()=>{this.form.point=this.user.point}})}},data(){return{current_page:1,current_page1:1,current_page2:1}},setup(n){const s=f({id:n.user.id,point:n.user.point}),e=f({id:n.user.id}),d=10,r=Math.floor((n.point_logs.length+n.show_limit-1)/n.show_limit),a=Math.floor((n.payments.length+d-1)/d),h=Math.floor((n.coupons.length+d-1)/d);return{form:s,totalPage:r,clear_form:e,totalPage1:a,totalPage2:h,show_limit1:d}},computed:{paginatedLogs(){const n=(this.current_page-1)*this.show_limit,s=this.current_page*this.show_limit;return this.point_logs.slice(n,s)},paginatedPayments(){const n=(this.current_page1-1)*this.show_limit1,s=this.current_page1*this.show_limit1;return this.payments.slice(n,s)},paginatedCoupons(){const n=(this.current_page2-1)*this.show_limit1,s=this.current_page2*this.show_limit1;return this.coupons.slice(n,s)}}},B={class:"md:px-4 px-2"},J={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},G=t("button",{onclick:"history.back()",class:"rounded-md px-2 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u623B\u308B ",-1),K={class:"w-full text-sm"},R=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",-1),U={class:"p-1 w-3/5"},Y=t("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),q={class:"p-1 w-3/5"},Q=t("td",{class:"p-1 w-2/5 font-bold"},"\u30DD\u30A4\u30F3\u30C8",-1),W={class:"p-1 w-3/5"},X={class:"flex gap-2 mt-2"},Z=t("td",{class:"p-1 w-2/5 font-bold"},"EP",-1),$={class:"p-1 w-3/5"},tt=t("td",{class:"p-1 w-2/5 font-bold"},"\u6D88\u8CBBPT",-1),et={class:"p-1 w-3/5"},st=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),ot={class:"p-1 w-3/5"},nt=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),lt={class:"p-1 w-3/5"},rt=t("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),at={class:"p-1 w-3/5"},it=t("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),ct={class:"p-1 w-3/5"},dt=t("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),ut={class:"p-1 w-3/5"},_t=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E9\u30F3\u30AF",-1),ht={class:"p-1 w-3/5"},mt={class:"my-6 text-center border border-yellow-500 rounded-full p-0.5 w-fit mx-auto text-sm"},pt=["disabled"],bt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},ft=t("h3",null,"\u5165\u91D1\u5C65\u6B74",-1),gt={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base"},xt={class:"w-full table-auto"},yt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u91D1\u984D"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u5229\u7528\u30AF\u30FC\u30DD\u30F3"),t("th",{class:"text-center py-2"},"\u8CFC\u5165\u6642\u9593")])],-1),wt={class:"text-sm"},vt={class:"border divide-x-2"},kt={class:"text-center py-2"},Ct={class:"text-center py-2"},Pt={class:"text-center py-2"},jt={class:"text-center py-2"},Lt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},St=t("h3",null,"\u30AF\u30FC\u30DD\u30F3\u4F7F\u7528\u5C65\u6B74",-1),Ft={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base"},Ht={class:"w-full table-auto"},It=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u540D\u524D"),t("th",{class:"text-center py-2"},"\u30B3\u30FC\u30C9"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u4F7F\u7528\u6642\u9593")])],-1),Ot={class:"text-sm"},Et={class:"border divide-x-2"},Nt={class:"text-center py-2"},Tt={class:"text-center py-2"},zt={class:"text-center py-2"},At={class:"text-center py-2"},Dt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},Mt=t("h3",null,"\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74",-1),Vt={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base overflow-auto"},Bt={class:"min-w-full table-auto"},Jt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u4E8B\u7531"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8\uFF08\u5229\u7528\uFF09"),t("th",{class:"text-center py-2"},"\u6B21\u306E\u30DD\u30A4\u30F3\u30C8\uFF08PT\u6B8B\u9AD8\uFF09"),t("th",{class:"text-center py-2"},"\u65E5\u6642")])],-1),Gt={class:"text-sm"},Kt={class:"border divide-x-2"},Rt={class:"text-center py-2"},Ut={class:"text-center py-2"},Yt={class:"text-center py-2"},qt={class:"text-center py-2"};function Qt(n,s,e,d,r,a){const h=p("Head"),b=p("PaginationClientSide"),v=p("AppLayout");return i(),c(m,null,[_(h,{title:"\u30E6\u30FC\u30B6\u30FC\u7BA1\u7406"}),_(v,null,{default:P(()=>[t("div",B,[t("div",J,[t("h3",null,"\u30E6\u30FC\u30B6\u30FC\u8A73\u7D30 (ID-"+o(e.user.id)+")",1),G]),t("table",K,[e.user?(i(),c(m,{key:0},[t("tr",null,[R,t("td",U,o(e.user.email),1)]),t("tr",null,[Y,t("td",q,o(e.user.phone),1)]),t("tr",null,[Q,t("td",W,[j(t("input",{class:"bg-white/90 w-full px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400",type:"number","onUpdate:modelValue":s[0]||(s[0]=l=>d.form.point=l)},null,512),[[L,d.form.point]]),t("div",X,[t("button",{type:"button",onClick:s[1]||(s[1]=l=>a.add_point(500)),class:"px-4 py-2 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-md shadow-md hover:from-green-500 hover:to-blue-600 transition duration-300 ease-in-out transform hover:scale-105"}," +500 PT "),t("button",{type:"button",onClick:s[2]||(s[2]=l=>a.add_point(1e3)),class:"px-4 py-2 bg-gradient-to-r from-purple-400 to-pink-500 text-white rounded-md shadow-md hover:from-purple-500 hover:to-pink-600 transition duration-300 ease-in-out transform hover:scale-105"}," +1000 PT ")])])]),t("tr",null,[Z,t("td",$,o(e.user.dp),1)]),t("tr",null,[tt,t("td",et,o(e.user.consume_point),1)])],64)):u("",!0),e.profile?(i(),c(m,{key:1},[t("tr",null,[st,t("td",ot,o(e.profile.first_name)+" "+o(e.profile.last_name),1)]),t("tr",null,[nt,t("td",lt,o(e.profile.first_name_gana)+" "+o(e.profile.last_name_gana),1)]),t("tr",null,[rt,t("td",at,o(e.profile.postal_code),1)]),t("tr",null,[it,t("td",ct,o(e.profile.prefecture),1)]),t("tr",null,[dt,t("td",ut,o(e.profile.address),1)]),t("tr",null,[_t,t("td",ht,o(e.rank),1)])],64)):u("",!0)]),t("div",mt,[t("button",{type:"button",onClick:s[3]||(s[3]=(...l)=>a.submit&&a.submit(...l)),class:y([{"opacity-25":d.form.processing},"inline-block items-center px-10 py-1 rounded-full font-semibold text-white uppercase bg-theme bg-theme-hover"]),disabled:d.form.processing}," \u4FDD\u5B58 ",10,pt)]),t("div",bt,[ft,_(b,{callback:a.onPageChange1,total:d.totalPage1},null,8,["callback","total"])]),t("div",gt,[t("table",xt,[yt,t("tbody",wt,[(i(!0),c(m,null,g(a.paginatedPayments,l=>{var x;return i(),c("tr",vt,[t("td",kt,o(l.amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"})),1),t("td",Ct,o(l.point.toLocaleString())+" pt",1),t("td",Pt,o((x=l.coupon_name)!=null?x:"-"),1),t("td",jt,o(l.updated_at),1)])}),256))])])]),t("div",Lt,[St,_(b,{callback:a.onPageChange2,total:d.totalPage2},null,8,["callback","total"])]),t("div",Ft,[t("table",Ht,[It,t("tbody",Ot,[(i(!0),c(m,null,g(a.paginatedCoupons,l=>(i(),c("tr",Et,[t("td",Nt,o(l.title),1),t("td",Tt,o(a.format_number(l.code)),1),t("td",zt,o(a.format_number(l.point))+" pt",1),t("td",At,o(l.updated_at),1)]))),256))])])]),t("div",Dt,[Mt,_(b,{callback:a.onPageChange,total:d.totalPage},null,8,["callback","total"]),t("button",{onClick:s[4]||(s[4]=(...l)=>a.clear_history&&a.clear_history(...l)),class:"rounded-md px-2 py-1 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u5C65\u6B74\u524A\u9664 ")]),t("div",Vt,[t("table",Bt,[Jt,t("tbody",Gt,[(i(!0),c(m,null,g(a.paginatedLogs,l=>(i(),c("tr",Kt,[t("td",Rt,o(l.point_type),1),t("td",Ut,o(l.point_diff),1),t("td",Yt,o(l.point_before+l.point_diff),1),t("td",qt,o(l.updated_at1),1)]))),256))])])])])]),_:1})],64)}const se=w(V,[["render",Qt]]);export{se as default};
