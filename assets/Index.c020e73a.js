import{q as J,o as r,i as C,w as _,b as m,D as g,H as F,d as t,e as h,L as x,c as n,f,t as a,n as v,F as y,h as b,E as p,a6 as T,a7 as $}from"./app.fae13d50.js";import{A as B}from"./Admin.37651170.js";import{u as I}from"./useConfirm.6b50f79b.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";const c=l=>(T("data-v-dc920de6"),l=l(),$(),l),A={class:"mx-auto"},H={class:"bg-white"},V={class:"p-3 md:p-6 bg-white"},z={class:"flex justify-between items-center mb-4"},N=c(()=>t("h3",{class:"text-lg font-medium"},"\u30D7\u30E9\u30F3\u4E00\u89A7",-1)),E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U={class:"p-4"},q={class:"flex items-start justify-between mb-3"},O={class:"flex-1"},G={class:"text-lg font-semibold text-gray-900 mb-1"},K={class:"text-sm text-gray-600 mb-2"},Q={class:"flex items-center space-x-4 text-sm"},R={class:"text-gray-700"},W={class:"text-gray-700"},X={class:"mt-2"},Y={class:"flex flex-col"},Z=c(()=>t("span",{class:"text-xs text-gray-500 mb-1"},"\u767B\u9332\u671F\u9593",-1)),tt=["title"],et=["src"],st={key:0,class:"border-t pt-3"},ot=["onClick"],it={class:"flex items-center space-x-2"},at=c(()=>t("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),rt={class:"text-blue-600 font-medium"},nt={class:"flex items-center space-x-2"},dt={class:"text-gray-500 text-xs"},ct=c(()=>t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)),lt=[ct],ut={key:0,class:"mt-3 space-y-2 max-h-48 overflow-y-auto"},_t=["onClick"],mt={class:"flex items-center space-x-3"},gt={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},ht={class:"text-xs font-medium text-gray-600"},xt={class:"text-sm font-medium text-gray-900"},ft={class:"text-xs text-gray-500"},vt={class:"flex justify-end space-x-2 mt-4 pt-3 border-t"},yt=c(()=>t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),bt=["onClick"],pt=c(()=>t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),wt={__name:"Index",props:{plans:Array},setup(l){const{confirm:w,alert:kt}=I(),d=J([]),k=e=>{const o=d.value.indexOf(e);o>-1?d.value.splice(o,1):d.value.push(e)},D=e=>{w("\u3053\u306E\u30D7\u30E9\u30F3\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F").then(o=>{o&&p.Inertia.delete(route("admin.plans.destroy",e.id))})},j=e=>{p.Inertia.visit(route("admin.users.detail",{id:e}),{preserveScroll:!0,preserveState:!0})},S=e=>{if(!e.start_date&&!e.end_date)return"\u7121\u5236\u9650";if(e.start_date&&e.end_date){const o=new Date(e.start_date),s=new Date(e.end_date),i=o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),u=s.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+s.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`${i} - ${u}`}if(e.start_date){const o=new Date(e.start_date);return`${o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} \u304B\u3089`}if(e.end_date){const o=new Date(e.end_date);return`${o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} \u307E\u3067`}return"\u7121\u5236\u9650"},L=e=>{if(!e.start_date&&!e.end_date)return"\u767B\u9332\u671F\u9593: \u7121\u5236\u9650";if(e.start_date&&e.end_date){const o=new Date(e.start_date),s=new Date(e.end_date),i=o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),u=s.toLocaleDateString("ja-JP")+" "+s.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`\u767B\u9332\u671F\u9593: ${i} - ${u}`}if(e.start_date){const o=new Date(e.start_date);return`\u767B\u9332\u958B\u59CB: ${o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}if(e.end_date){const o=new Date(e.end_date);return`\u767B\u9332\u7D42\u4E86: ${o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}return"\u767B\u9332\u671F\u9593: \u7121\u5236\u9650"},P=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"upcoming":return"bg-blue-100 text-blue-800";case"ended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return(e,o)=>(r(),C(B,null,{default:_(()=>[m(g(F),{title:"\u30D7\u30E9\u30F3\u7BA1\u7406"}),t("div",null,[t("div",A,[t("div",H,[t("div",V,[t("div",z,[N,m(g(x),{href:e.route("admin.plans.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:_(()=>[h(" \u65B0\u898F\u30D7\u30E9\u30F3\u4F5C\u6210 ")]),_:1},8,["href"])]),t("div",E,[(r(!0),n(y,null,f(l.plans,s=>(r(),n("div",{key:s.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[t("div",U,[t("div",q,[t("div",O,[t("h4",G,a(s.name),1),t("p",K,a(s.description),1),t("div",Q,[t("span",R,"\xA5"+a(s.amount.toLocaleString()),1),t("span",W,a(s.point.toLocaleString())+" pt",1)]),t("div",X,[t("div",Y,[Z,t("span",{class:v([P(s.status),"px-2 py-1 text-xs font-medium rounded-full inline-block max-w-full truncate"]),title:L(s)},a(S(s)),11,tt)])])]),t("img",{src:s.image,class:"w-20 h-16 object-contain ml-3"},null,8,et)]),s.users&&s.users.length>0?(r(),n("div",st,[t("button",{onClick:i=>k(s.id),class:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 p-2 rounded-lg hover:bg-gray-50 transition-colors duration-200"},[t("div",it,[at,t("span",rt,a(s.users?s.users.length:0)+" \u540D\u306E\u8CFC\u8AAD\u8005",1)]),t("div",nt,[t("span",dt,a(d.value.includes(s.id)?"\u4E00\u89A7\u3092\u9589\u3058\u308B":"\u4E00\u89A7\u3092\u8868\u793A"),1),(r(),n("svg",{class:v(["w-4 h-4 transition-transform duration-200 text-gray-400",{"rotate-180":d.value.includes(s.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lt,2))])],8,ot),d.value.includes(s.id)?(r(),n("div",ut,[(r(!0),n(y,null,f(s.users,i=>(r(),n("div",{key:i.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200 border border-gray-200",onClick:u=>j(i.id)},[t("div",mt,[t("div",gt,[t("span",ht,a(i.name?i.name.charAt(0):"U"),1)]),t("div",null,[t("p",xt,a(i.name||"\u540D\u524D\u306A\u3057"),1),t("p",ft,a(i.email),1)])])],8,_t))),128))])):b("",!0)])):b("",!0),t("div",vt,[m(g(x),{href:e.route("admin.plans.edit",s.id),class:"flex items-center px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-md"},{default:_(()=>[yt,h(" \u7DE8\u96C6 ")]),_:2},1032,["href"]),t("button",{onClick:i=>D(s),class:"flex items-center px-3 py-2 text-sm font-medium text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md"},[pt,h(" \u524A\u9664 ")],8,bt)])])]))),128))])])])])])]),_:1}))}},Pt=M(wt,[["__scopeId","data-v-dc920de6"]]);export{Pt as default};
