import{r as g,o as r,c as a,h as u,b as _,t as o,d as t,n as v,H as S,L as j,G as f,w as L,F as h,J as y,K as k,M as O,f as m}from"./app.43138155.js";import{A as E}from"./Admin.cbee99ec.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as F}from"./ChevronRightIcon.8ed20fa1.js";import{a as H,u as M}from"./useConfirm.9d3b096f.js";import{r as D}from"./EllipsisHorizontalIcon.f0284521.js";const I={components:{ChevronRightIcon:F,ChevronLeftIcon:H,EllipsisHorizontalIcon:D},props:{callback:Function,total:Number},data(){return{page:1}},methods:{}},V={key:0,class:"flex justify-center items-center"},J={key:1,class:"p-2"},N={key:4,class:"p-2"};function T(n,s,e,i,c,d){const p=g("EllipsisHorizontalIcon");return e.total>1?(r(),a("div",V,[c.page>1?(r(),a("button",{key:0,onClick:s[0]||(s[0]=()=>{e.callback(c.page=1)}),class:"rounded-l-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},"1")):u("",!0),c.page>3?(r(),a("span",J,[_(p,{class:"w-5"})])):u("",!0),c.page>2?(r(),a("button",{key:2,onClick:s[1]||(s[1]=()=>{e.callback(c.page=c.page-1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(c.page-1),1)):u("",!0),t("button",{onClick:s[2]||(s[2]=()=>{e.callback(c.page)}),class:v(["w-9 h-9 flex justify-center items-center text-white bg-neutral-600",{"rounded-l-md":c.page==1,"rounded-r-md":c.page==e.total}])},o(c.page),3),c.page+1<e.total?(r(),a("button",{key:3,onClick:s[3]||(s[3]=()=>{e.callback(c.page=c.page+1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(c.page+1),1)):u("",!0),c.page+2<e.total?(r(),a("span",N,[_(p,{class:"w-5"})])):u("",!0),c.page<e.total?(r(),a("button",{key:5,onClick:s[4]||(s[4]=()=>{e.callback(c.page=e.total)}),class:"rounded-r-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(e.total),1)):u("",!0)])):u("",!0)}const z=P(I,[["render",T]]),{confirm:x}=M(),A={components:{Head:S,AppLayout:E,Link:j,PaginationClientSide:z},props:{errors:Object,user:Object,profile:Object,payments:Object,coupons:Object,point_logs:Object,dp_logs:Object,show_limit:Number,rank:String,auth:Object,subscription:Object},mounted(){},methods:{submit(){this.form.post(route("admin.users.update"),{preserveScroll:!0,onFinish:()=>{}})},clear_history(){x("\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F \u671F\u9593\u30E9\u30F3\u30AF\u30C7\u30FC\u30BF\u304C\u521D\u671F\u5316\u3055\u308C\u307E\u3059\u3002").then(n=>{n&&this.clear_form.post(route("admin.users.clear_history"),{preserveScroll:!0,onFinish:()=>{}})})},format_number(n){return String(n).replace(/(.)(?=(\d{3})+$)/g,"$1,")},onPageChange(n){this.current_page=n},onPageChange1(n){this.current_page1=n},onPageChange2(n){this.current_page2=n},onPageChange3(n){this.current_page3=n},add_point(n){f({id:this.user.id,point:n}).post(route("admin.users.add_point"),{preserveScroll:!0,onFinish:()=>{this.form.point=this.user.point}})},updateStatus(n,s){s==0?x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30D6\u30ED\u30C3\u30AF\u3057\u307E\u3059\u304B\uFF1F","\u7372\u5F97\u3057\u305F\u5546\u54C1\u3068\u767A\u9001\u4F9D\u983C\u4E2D\u306E\u5546\u54C1\u306F\u5168\u3066\u56DE\u53CE\u3055\u308C\u307E\u3059\u3002","warning").then(e=>{e&&f({id:n,status:s}).post(route("admin.users.update"))}):x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u627F\u8A8D\u3057\u307E\u3059\u304B\uFF1F").then(e=>{e&&f({id:n,status:s}).post(route("admin.users.update"))})}},data(){return{current_page:1,current_page1:1,current_page2:1,current_page3:1}},setup(n){const s=f({id:n.user.id,point:n.user.point,dp:n.user.dp,type:n.user.type}),e=f({id:n.user.id}),i=10,c=Math.floor((n.point_logs.length+n.show_limit-1)/n.show_limit),d=Math.floor((n.payments.length+i-1)/i),p=Math.floor((n.coupons.length+i-1)/i),b=Math.floor((n.dp_logs.length+i-1)/i);return{form:s,totalPage:c,clear_form:e,totalPage1:d,totalPage2:p,totalPage3:b,show_limit1:i}},computed:{paginatedLogs(){const n=(this.current_page-1)*this.show_limit,s=this.current_page*this.show_limit;return this.point_logs.slice(n,s)},paginatedDpLogs(){const n=(this.current_page3-1)*this.show_limit1,s=this.current_page3*this.show_limit1;return this.dp_logs.slice(n,s)},paginatedPayments(){const n=(this.current_page1-1)*this.show_limit1,s=this.current_page1*this.show_limit1;return this.payments.slice(n,s)},paginatedCoupons(){const n=(this.current_page2-1)*this.show_limit1,s=this.current_page2*this.show_limit1;return this.coupons.slice(n,s)}}},B={class:"md:px-4 px-2"},U={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},Y=t("button",{onclick:"history.back()",class:"rounded-md px-2 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u623B\u308B ",-1),G={class:"w-full text-sm"},K=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",-1),R={class:"p-1 w-3/5"},q=t("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),Q={class:"p-1 w-3/5"},W=t("td",{class:"p-1 w-2/5 font-bold"},"\u30DD\u30A4\u30F3\u30C8",-1),X={key:0,class:"p-1 w-3/5"},Z={class:"flex gap-2 mt-2"},$={key:1,class:"p-1 w-3/5"},tt=t("td",{class:"p-1 w-2/5 font-bold"},"EP",-1),et={key:0,class:"p-1 w-3/5"},st={key:1,class:"p-1 w-3/5"},ot=t("td",{class:"p-1 w-2/5 font-bold"},"\u6D88\u8CBBPT",-1),nt={class:"p-1 w-3/5"},lt=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),rt={class:"p-1 w-3/5"},at=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),it={class:"p-1 w-3/5"},ct=t("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),dt={class:"p-1 w-3/5"},ut=t("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),_t={class:"p-1 w-3/5"},ht=t("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),pt={class:"p-1 w-3/5"},bt=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E9\u30F3\u30AF",-1),ft={class:"p-1 w-3/5"},mt={key:0},gt=t("td",{class:"p-1 w-2/5 font-bold"},"\u30B5\u30D6\u30B9\u30AF\u30EA\u30D7\u30B7\u30E7\u30F3",-1),yt={class:"p-1 w-3/5"},xt=t("td",{class:"p-1 w-2/5 font-bold"},"\u62DB\u5F85\u30B3\u30FC\u30C9",-1),wt={class:"p-1 w-3/5"},kt={key:2},vt=t("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30AB\u30A6\u30F3\u30C8\u7A2E\u5225",-1),Pt={class:"p-1 w-3/5"},Ct=t("option",{value:"0"},"\u30E6\u30FC\u30B6\u30FC",-1),St=t("option",{value:"2"},"\u7BA1\u7406\u30B9\u30BF\u30C3\u30D5",-1),jt=t("option",{value:"3"},"\u767A\u9001\u30B9\u30BF\u30C3\u30D5",-1),Lt=[Ct,St,jt],Ot={key:3},Et=t("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30AB\u30A6\u30F3\u30C8\u627F\u8A8D",-1),Ft={class:"p-1 w-3/5"},Ht={key:0,class:"mt-6 text-center border border-yellow-500 rounded-full p-0.5 w-fit mx-auto text-sm"},Mt=["disabled"],Dt={class:"border-b w-full p-2 mt-6 mb-2 font-semibold flex justify-between"},It=t("h3",null,"\u5165\u91D1\u5C65\u6B74",-1),Vt={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base"},Jt={class:"w-full table-auto"},Nt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u91D1\u984D"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u5229\u7528\u30AF\u30FC\u30DD\u30F3"),t("th",{class:"text-center py-2"},"\u8CFC\u5165\u6642\u9593")])],-1),Tt={class:"text-sm"},zt={class:"border divide-x-2"},At={class:"text-center py-2"},Bt={class:"text-center py-2"},Ut={class:"text-center py-2"},Yt={class:"text-center py-2"},Gt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},Kt=t("h3",null,"\u30AF\u30FC\u30DD\u30F3\u4F7F\u7528\u5C65\u6B74",-1),Rt={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base"},qt={class:"w-full table-auto"},Qt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u540D\u524D"),t("th",{class:"text-center py-2"},"\u30B3\u30FC\u30C9"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u4F7F\u7528\u6642\u9593")])],-1),Wt={class:"text-sm"},Xt={class:"border divide-x-2"},Zt={class:"text-center py-2"},$t={class:"text-center py-2"},te={class:"text-center py-2"},ee={class:"text-center py-2"},se={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},oe=t("h3",null,"\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74",-1),ne={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base overflow-auto"},le={class:"min-w-full table-auto"},re=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u4E8B\u7531"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8\uFF08\u5229\u7528\uFF09"),t("th",{class:"text-center py-2"},"\u6B21\u306E\u30DD\u30A4\u30F3\u30C8\uFF08PT\u6B8B\u9AD8\uFF09"),t("th",{class:"text-center py-2"},"\u65E5\u6642")])],-1),ae={class:"text-sm"},ie={class:"border divide-x-2"},ce={class:"text-center py-2"},de={class:"text-center py-2"},ue={class:"text-center py-2"},_e={class:"text-center py-2"},he={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},pe=t("h3",null,"EP\u5C65\u6B74",-1),be={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base overflow-auto"},fe={class:"min-w-full table-auto"},me=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u4E8B\u7531"),t("th",{class:"text-center py-2"},"EP\u306E\u5909\u52D5\u91CF"),t("th",{class:"text-center py-2"},"\u6B21\u306EEP"),t("th",{class:"text-center py-2"},"\u65E5\u6642")])],-1),ge={class:"text-sm"},ye={class:"border divide-x-2"},xe={class:"text-center py-2"},we={class:"text-center py-2"},ke={class:"text-center py-2"},ve={class:"text-center py-2"};function Pe(n,s,e,i,c,d){const p=g("Head"),b=g("PaginationClientSide"),C=g("AppLayout");return r(),a(h,null,[_(p,{title:"\u30E6\u30FC\u30B6\u30FC\u7BA1\u7406"}),_(C,null,{default:L(()=>[t("div",B,[t("div",U,[t("h3",null,"\u30E6\u30FC\u30B6\u30FC\u8A73\u7D30 (ID-"+o(e.user.id)+")",1),Y]),t("table",G,[e.user?(r(),a(h,{key:0},[t("tr",null,[K,t("td",R,o(e.user.email),1)]),t("tr",null,[q,t("td",Q,o(e.profile?e.profile.phone:e.user.phone),1)]),t("tr",null,[W,e.auth.user.type==1?(r(),a("td",X,[y(t("input",{class:"bg-white/90 w-full px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400",type:"number","onUpdate:modelValue":s[0]||(s[0]=l=>i.form.point=l)},null,512),[[k,i.form.point]]),t("div",Z,[t("button",{type:"button",onClick:s[1]||(s[1]=l=>d.add_point(500)),class:"px-4 py-2 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-md shadow-md hover:from-green-500 hover:to-blue-600 transition duration-300 ease-in-out transform hover:scale-105"}," +500 PT "),t("button",{type:"button",onClick:s[2]||(s[2]=l=>d.add_point(1e3)),class:"px-4 py-2 bg-gradient-to-r from-purple-400 to-pink-500 text-white rounded-md shadow-md hover:from-purple-500 hover:to-pink-600 transition duration-300 ease-in-out transform hover:scale-105"}," +1,000 PT ")])])):(r(),a("td",$,o(e.user.point.toLocaleString()),1))]),t("tr",null,[tt,e.auth.user.type==1?(r(),a("td",et,[y(t("input",{class:"bg-white/90 w-full px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400",type:"number","onUpdate:modelValue":s[3]||(s[3]=l=>i.form.dp=l)},null,512),[[k,i.form.dp]])])):(r(),a("td",st,o(e.user.dp.toLocaleString()),1))]),t("tr",null,[ot,t("td",nt,o(e.user.consume_point.toLocaleString()),1)])],64)):u("",!0),e.profile?(r(),a(h,{key:1},[t("tr",null,[lt,t("td",rt,o(e.profile.first_name)+" "+o(e.profile.last_name),1)]),t("tr",null,[at,t("td",it,o(e.profile.first_name_gana)+" "+o(e.profile.last_name_gana),1)]),t("tr",null,[ct,t("td",dt,o(e.profile.postal_code),1)]),t("tr",null,[ut,t("td",_t,o(e.profile.prefecture),1)]),t("tr",null,[ht,t("td",pt,o(e.profile.city)+o(e.profile.street)+"\u3000"+o(e.profile.building),1)]),t("tr",null,[bt,t("td",ft,o(e.rank),1)]),e.subscription?(r(),a("tr",mt,[gt,t("td",yt,o(e.subscription.plan.name)+" ("+o(e.subscription.plan.amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"}))+", "+o(e.subscription.plan.point)+" pt) \xA0\xA0\xA0 "+o(e.subscription.starting_date)+" \u767B\u9332 ",1)])):u("",!0),t("tr",null,[xt,t("td",wt,o(e.user.invite_code),1)])],64)):u("",!0),e.auth.user.type==1?(r(),a("tr",kt,[vt,t("td",Pt,[y(t("select",{"onUpdate:modelValue":s[4]||(s[4]=l=>i.form.type=l),class:"w-full px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400"},Lt,512),[[O,i.form.type]])])])):u("",!0),e.auth.user.type==1&&e.user.type!=1?(r(),a("tr",Ot,[Et,t("td",Ft,[e.user.status?(r(),a("button",{key:0,onClick:s[5]||(s[5]=l=>d.updateStatus(e.user.id,0)),class:"px-2 py-1 rounded-md border text-rose-500 hover:bg-rose-100"},"\u524A\u9664")):(r(),a("button",{key:1,onClick:s[6]||(s[6]=l=>d.updateStatus(e.user.id,1)),class:"px-2 py-1 rounded-md border text-sky-500 hover:bg-sky-100"},"\u627F\u8A8D"))])])):u("",!0)]),e.auth.user.type==1?(r(),a("div",Ht,[t("button",{type:"button",onClick:s[7]||(s[7]=(...l)=>d.submit&&d.submit(...l)),class:v([{"opacity-25":i.form.processing},"inline-block items-center px-10 py-1 rounded-full font-semibold text-white uppercase bg-theme bg-theme-hover"]),disabled:i.form.processing}," \u4FDD\u5B58 ",10,Mt)])):u("",!0),t("div",Dt,[It,_(b,{callback:d.onPageChange1,total:i.totalPage1},null,8,["callback","total"])]),t("div",Vt,[t("table",Jt,[Nt,t("tbody",Tt,[(r(!0),a(h,null,m(d.paginatedPayments,l=>{var w;return r(),a("tr",zt,[t("td",At,o(l.amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"})),1),t("td",Bt,o(l.point.toLocaleString())+" pt",1),t("td",Ut,o((w=l.coupon_name)!=null?w:"-"),1),t("td",Yt,o(l.updated_at),1)])}),256))])])]),t("div",Gt,[Kt,_(b,{callback:d.onPageChange2,total:i.totalPage2},null,8,["callback","total"])]),t("div",Rt,[t("table",qt,[Qt,t("tbody",Wt,[(r(!0),a(h,null,m(d.paginatedCoupons,l=>(r(),a("tr",Xt,[t("td",Zt,o(l.title),1),t("td",$t,o(d.format_number(l.code)),1),t("td",te,o(d.format_number(l.point))+" pt",1),t("td",ee,o(l.updated_at),1)]))),256))])])]),t("div",se,[oe,_(b,{callback:d.onPageChange,total:i.totalPage},null,8,["callback","total"]),e.auth.user.type==1?(r(),a("button",{key:0,onClick:s[8]||(s[8]=(...l)=>d.clear_history&&d.clear_history(...l)),class:"rounded-md px-2 py-1 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u5C65\u6B74\u524A\u9664 ")):u("",!0)]),t("div",ne,[t("table",le,[re,t("tbody",ae,[(r(!0),a(h,null,m(d.paginatedLogs,l=>(r(),a("tr",ie,[t("td",ce,o(l.point_type),1),t("td",de,o(l.point_diff.toLocaleString()),1),t("td",ue,o((l.point_before+l.point_diff).toLocaleString()),1),t("td",_e,o(l.updated_at1),1)]))),256))])])]),t("div",he,[pe,_(b,{callback:d.onPageChange3,total:i.totalPage3},null,8,["callback","total"])]),t("div",be,[t("table",fe,[me,t("tbody",ge,[(r(!0),a(h,null,m(d.paginatedDpLogs,l=>(r(),a("tr",ye,[t("td",xe,o(l.dp_type),1),t("td",we,o(l.dp_diff.toLocaleString()),1),t("td",ke,o((l.dp_before+l.dp_diff).toLocaleString()),1),t("td",ve,o(l.updated_at1),1)]))),256))])])])])]),_:1})],64)}const Fe=P(A,[["render",Pe]]);export{Fe as default};
