import{d as f,r as p,c as l,o as n,a as v,w as x,b as s,t as w,i as m,F as d,f as _,l as h,j as L,k as C}from"./app-Bb4dk2vA.js";import{U as B}from"./UserLayout-DMC7_vET.js";import{G as b}from"./GachaCard-D6BpKHQx.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-BoHXeJuv.js";import"./index-DUMVm5vt.js";import"./index-H30DKb9X.js";import"./GachaButtons-iqF1y4YD.js";import"./PlayIcon-44Ns_K6H.js";const S={components:{Head:f.Head,AppLayout:B,Link:f.Link,GachaCard:b},props:{errors:Object,auth:Object,gachas:Object,category_share:Object},data(){return{orderBy:localStorage.getItem("eve-gacha-top-order")||"recommended",one_day_gachas:this.gachas.data.filter(o=>o.rank_limit<0),other_gachas:this.gachas.data.filter(o=>o.rank_limit>-2)}},computed:{sortedGachas(){let o=this.other_gachas;return o.sort((e,t)=>{if(e.status!==t.status)return e.status-t.status;switch(this.orderBy){case"recommended":return t.order_level-e.order_level;case"gauge_low":const u=e.count_rest/e.count_card,r=t.count_rest/t.count_card;return u-r;case"gauge_high":const i=e.count_rest/e.count_card;return t.count_rest/t.count_card-i;case"point_up":return e.point-t.point;case"point_down":return t.point-e.point;case"newest":return t.id-e.id;default:return t.order_level-e.order_level}}),o}},mounted(){this.initializeLazyLoading();const o=sessionStorage.getItem("eve-gacha-top-scroll");o!==null&&(setTimeout(()=>{window.scrollTo(0,parseFloat(o))},100),sessionStorage.removeItem("eve-gacha-top-scroll"))},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},initializeLazyLoading(){const o=document.querySelectorAll("img.lazy"),e={root:null,rootMargin:"0px",threshold:.1},t=r=>{r.src=r.dataset.src},u=new IntersectionObserver((r,i)=>{r.forEach(c=>{c.isIntersecting&&(t(c.target),i.unobserve(c.target))})},e);o.forEach(r=>{u.observe(r)})},orderChanged(){localStorage.setItem("eve-gacha-top-order",this.orderBy),this.$nextTick(()=>{this.initializeLazyLoading()})}}},G={key:0,class:""},I={class:"bg-gradient-to-b from-yellow-100 to-yellow-400 p-4 shadow-lg"},j={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},A={class:"flex px-2 pt-2.5 sticky top-32 z-[11]"},H={class:"sm:px-4 px-4 mb-8 grid sm:grid-cols-2 grid-cols-1 gap-4 pt-4 pb-8"};function O(o,e,t,u,r,i){const c=p("Head"),g=p("GachaCard"),k=p("AppLayout");return n(),l(d,null,[v(c,null,{default:x(()=>[s("title",null,w(t.category_share.title)+"ã‚«ãƒ¼ãƒ‰ã‚¬ãƒãƒ£",1)]),_:1}),v(k,{is_home:!0},{default:x(()=>[r.one_day_gachas.length>0?(n(),l("div",G,[s("div",I,[e[2]||(e[2]=s("h2",{class:"text-rose-500 text-sm sm:text-base md:text-lg font-bold mb-4 -mx-3 text-center flex items-center justify-center"}," ðŸŒˆ æ–°è¦ç™»éŒ²è€…é™å®šï¼ä»Šã ã‘å¼•ã‘ã‚‹è¶…ãŠå¾—ãªã‚ªãƒªãƒ‘ ðŸŒˆ ",-1)),s("div",j,[(n(!0),l(d,null,_(r.one_day_gachas,(a,y)=>(n(),h(g,{gacha:a,is_one_day:!0},null,8,["gacha"]))),256))])])])):m("",!0),s("div",A,[L(s("select",{class:"rounded-full py-2 border focus:ring-0 text-sm md:text-base","onUpdate:modelValue":e[0]||(e[0]=a=>r.orderBy=a),onChange:e[1]||(e[1]=(...a)=>i.orderChanged&&i.orderChanged(...a))},[...e[3]||(e[3]=[s("option",{value:"recommended"},"Â Â ãŠã™ã™ã‚é †Â ",-1),s("option",{value:"gauge_low"},"Â Â æ®‹ã‚²ãƒ¼ã‚¸ãŒå°‘ãªã„é †Â ",-1),s("option",{value:"gauge_high"},"Â Â æ®‹ã‚²ãƒ¼ã‚¸ãŒå¤šã„é †Â ",-1),s("option",{value:"point_up"},"Â Â ãƒã‚¤ãƒ³ãƒˆãŒä½Žã„é †Â ",-1),s("option",{value:"point_down"},"Â Â ãƒã‚¤ãƒ³ãƒˆãŒé«˜ã„é †Â ",-1),s("option",{value:"newest"},"Â Â æ–°ç€é †Â ",-1)])],544),[[C,r.orderBy]])]),s("div",H,[(n(!0),l(d,null,_(i.sortedGachas,(a,y)=>(n(),l(d,null,[a.is_sold_out?m("",!0):(n(),h(g,{key:0,gacha:a},null,8,["gacha"]))],64))),256)),(n(!0),l(d,null,_(i.sortedGachas,(a,y)=>(n(),l(d,null,[a.is_sold_out?(n(),h(g,{key:0,gacha:a},null,8,["gacha"])):m("",!0)],64))),256))])]),_:1})],64)}const J=z(S,[["render",O]]);export{J as default};
