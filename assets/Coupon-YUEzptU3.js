import{d as i,r as p,c as o,o as r,a as c,w as u,b as t,h as v,i as l,e as x,j as w,v as g,t as n,F as f,f as k}from"./app-DD9omvKC.js";import{U as L}from"./UserLayout-DKM_w1IO.js";import"./index-CjfmXPOA.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-DqzKcb5y.js";import"./index-Bgcgj_Ra.js";const N={components:{Head:i.Head,AppLayout:L,Link:i.Link},props:{coupons:Object,errors:Object,types:Object,code:String},mounted(){},methods:{submit(){this.form.post(route("user.coupon.post"),{onSuccess:()=>this.form.reset(),preserveScroll:!0})}},setup(a){return{form:i.useForm({code:a.code})}}},C={class:"pt-6 md:px-6 px-4"},O={class:"mb-4"},j={class:"flex gap-2 flex-wrap justify-end"},U={key:0,class:"text-red-500 text-sm mt-1"},V={class:"w-full mt-8"},A={class:"overflow-auto"},D={class:"min-w-full"},H={class:"border-b border-collapse"},T={class:"text-center py-2 px-2"},B={class:"text-center py-2 px-2 text-nowrap hidden md:block"},F={key:0,class:"text-center py-2 px-2 hidden md:table-cell"},M={key:1,class:"text-center py-2 px-2 hidden md:table-cell"},E={class:"text-center py-2 px-2"},I={key:2,class:"text-center py-2 px-2"},R={key:3,class:"text-center py-2 px-2 text-nowrap"},q={key:4,class:"text-center py-2 px-2 text-nowrap"};function z(a,e,d,m,G,y){const b=p("Head"),_=p("Link"),h=p("AppLayout");return r(),o(f,null,[c(b,{title:"クーポンの獲得"}),c(h,null,{default:u(()=>[t("div",C,[e[9]||(e[9]=t("div",{class:"text-lg text-center w-full mb-6 font-semibold underline underline-offset-8"},[t("h3",null,"   クーポンの獲得   ")],-1)),t("div",null,[t("form",{onSubmit:e[1]||(e[1]=v(s=>y.submit(),["prevent"]))},[t("div",O,[e[3]||(e[3]=t("label",{for:"code",class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},[x("コードを入力してください! "),t("span",{class:"text-red-500"},"*")],-1)),t("div",j,[w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.form.code=s),id:"code",type:"text",class:"flex-1 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[g,m.form.code]]),e[2]||(e[2]=t("button",{type:"submit",class:"items-center px-8 py-2.5 text-white rounded-md bg-theme bg-theme-hover transition ease-in-out duration-150"}," 獲得 ",-1))]),d.errors.code?(r(),o("div",U,n(d.errors.code),1)):l("",!0)])],32)]),t("div",V,[e[7]||(e[7]=t("h3",{class:"underline underline-offset-4"},"獲得履歴",-1)),e[8]||(e[8]=t("h5",{class:"text-xs my-2"},"直近の履歴を5件のみ表示しております。",-1)),t("div",A,[t("table",D,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"border-b border-collapse text-nowrap"},[t("th",{class:"text-center py-2"},"クーポン名"),t("th",{class:"text-center py-2 hidden md:table-cell"},"種類"),t("th",{class:"text-center py-2 hidden md:table-cell"},"ポイント"),t("th",{class:"text-center py-2"},"利用期限"),t("th",{class:"text-center py-2"},"ステータス")])],-1)),t("tbody",null,[(r(!0),o(f,null,k(d.coupons,s=>(r(),o("tr",H,[t("td",T,n(s.title),1),t("td",B,n(d.types[s.type]),1),s.type=="NORMAL"?(r(),o("td",F,n(s.point.toLocaleString()+"pt"),1)):(r(),o("td",M,n("割引率: "+s.min_rate+"~"+s.max_rate+"%"),1)),t("td",E,n(s.expiration),1),s.status==1?(r(),o("td",I,"使用済み")):l("",!0),s.type=="DISCOUNT"&&s.status==0?(r(),o("td",R,[c(_,{href:a.route("user.point",{id:s.record_id}),class:"rounded-md bg-rose-500 hover:bg-rose-700 text-white py-1 px-3"},{default:u(()=>[...e[4]||(e[4]=[x("利用する",-1)])]),_:1},8,["href"])])):l("",!0),s.type=="DISCOUNT"&&s.status==2?(r(),o("td",q,[...e[5]||(e[5]=[t("span",{class:"rounded-md bg-neutral-500 text-white py-1 px-3"},"期限切れ",-1)])])):l("",!0)]))),256))])])])])])]),_:1})],64)}const Y=S(N,[["render",z]]);export{Y as default};
