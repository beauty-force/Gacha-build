import{d as V,r as v,c as i,o as a,a as f,w as p,b as e,i as m,n as A,h as j,e as b,t as u,j as c,v as h,m as P,F as k,f as U,k as F,x as N}from"./app-BLSnRx5q.js";import{A as E}from"./Admin-41mPBhr9.js";import{d as H}from"./index-C7LhDaAa.js";import{B as Q}from"./main-CLhRcTol.js";import{b as J,S as B,h as G,V as z,G as X,Y,u as K}from"./useConfirm-CsUFcD1z.js";import{l as W}from"./index-DTCPKPKj.js";import{s as Z}from"./vue-multiselect-CjQVZifZ.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as tt}from"./ExclamationTriangleIcon-wKHXW9We.js";import"./isNativeReflectConstruct-zdezgZUv.js";const{confirm:R,alert:L}=K(),et={components:{Link:V.Link,Head:V.Head,AppLayout:E,Dialog:Y,DialogPanel:X,DialogTitle:z,TransitionChild:G,TransitionRoot:B,ExclamationTriangleIcon:tt,XMarkIcon:J,VueDatePicker:Q,Multiselect:Z},props:{errors:Object,gacha:Object,category_share:Object,product_last:Object,products:Object,productsLostSetting:Object,videos:Object,titles:Object,ranks:Object,lost_types:Object,video_names:Object,plans:Object,auth:Object,items:Array,gachaTicketItems:Array,currentRequiredItems:Array},data(){return{url:null,url1:null,url2:null,open:!1,sorting:"point_down",csvDialogOpen:!1,csvFile:null,imageFiles:[],csvUploading:!1,rank_selection:[],plan_selection:[],limit_type:0,buttons:[],selected_group:null,selectedItemToAdd:null,selectedItemQuantity:1,video_entries:[],selectedItem:null}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},addTag(o){o=parseInt(o),o&&!this.buttons.find(t=>t.value==o)&&(this.buttons.push({label:o+(o>1?"連":"回"),value:o}),this.buttons.sort(function(t,l){return t.value-l.value}))},addVideoEntry(){if(this.video_names.length==0){L("登録された動画がありません。");return}this.video_entries.push({point:0,levels:[]})},deleteVideoEntry(o){this.video_entries.splice(o,1)},onGroupChange(){this.video_entries=[]},destroy_product_last(o){R("削除してもいいですか？","","error").then(t=>{t&&H.Inertia.delete(route("admin.gacha.product_last.destroy",{id:o}))})},modalProductLastOpen(){this.product_last.name?(this.product_last.item_id?(this.form_last.use_item=!0,this.form_last.item_id=this.product_last.item_id,this.selectedItem=this.items.find(o=>o.id===this.product_last.item_id)||null,this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.url2=""):(this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null,this.form_last.last_name=this.product_last.name,this.form_last.last_point=this.product_last.point,this.form_last.last_rare=this.product_last.rare,this.form_last.last_image="",this.url2=this.product_last.image),this.form_last.is_update=1):(this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.form_last.is_update=0,this.url2="",this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null),this.form_last.is_last=1,this.form_last.last_marks=0,this.open=!0},modalProductOpen(o){o?(this.form_last.last_id=o.id,o.item_id?(this.form_last.use_item=!0,this.form_last.item_id=o.item_id,this.selectedItem=this.items.find(t=>t.id===o.item_id)||null,this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_image="",this.url2=""):(this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null,this.form_last.last_name=o.name,this.form_last.last_point=o.point,this.form_last.last_rare=o.rare,this.form_last.last_image="",this.url2=o.image),this.form_last.last_marks=parseFloat((o.marks*this.count_step).toFixed(7)),this.form_last.category_id=parseFloat((o.category_id*this.count_step).toFixed(7)),this.form_last.last_order=o.order,this.form_last.is_update=1,this.form_last.rank=o.rank,this.form_last.delivery_only=o.lost_type%2==1,this.form_last.black_case=Math.floor(o.lost_type/2)==1):(this.form_last.last_id="",this.form_last.last_name="",this.form_last.last_point="",this.form_last.last_rare="",this.form_last.last_marks=0,this.form_last.last_order=0,this.form_last.last_image="",this.form_last.is_update=0,this.url2="",this.form_last.rank=0,this.form_last.category_id=0,this.form_last.delivery_only=!1,this.form_last.black_case=!1,this.form_last.use_item=!1,this.form_last.item_id=null,this.selectedItem=null),this.form_last.is_last=0,this.open=!0},closeModal(){this.open=!1},getItemTypeText(o){return{gacha_ticket:"ガチャチケット",point_lottery:"ポイント抽選",rank_double:"ランクアップ2倍",point_discount:"ポイント購入割引",daily_reset:"日次リセット",hidden_gacha_key:"隠しガチャ鍵",chip_card:"チップカード",purchase_discount:"購入割引チケット"}[o]||o},itemLabel(o){return o?`${o.name} (${this.getItemTypeText(o.type)})`:""},onItemSelected(o){o?this.form_last.item_id=o.id:this.form_last.item_id=null},addRequiredItem(){if(!this.selectedItemToAdd||this.selectedItemQuantity<1)return;const o=this.selectedItemToAdd;if(!o||!o.id)return;this.form.required_items||(this.form.required_items=[]);let t=this.form.required_items;if(typeof t=="string")try{t=JSON.parse(t)}catch{t=[]}Array.isArray(t)||(t=[]),this.form.required_items=t;const l=this.form.required_items.findIndex(r=>Number(r.item_id)==Number(o.id));l>=0?this.form.required_items[l].quantity=Number(this.form.required_items[l].quantity)+this.selectedItemQuantity:this.form.required_items.push({item_id:Number(o.id),quantity:Number(this.selectedItemQuantity)}),this.selectedItemToAdd=null,this.selectedItemQuantity=1},removeRequiredItem(o){const t=this.displayRequiredItems[o];if(!t)return;let l=this.form.required_items;if(typeof l=="string")try{l=JSON.parse(l)}catch{l=[]}Array.isArray(l)||(l=[]);const r=l.findIndex(d=>Number(d.item_id)===Number(t.item_id));r>=0&&(l.splice(r,1),this.form.required_items=l)},updateRequiredItemQuantity(o,t){const l=this.displayRequiredItems[o];if(!l)return;let r=this.form.required_items;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}Array.isArray(r)||(r=[]);const d=r.findIndex(n=>Number(n.item_id)===Number(l.item_id));d>=0&&(r[d].quantity=Number(t)||1,this.form.required_items=r)},submit_last(){if(this.form_last.is_last==1)this.$refs.photo2.files[0]&&(this.form_last.last_image=this.$refs.photo2.files[0]),this.form_last.post(route("admin.gacha.product_last.create"),{preserveScroll:!0,onFinish:()=>{}});else{if(this.form_last.use_item&&this.form_last.item_id){this.form_last.post(route("admin.gacha.product.create"),{preserveScroll:!0,onFinish:()=>{this.open=!1}});return}if(this.$refs.photo2.files[0]&&(this.form_last.last_image=this.$refs.photo2.files[0]),this.form_last.last_order>0&&this.form_last.last_marks!=1){L("排出順序は点数の値が1の場合にのみ設定できます。");return}if(this.form_last.last_order>0&&this.form_last.last_order<=this.gacha.count){L("このガチャはすでに "+this.gacha.count+" 回回されています。 "+this.gacha.count+" 以上を設定する必要があります。");return}if(this.form_last.last_order>0&&this.products.data.find(t=>t.order==this.form_last.last_order&&t.id!=this.form_last.last_id)){L("この排出順序はすでに使用しました。");return}let o=V.useForm(this.form_last.data());o.last_marks/=this.count_step,o.category_id/=this.count_step,o.post(route("admin.gacha.product.create"),{onFinish:()=>{},preserveScroll:!0})}},submit(){let o=this.form.count_card-this.gacha.count;var t=0;let l;for(l=0;l<this.form.lostProducts.length;l++)this.form.lostProducts[l].key&&(t=t+this.form.lostProducts[l].count);let r=0;for(l=0;l<this.products.data.length;l++)(this.form.lost_product_type!="1"||this.products.data[l].order==0)&&(r=r+Math.max(0,this.products.data[l].marks)*this.count_step);this.form.lost_product_type=="1"&&(this.form.count_card=0);let d=t+r;d=parseFloat(d.toFixed(7));let n="",C=!1;if(this.form.lost_product_type=="1")n=d==100?"カード排出率の合計が正確です。":`カード排出率の合計は100％でなければなりません。現在${d}%です。`,this.form.spin_limit=0,C=d==100;else{let w=0;this.form.lostProducts.forEach(x=>{w+=x.point*x.count/this.count_step}),this.products.data.forEach(x=>{x.marks>0&&(w+=x.point*x.marks/this.count_step)}),this.product_last.name&&(w+=this.product_last.point/this.count_step),n="残り口数 "+o.toLocaleString(),n+="<br/>合計枚数 = 当たりカードの残り数 "+r.toLocaleString()+" + カード指定の残り数 "+t.toLocaleString(),n+="<br/><br/>保存しますか？",n+="<br/><br/>現在の還元率は "+this.point_rate+"% です。",n+="<br/>"+this.form.point.toLocaleString()+" × "+o.toLocaleString()+" = "+(this.form.point*o).toLocaleString(),n+="<br/>(100 - "+this.point_rate+"%) × "+(this.form.point*o).toLocaleString()+" = "+(this.form.point*o-w).toLocaleString()+"ptの "+(this.point_rate<100?"利益":"損失"),C=d==o}R("",n,C?"success":"warning").then(w=>{w&&(this.$refs.photo&&(this.form.image=this.$refs.photo.files[0]),this.$refs.photo1&&(this.form.thumbnail=this.$refs.photo1.files[0]),this.limit_type==0?(this.form.rank_limit=this.rank_selection.map(_=>_.rank).reduce((_,I)=>_|1<<I,0),this.ranks.forEach(_=>{this.form.rank_limit^=1<<_.rank})):this.form.rank_limit=this.limit_type,this.form.plan_limit=this.plan_selection.map(_=>_.id).reduce((_,I)=>_|1<<I,0),this.form.buttons=this.buttons.map(_=>_.value).join(","),this.form.required_items&&Array.isArray(this.form.required_items)?this.form.required_items=JSON.stringify(this.form.required_items.map(_=>({item_id:Number(_.item_id),quantity:Number(_.quantity)||1}))):this.form.required_items=null,this.form.videos=[],this.video_entries.forEach(_=>{_.levels.forEach(I=>{this.form.videos.push({group:this.selected_group,level:I.value,point:_.point||0})})}),V.useForm({...this.form.data(),dp_gacha:this.form.dp_gacha?1:0,show_count:this.form.show_count?1:0,lostProducts:this.form.lostProducts.map(_=>({..._,count:_.count/this.count_step}))}).post(route("admin.gacha.update"),{preserveScroll:!0}))})},previewImage(o){const t=o.target.files[0];this.url=URL.createObjectURL(t)},previewImage1(o){const t=o.target.files[0];this.url1=URL.createObjectURL(t)},previewImage2(o){const t=o.target.files[0];this.url2=URL.createObjectURL(t)},toPublic(o){this.form_to_public.to_status=o,this.form_to_public.post(route("admin.gacha.to_public"),{onFinish:()=>{},preserveScroll:!0})},addLostProduct(){let o=0,t;for(t=0;t<this.form.lostProducts.length;t++)o<this.form.lostProducts[t].key&&(o=this.form.lostProducts[t].key);o=o+1,this.form.lostProducts.push({id:0,point:0,count:0,key:o})},deleteLostProduct(o){let t;for(t=0;t<this.form.lostProducts.length;t++)if(o==this.form.lostProducts[t].key){this.form.lostProducts[t].key=0;break}},copyLink(o){navigator.clipboard.writeText(o).then(()=>{W("URLをコピーしました。",{autoClose:2e3})})},onCsvFileChange(o){this.csvFile=o.target.files[0]},onImageFilesChange(o){this.imageFiles=Array.from(o.target.files)},removeImageFile(o){this.imageFiles.splice(o,1)},submitCsv(){if(!this.csvFile){L("CSVファイルを選択してください");return}this.csvUploading=!0;const o=new FormData;o.append("csv",this.csvFile),o.append("gacha_id",this.gacha.id),this.imageFiles.forEach((t,l)=>{o.append(`images[${l}]`,t)});try{V.useForm({csv:this.csvFile,gacha_id:this.gacha.id,images:this.imageFiles}).post(route("admin.gacha.upload_csv"),{preserveScroll:!0,onFinish:()=>{this.csvUploading=!1,this.csvDialogOpen=!1,this.csvFile=null,this.imageFiles=[]}})}catch{L("アップロードに失敗しました"),this.csvUploading=!1}}},setup(o){const t=V.useForm({id:o.gacha.id,title:o.gacha.title,point:o.gacha.point,consume_point:o.gacha.consume_point,count_card:o.gacha.count_card,count:o.gacha.count,lost_product_type:o.gacha.lost_product_type,thumbnail:"",image:"",category_id:o.category_share.cat_id,lostProducts:[],spin_limit:o.gacha.spin_limit,daily_limit:o.gacha.gacha_limit_on_setting,button_limit:o.gacha.gacha_limit_status,ids:[],videos:o.videos,start_time:o.gacha.start_time,end_time:o.gacha.end_time,rank_limit:o.gacha.rank_limit,plan_limit:o.gacha.plan_limit,publish_at:o.gacha.publish_at,unpublish_at:o.gacha.unpublish_at,buttons:o.gacha.buttons,dp_gacha:o.gacha.dp_gacha==1,show_count:o.gacha.show_count!==void 0?o.gacha.show_count==1:!0,required_items:(o.currentRequiredItems||[]).map(C=>({item_id:Number(C.item_id),quantity:Number(C.quantity)||1}))});let l={last_id:"",last_name:"",last_point:"",last_rare:"",last_marks:"",last_image:"",last_order:"",is_last:0,gacha_id:o.gacha.id,is_update:0,rank:0,category_id:0,delivery_only:!1,black_case:!1,use_item:!1,item_id:null};const r=V.useForm(l),d=V.useForm({gacha_id:o.gacha.id,to_status:1}),n=V.useForm({gacha_id:o.gacha.id,to_status:1});return{form:t,form_last:r,form_to_public:d,form_to_limit:n}},mounted(){this.url=this.gacha.image,this.url1=this.gacha.thumbnail,this.form.lostProducts=[];let o;for(o=0;o<this.productsLostSetting.length;o++){let t=this.productsLostSetting[o];this.form.lostProducts.push({id:t.id,count:parseFloat((t.count*this.count_step).toFixed(7)),point:t.point,key:t.id})}if(this.limit_type=this.gacha.rank_limit<0?this.gacha.rank_limit:0,this.ranks.forEach(t=>{(this.gacha.rank_limit<0||!(this.gacha.rank_limit&1<<t.rank))&&this.rank_selection.push(t)}),this.plans.forEach(t=>{this.gacha.plan_limit&1<<t.id&&this.plan_selection.push(t)}),this.buttons=this.gacha.buttons?this.gacha.buttons.split(",").map(t=>({label:t+(t>1?"連":"回"),value:t})):[],this.form.videos.length>0){this.selected_group=this.form.videos[0].group;const t={};this.form.videos.forEach(l=>{l.group===this.selected_group&&(t[l.point]||(t[l.point]=[]),t[l.point].push(l.level))}),this.video_entries=Object.keys(t).map(l=>({point:parseFloat(l),levels:t[l].map(r=>({label:r,value:r}))}))}else this.video_names.length>0&&(this.selected_group=this.video_names[0].group)},computed:{count_step(){return this.form.lost_product_type=="1"?.01:1},availableVideoLevels(){if(!this.selected_group||!this.video_names)return[];const o=this.video_names.find(t=>t.group===this.selected_group);return!o||!o.levels?[]:o.levels.map(t=>({label:t,value:t}))},availableItemsForSelection(){if(!this.gachaTicketItems||!Array.isArray(this.gachaTicketItems))return[];const o=this.form.required_items||[];let t=o;if(typeof o=="string")try{t=JSON.parse(o)}catch{t=[]}if(!Array.isArray(t))return this.gachaTicketItems;const l=t.map(r=>Number(r.item_id));return this.gachaTicketItems.filter(r=>!l.includes(Number(r.id)))},displayRequiredItems(){if(!this.form.required_items)return[];let o=this.form.required_items;if(typeof o=="string")try{o=JSON.parse(o)}catch{return[]}return Array.isArray(o)?!this.gachaTicketItems||!Array.isArray(this.gachaTicketItems)?o.map(t=>({item_id:Number(t.item_id),quantity:Number(t.quantity)||1,name:"読み込み中...",image:null})):o.map(t=>{const l=this.gachaTicketItems.find(r=>Number(r.id)===Number(t.item_id));return{item_id:Number(t.item_id),quantity:Number(t.quantity)||1,name:l?l.name:"不明なアイテム",image:l?l.image:null}}):[]},sortedProducts(){let o=this.products.data;return this.sorting=="point_up"&&o.sort((t,l)=>t.point-l.point),this.sorting=="point_down"&&o.sort((t,l)=>l.point-t.point),this.sorting=="count_up"&&o.sort((t,l)=>t.marks-l.marks),this.sorting=="count_down"&&o.sort((t,l)=>l.marks-t.marks),o},point_rate(){let o=this.form.point*(this.form.count_card-this.gacha.count);this.form.lost_product_type=="1"&&(o=this.form.point*1e4);let t=0;return this.form.lostProducts.forEach(l=>{t+=l.point*l.count/this.count_step}),this.products.data.forEach(l=>{l.marks>0&&(t+=l.point*l.marks/this.count_step)}),this.product_last.name&&(t+=this.product_last.point/this.count_step),(t*100/o).toFixed(2)}},watch:{selectedItem(o){o?this.form_last.item_id=o.id:this.form_last.item_id=null}}},st={class:"pt-6 md:px-6 px-4"},ot={class:"flex flex-wrap justify-between mb-4 gap-2"},lt={class:"text-right"},rt=["disabled"],it=["disabled"],at={key:0,class:"mb-4 flex flex-wrap gap-2 items-center justify-between"},nt={class:"font-medium text-sm text-neutral-700 flex items-center gap-2"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ut={class:"w-full flex flex-wrap gap-3 items-center"},mt={class:"w-full flex flex-wrap gap-3 items-center"},ct={class:"mb-4"},ft={key:0,class:"text-red-500 text-sm mt-1"},_t={class:"mb-4 flex items-center gap-2"},bt={key:0,class:"text-red-500 text-sm mt-1"},pt={class:"mb-4 flex items-center gap-2"},ht={key:0,class:"text-red-500 text-sm mt-1"},gt={class:"mb-4 border p-4 rounded-lg bg-gray-50"},yt={key:0,class:"mb-3 space-y-2"},xt=["src"],vt={class:"flex-1 min-w-32"},kt={class:"font-medium"},wt={class:"flex items-center gap-2"},It=["onUpdate:modelValue","onInput"],Vt=["onClick"],Ct={class:"space-y-2"},Ut={class:"flex items-center gap-2 flex-wrap"},Ft={class:"flex-1 min-w-48"},Lt={class:"flex items-center gap-3 py-2"},qt=["src","alt"],Pt={key:1,class:"w-12 h-12 -my-2 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},jt={key:2,class:"flex-1"},Tt={class:"font-medium text-sm text-gray-900"},St={class:"text-xs text-gray-500"},Ot={key:0,class:"flex items-center gap-3"},At=["src","alt"],Nt={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Rt={class:"font-medium text-sm"},Mt=["disabled"],Dt={key:1,class:"text-xs text-gray-500 mt-2"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ht={for:"point",class:"block font-medium text-sm text-neutral-700 mb-1"},Qt={key:0,class:"text-red-500 text-sm mt-1"},Jt={key:0,class:"text-red-500 text-sm mt-1"},Bt={class:"mb-4"},Gt={key:1,class:"mb-4"},zt={key:0,class:"text-red-500 text-sm mt-1"},Xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Yt={key:0,class:"text-red-500 text-sm mt-1"},Kt={key:0,class:"text-red-500 text-sm mt-1"},Wt={key:0,class:"text-red-500 text-sm mt-1"},Zt={class:"mb-4"},$t={class:"mb-4"},te={key:2,class:"mb-4"},ee={class:"mb-4"},se={class:"mb-4"},oe={class:"w-full flex flex-wrap gap-3 items-center"},le={class:"mb-4"},re={class:"w-full flex flex-wrap gap-3 items-center"},ie={class:"mb-4"},ae={key:0,class:"w-full flex flex-row items-center mb-3"},ne={class:"flex-1 flex items-center"},de={class:"flex-1 inline-block pr-1"},ue=["onUpdate:modelValue"],me={class:"flex-1 inline-block pr-1"},ce=["onUpdate:modelValue","step"],fe={class:"px-2"},_e={class:"w-10 shrink h-10"},be=["onClick"],pe={class:"text-center pt-2"},he={class:"mb-4"},ge={class:"text-center w-full"},ye=["src"],xe={key:0,class:"text-red-500 text-sm mt-1"},ve={class:"mb-8"},ke={class:"text-center w-full"},we=["src"],Ie={key:0,class:"text-red-500 text-sm mt-1"},Ve={class:"mb-8"},Ce={class:"flex items-center gap-3 mb-3"},Ue=["value"],Fe={class:"flex items-center gap-2 flex-wrap"},Le=["onUpdate:modelValue"],qe={class:"flex-1 min-w-48"},Pe=["onClick"],je={class:"text-center pt-2"},Te={class:"mb-8 text-center flex gap-2 justify-center sticky bottom-5"},Se={class:"mb-6 py-2 border-neutral-200 border-b flex flex-wrap justify-center items-center gap-2"},Oe={key:0,class:"flex-1 flex border-neutral-200 items-center"},Ae=["src"],Ne={class:"flex flex-col justify-evenly text-sm py-1 px-2"},Re={class:"text-red-500"},Me={class:"flex-1 flex flex-wrap gap-2 justify-center"},De={class:"flex flex-wrap justify-between mb-4 gap-2"},Ee={class:"flex justify-between items-center mb-2 gap-2"},He={class:"flex items-center gap-2"},Qe={value:"count_up"},Je={value:"count_down"},Be={class:"mb-2 pb-2 border-neutral-200 border-b flex items-center justify-between flex-wrap"},Ge={class:"flex border-neutral-200 items-center gap-1"},ze=["src"],Xe={class:"flex-1 inline-block text-sm py-1 px-2"},Ye={key:0},Ke={key:0,class:"text-red-500"},We={key:0,class:"space-x-3"},Ze={key:0},$e={key:1},ts={class:"text-center flex flex-wrap gap-2"},es=["onClick"],ss=["onClick"],os={class:"flex justify-between text-center my-6 items-center gap-4"},ls={class:"fixed inset-0 z-10 overflow-y-auto"},rs={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},is={class:"mb-4"},as={class:"flex gap-4"},ns={class:"flex items-center gap-2 cursor-pointer"},ds={class:"flex items-center gap-2 cursor-pointer"},us={key:0},ms={class:"mb-4"},cs={class:"flex items-center gap-3 py-2"},fs=["src","alt"],_s={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},bs={key:2,class:"flex-1"},ps={class:"font-medium text-sm text-gray-900"},hs={class:"text-xs text-gray-500"},gs={key:0,class:"flex items-center gap-3"},ys=["src","alt"],xs={key:1,class:"w-8 h-8 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},vs={class:"font-medium text-sm"},ks={class:"text-red-500 text-sm mt-1"},ws={key:0,class:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50"},Is={class:"flex items-center gap-4"},Vs={class:"flex-shrink-0"},Cs=["src","alt"],Us={key:1,class:"w-24 h-24 flex items-center justify-center border border-gray-300 rounded-lg bg-white text-gray-400 text-xs"},Fs={class:"flex-1"},Ls={class:"font-semibold text-base text-gray-900 mb-1"},qs={class:"text-sm text-gray-600 mb-2"},Ps={key:0,class:"text-sm text-gray-500"},js={key:1,class:"mb-4"},Ts={key:2,class:"mb-4"},Ss={for:"text1-4_item",class:"block font-medium text-sm text-neutral-700 mb-1"},Os=["step"],As={class:"text-red-500 text-sm mt-1"},Ns={key:3,class:"mb-4"},Rs={for:"text1-4_item2",class:"block font-medium text-sm text-neutral-700 mb-1"},Ms=["step"],Ds={class:"text-red-500 text-sm mt-1"},Es={key:4,class:"mb-4"},Hs=["disabled"],Qs={class:"text-red-500 text-sm mt-1"},Js={class:"mb-4"},Bs={class:"text-red-500 text-sm mt-1"},Gs={class:"mb-4"},zs={class:"text-red-500 text-sm mt-1"},Xs={class:"mb-4 flex items-center gap-2"},Ys={class:"mb-4 flex items-center gap-2"},Ks={class:"mb-4"},Ws=["value"],Zs={key:0,class:"mb-4"},$s={key:1,class:"mb-4"},to={for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},eo=["step"],so={class:"text-red-500 text-sm mt-1"},oo={key:2,class:"mb-4"},lo={for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},ro=["step"],io={class:"text-red-500 text-sm mt-1"},ao={key:3,class:"mb-4"},no=["disabled"],uo={class:"text-red-500 text-sm mt-1"},mo={key:4,class:"mb-4"},co={class:"text-center w-full"},fo=["src"],_o={class:"text-red-500 text-sm mt-1"},bo={class:"mb-6 text-center"},po={class:"fixed inset-0 z-40 overflow-y-auto"},ho={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},go={class:"mb-4"},yo={class:"mb-4"},xo={key:0,class:"mt-2"},vo={class:"mt-1 text-sm text-gray-500"},ko=["onClick"],wo={class:"flex gap-2 justify-end"},Io=["disabled"],Vo={key:0},Co={key:1};function Uo(o,t,l,r,d,n){const C=v("Head"),w=v("Link"),x=v("VueDatePicker"),_=v("multiselect"),I=v("XMarkIcon"),q=v("TransitionChild"),T=v("DialogPanel"),S=v("Dialog"),O=v("TransitionRoot"),M=v("DialogTitle"),D=v("AppLayout");return a(),i(k,null,[f(C,{title:"ガチャ 編集"}),f(D,{closeModal:n.closeModal},{default:p(()=>[e("div",st,[e("div",ot,[e("div",lt,[l.gacha.status==1?(a(),i("button",{key:0,type:"button",onClick:t[0]||(t[0]=s=>n.toPublic(0)),class:A([{"opacity-25":r.form_to_public.processing},"inline w-44 py-2.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150"]),disabled:r.form_to_public.processing}," 非公開にする ",10,rt)):(a(),i("button",{key:1,type:"button",onClick:t[1]||(t[1]=s=>n.toPublic(1)),class:A([{"opacity-25":r.form_to_public.processing},"inline w-44 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"]),disabled:r.form_to_public.processing}," 公開にする ",10,it))])]),e("form",{onSubmit:t[30]||(t[30]=j(s=>n.submit(),["prevent"]))},[r.form.rank_limit==-1?(a(),i("div",at,[e("span",nt,[t[62]||(t[62]=b(" 専用URL: ",-1)),f(w,{href:o.route("user.gacha",{id:l.gacha.id,code:l.gacha.description}),class:"text-blue-500 hover:text-blue-700"},{default:p(()=>[b(u(o.route("user.gacha",{id:l.gacha.id,code:l.gacha.description})),1)]),_:1},8,["href"])]),e("button",{type:"button",onClick:t[2]||(t[2]=s=>n.copyLink(o.route("user.gacha",{id:l.gacha.id,code:l.gacha.description}))),class:"px-3 py-1 rounded-full border text-sm"},"URLをコピー")])):m("",!0),e("div",dt,[e("div",null,[t[63]||(t[63]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"公開時刻",-1)),e("div",ut,[f(x,{modelValue:r.form.publish_at,"onUpdate:modelValue":t[3]||(t[3]=s=>r.form.publish_at=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",null,[t[64]||(t[64]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"非公開時刻",-1)),e("div",mt,[f(x,{modelValue:r.form.unpublish_at,"onUpdate:modelValue":t[4]||(t[4]=s=>r.form.unpublish_at=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])])]),e("div",ct,[t[65]||(t[65]=e("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},"タイトル",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.form.title=s),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.title]]),l.errors.title?(a(),i("div",ft,u(l.errors.title),1)):m("",!0)]),e("div",_t,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>r.form.dp_gacha=s),id:"dp_gacha",class:"w-4 h-4 focus:ring-0 text-neutral-600 cursor-pointer"},null,512),[[P,r.form.dp_gacha]]),t[66]||(t[66]=e("label",{for:"dp_gacha",class:"block font-medium text-sm text-neutral-700 cursor-pointer"},"EPガチャ",-1)),l.errors.dp_gacha?(a(),i("div",bt,u(l.errors.dp_gacha),1)):m("",!0)]),e("div",pt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>r.form.show_count=s),id:"show_count",class:"w-4 h-4 focus:ring-0 text-neutral-600 cursor-pointer"},null,512),[[P,r.form.show_count]]),t[67]||(t[67]=e("label",{for:"show_count",class:"block font-medium text-sm text-neutral-700 cursor-pointer"},"残り口数を表示",-1)),l.errors.show_count?(a(),i("div",ht,u(l.errors.show_count),1)):m("",!0)]),e("div",gt,[t[71]||(t[71]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2"}," 必要なアイテム（ガチャチケット） ",-1)),t[72]||(t[72]=e("p",{class:"text-xs text-gray-600 mb-3"}," 複数のアイテムを設定できます。各アイテムの必要数量を指定してください。設定しない場合はポイント消費になります。 ",-1)),n.displayRequiredItems&&n.displayRequiredItems.length>0?(a(),i("div",yt,[(a(!0),i(k,null,U(n.displayRequiredItems,(s,y)=>(a(),i("div",{key:y,class:"p-3 bg-blue-50 border border-blue-200 rounded flex items-center gap-3 flex-wrap"},[s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 object-cover border border-gray-200 rounded"},null,8,xt)):m("",!0),e("div",vt,[e("span",kt,u(s.name),1)]),e("div",wt,[t[68]||(t[68]=e("label",{class:"text-sm whitespace-nowrap"},"数量:",-1)),c(e("input",{"onUpdate:modelValue":g=>s.quantity=g,type:"number",min:"1",class:"w-20 border-neutral-300 rounded-md shadow-sm text-sm",onInput:g=>n.updateRequiredItemQuantity(y,g.target.value)},null,40,It),[[h,s.quantity,void 0,{number:!0}]])]),e("button",{type:"button",onClick:g=>n.removeRequiredItem(y),class:"px-3 py-1 bg-red-500 hover:bg-red-700 text-white rounded text-sm whitespace-nowrap"}," 削除 ",8,Vt)]))),128))])):m("",!0),e("div",Ct,[e("div",Ut,[e("div",Ft,[f(_,{modelValue:d.selectedItemToAdd,"onUpdate:modelValue":t[8]||(t[8]=s=>d.selectedItemToAdd=s),options:n.availableItemsForSelection,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"アイテムを選択...","allow-empty":!0,noResult:"該当するアイテムが見つかりません","custom-label":n.itemLabel,class:"w-full"},{option:p(({option:s})=>[e("div",Lt,[s&&s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 -my-2 object-contain border border-gray-200 rounded",alt:s.name},null,8,qt)):(a(),i("span",Pt," 画像なし ")),s?(a(),i("div",jt,[e("div",Tt,u(s.name),1),e("div",St,u(n.getItemTypeText(s.type)),1)])):m("",!0)])]),singleLabel:p(({option:s})=>[s?(a(),i("div",Ot,[s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:s.name},null,8,At)):(a(),i("span",Nt," - ")),e("span",Rt,u(s.name),1)])):m("",!0)]),noResult:p(()=>[...t[69]||(t[69]=[e("div",{class:"text-center py-2 text-gray-500 text-sm"}," 該当するアイテムが見つかりません ",-1)])]),noOptions:p(()=>[...t[70]||(t[70]=[e("div",{class:"text-center py-2 text-gray-500 text-sm"}," 選択可能なアイテムがありません ",-1)])]),_:1},8,["modelValue","options","custom-label"])]),c(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>d.selectedItemQuantity=s),type:"number",min:"1",placeholder:"数量",class:"w-24 border-neutral-300 rounded-md shadow-sm"},null,512),[[h,d.selectedItemQuantity,void 0,{number:!0}]]),e("button",{type:"button",onClick:t[10]||(t[10]=(...s)=>n.addRequiredItem&&n.addRequiredItem(...s)),disabled:!d.selectedItemToAdd||d.selectedItemQuantity<1,class:"px-4 py-2 bg-green-500 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"}," 追加 ",8,Mt)])]),l.gachaTicketItems.length===0?(a(),i("div",Dt," ガチャチケットアイテムがありません。 ")):m("",!0)]),e("div",Et,[e("div",null,[e("label",Ht,[b("消費"+u(r.form.dp_gacha?"EP":"ポイント")+"（テキスト）",1),t[73]||(t[73]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.form.point=s),id:"point",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.point]]),l.errors.point?(a(),i("div",Qt,u(l.errors.point),1)):m("",!0)]),e("div",null,[t[74]||(t[74]=e("label",{for:"consume_point",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("ランクアップポイント（テキスト）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.form.consume_point=s),id:"consume_point",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.consume_point]]),l.errors.point?(a(),i("div",Jt,u(l.errors.point),1)):m("",!0)])]),e("div",Bt,[t[76]||(t[76]=e("label",{for:"type",class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},[b("種類 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.form.lost_product_type=s),id:"type",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[...t[75]||(t[75]=[e("option",{value:"0"},"限定カード",-1),e("option",{value:"1"},"無限ガチャ",-1)])],512),[[F,r.form.lost_product_type]])]),r.form.lost_product_type=="0"?(a(),i("div",Gt,[t[77]||(t[77]=e("label",{for:"text2",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("総カード数（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>r.form.count_card=s),id:"text2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.count_card]]),l.errors.count_card?(a(),i("div",zt,u(l.errors.count_card),1)):m("",!0)])):m("",!0),e("div",Xt,[e("div",null,[t[78]||(t[78]=e("label",{for:"daily_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b(" 1日上限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>r.form.daily_limit=s),id:"daily_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.daily_limit]]),l.errors.daily_limit?(a(),i("div",Yt,u(l.errors.daily_limit),1)):m("",!0)]),e("div",null,[t[79]||(t[79]=e("label",{for:"button_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b(" 1日ボタン上限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>r.form.button_limit=s),id:"button_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.button_limit]]),l.errors.button_limit?(a(),i("div",Kt,u(l.errors.button_limit),1)):m("",!0)]),e("div",null,[t[80]||(t[80]=e("label",{for:"spin_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("全期間制限 "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>r.form.spin_limit=s),id:"spin_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[h,r.form.spin_limit]]),l.errors.spin_limit?(a(),i("div",Wt,u(l.errors.spin_limit),1)):m("",!0)])]),e("div",Zt,[t[81]||(t[81]=e("label",{for:"count_card",class:"block font-medium text-sm text-neutral-700 mb-1"},"ガチャ試行回数",-1)),f(_,{modelValue:this.buttons,"onUpdate:modelValue":t[18]||(t[18]=s=>this.buttons=s),"tag-placeholder":"",placeholder:"",showNoOptions:!1,options:[],multiple:!0,taggable:!0,label:"label","track-by":"value",onTag:n.addTag},null,8,["modelValue","onTag"])]),e("div",$t,[t[83]||(t[83]=e("label",{for:"limit_type",class:"block font-medium text-sm text-neutral-700 mb-1"},"制限種類",-1)),c(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>d.limit_type=s),id:"limit_type",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[...t[82]||(t[82]=[e("option",{value:"0"},"ランク制限",-1),e("option",{value:"-1"},"シークレット",-1),e("option",{value:"-2"},"登録後24時間限定ガチャ",-1),e("option",{value:"-3"},"登録数1週間限定ガチャ",-1)])],512),[[F,d.limit_type]])]),d.limit_type==0?(a(),i("div",te,[t[84]||(t[84]=e("label",{for:"rank_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},"ランク制限",-1)),f(_,{modelValue:d.rank_selection,"onUpdate:modelValue":t[20]||(t[20]=s=>d.rank_selection=s),options:l.ranks,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"title","track-by":"title",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"入力してください"},null,8,["modelValue","options"])])):m("",!0),e("div",ee,[t[85]||(t[85]=e("label",{for:"plan_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},"サブスクリプション制限",-1)),f(_,{modelValue:d.plan_selection,"onUpdate:modelValue":t[21]||(t[21]=s=>d.plan_selection=s),options:l.plans,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"name","track-by":"name",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"入力してください"},null,8,["modelValue","options"])]),e("div",se,[t[86]||(t[86]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"開始時刻",-1)),e("div",oe,[f(x,{modelValue:r.form.start_time,"onUpdate:modelValue":t[22]||(t[22]=s=>r.form.start_time=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",le,[t[87]||(t[87]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"終了時刻",-1)),e("div",re,[f(x,{modelValue:r.form.end_time,"onUpdate:modelValue":t[23]||(t[23]=s=>r.form.end_time=s),format:"yyyy-MM-dd HH:mm",class:"flex-1"},null,8,["modelValue"])])]),e("div",ie,[t[89]||(t[89]=e("label",{for:"cards",class:"block font-medium text-sm text-neutral-700 mb-2 ml-1"},"ハズレカード登録（半角数字）",-1)),(a(!0),i(k,null,U(r.form.lostProducts,(s,y)=>(a(),i(k,null,[s.key?(a(),i("div",ae,[e("div",ne,[e("div",de,[c(e("input",{"onUpdate:modelValue":g=>s.point=g,type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"変換pt"},null,8,ue),[[h,s.point]])]),t[88]||(t[88]=e("span",{class:"pl-1 pr-3"},"PT : ",-1)),e("div",me,[c(e("input",{"onUpdate:modelValue":g=>s.count=g,type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"枚数",step:n.count_step},null,8,ce),[[h,s.count]])]),e("span",fe,u(n.count_step==1?"枚":"%"),1)]),e("div",_e,[e("button",{type:"button",onClick:g=>n.deleteLostProduct(s.key),class:"h-full w-10 text-center"},[f(I,{class:"h-5 w-5 inline-block"})],8,be)])])):m("",!0)],64))),256)),e("div",pe,[e("button",{type:"button",onClick:t[24]||(t[24]=s=>n.addLostProduct()),class:"inline-block items-center max-w-60 w-full mx-auto py-2.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 mr-2"}," カード追加 ")])]),e("div",he,[t[90]||(t[90]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("サムネイル "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ge,[d.url1?(a(),i("img",{key:0,src:d.url1,class:"inline-block mt-4 h-52"},null,8,ye)):m("",!0)]),e("input",{onChange:t[25]||(t[25]=(...s)=>n.previewImage1&&n.previewImage1(...s)),ref:"photo1",id:"file1",type:"file",class:"w-full"},null,544),l.errors.thumbnail?(a(),i("div",xe,u(l.errors.thumbnail),1)):m("",!0)]),e("div",ve,[t[91]||(t[91]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("詳細ページ画像 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ke,[d.url?(a(),i("img",{key:0,src:d.url,class:"inline-block mt-4 h-52"},null,8,we)):m("",!0)]),e("input",{onChange:t[26]||(t[26]=(...s)=>n.previewImage&&n.previewImage(...s)),ref:"photo",id:"file1",type:"file",class:"w-full"},null,544),l.errors.image?(a(),i("div",Ie,u(l.errors.image),1)):m("",!0)]),e("div",Ve,[t[94]||(t[94]=e("label",{for:"file1",class:"block font-medium text-sm text-neutral-700 mb-2"},[b("動画設定"),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ce,[t[92]||(t[92]=e("label",{for:"video_group",class:"font-medium text-sm text-neutral-700 whitespace-nowrap"},"グループ",-1)),c(e("select",{"onUpdate:modelValue":t[27]||(t[27]=s=>d.selected_group=s),onChange:t[28]||(t[28]=(...s)=>n.onGroupChange&&n.onGroupChange(...s)),id:"video_group",class:"flex-1 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300 max-w-64"},[(a(!0),i(k,null,U(l.video_names,(s,y)=>(a(),i("option",{value:s.group},u(s.group),9,Ue))),256))],544),[[F,d.selected_group]])]),(a(!0),i(k,null,U(d.video_entries,(s,y)=>(a(),i("div",{key:y,class:"mb-2 rounded-md"},[e("div",Fe,[c(e("input",{type:"number",class:"h-9 w-24 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300","onUpdate:modelValue":g=>s.point=g,placeholder:"pt"},null,8,Le),[[h,s.point]]),t[93]||(t[93]=e("span",{class:"text-sm text-neutral-600 whitespace-nowrap"},"以上 =",-1)),e("div",qe,[f(_,{modelValue:s.levels,"onUpdate:modelValue":g=>s.levels=g,options:n.availableVideoLevels,multiple:!0,"close-on-select":!1,"clear-on-select":!1,label:"label","track-by":"value",searchable:!1,language:"JP",taggable:!0,selectedLabel:"選択済み",deselectLabel:"",selectLabel:"",placeholder:"動画レベルを選択"},null,8,["modelValue","onUpdate:modelValue","options"])]),e("button",{type:"button",onClick:g=>n.deleteVideoEntry(y),class:"h-9 w-9 shrink-0 text-center hover:bg-neutral-100 rounded"},[f(I,{class:"h-5 w-5 inline-block"})],8,Pe)])]))),128)),e("div",je,[e("button",{type:"button",onClick:t[29]||(t[29]=s=>n.addVideoEntry()),class:"inline-block items-center px-8 py-2 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 mr-2"}," 追加 ")])]),e("div",Te,[t[96]||(t[96]=e("button",{type:"submit",class:"inline-block items-center flex-1 max-w-60 py-2 bg-green-500 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 保存 ",-1)),f(w,{href:o.route("admin.gacha",{cat_id:l.gacha.category_id}),as:"button",class:"inline-block items-center flex-1 max-w-60 py-2 bg-rose-500 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-rose-700 active:bg-rose-700 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150"},{default:p(()=>[...t[95]||(t[95]=[b(" 戻る ",-1)])]),_:1},8,["href"])])],32),r.form.lost_product_type=="0"?(a(),i(k,{key:0},[t[97]||(t[97]=e("h3",{class:"mb-2 font-bold"},"ラストワン賞 登録",-1)),t[98]||(t[98]=e("hr",null,null,-1)),e("div",Se,[l.product_last.id?(a(),i("div",Oe,[e("img",{src:l.product_last.image,class:"w-20 h-20 inline-block object-contain"},null,8,Ae),e("div",Ne,[e("div",null,u(l.product_last.name),1),e("div",null,u(l.product_last.rare),1),e("div",Re,u(l.product_last.point.toLocaleString())+"pt",1)])])):m("",!0),e("div",Me,[l.product_last.name?(a(),i("button",{key:0,type:"button",onClick:t[31]||(t[31]=s=>n.modalProductLastOpen()),class:"items-center flex-1 min-w-16 py-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 編集 ")):(a(),i("button",{key:1,type:"button",onClick:t[32]||(t[32]=s=>n.modalProductLastOpen()),class:"items-center flex-1 max-w-60 py-2 my-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 追加 ")),l.product_last.name?(a(),i("button",{key:2,onClick:t[33]||(t[33]=s=>n.destroy_product_last(l.product_last.id)),type:"button",class:"items-center flex-1 min-w-16 py-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," 削除 ")):m("",!0)])])],64)):m("",!0),e("div",De,[e("div",Ee,[t[99]||(t[99]=e("span",{class:"font-bold"},"当たりカード 登録",-1)),e("button",{type:"button",onClick:t[34]||(t[34]=s=>d.csvDialogOpen=!0),class:"inline-block px-4 py-2 bg-emerald-600 text-white text-xs rounded hover:bg-emerald-700 transition-colors"}," CSVで登録 ")]),e("div",He,[t[102]||(t[102]=e("label",{for:"sorting",class:"block font-medium text-sm text-neutral-700 text-nowrap"},"ソート",-1)),c(e("select",{"onUpdate:modelValue":t[35]||(t[35]=s=>d.sorting=s),id:"sorting",class:"text-sm w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},[t[100]||(t[100]=e("option",{value:"point_up"},"ポイント昇順",-1)),t[101]||(t[101]=e("option",{value:"point_down"},"ポイント降順",-1)),e("option",Qe,u(r.form.lost_product_type=="1"?"排出率昇順":"カード枚数昇順"),1),e("option",Je,u(r.form.lost_product_type=="1"?"排出率降順":"カード枚数降順"),1)],512),[[F,d.sorting]])])]),t[106]||(t[106]=e("hr",{class:"mb-2"},null,-1)),(a(!0),i(k,null,U(n.sortedProducts,(s,y)=>(a(),i("div",Be,[e("div",Ge,[e("img",{src:s.image,class:"w-20 h-20 inline-block object-contain"},null,8,ze),e("div",Xe,[e("div",null,"ID: "+u(s.id)+" "+u(s.rank?`(${s.rank}等)`:""),1),e("div",null,u(s.name),1),e("div",null,u(s.rare),1),e("div",null,[b(u(parseFloat((s.marks*n.count_step).toFixed(7)))+" ",1),s.order?(a(),i("span",Ye,"("+u(s.order)+"番)",1)):m("",!0),t[103]||(t[103]=b("  ",-1)),e("span",null,"(表示用: "+u(parseFloat((s.category_id*n.count_step).toFixed(7)))+")",1)]),s.rare!="アイテム"?(a(),i("div",Ke,[b(u(n.format_number(s.point))+"pt ",1),s.lost_type&&s.lost_type!=0?(a(),i("span",We,[t[104]||(t[104]=b(" ( ",-1)),s.lost_type%2==1?(a(),i("span",Ze,"発送専用")):m("",!0),Math.floor(s.lost_type/2)==1?(a(),i("span",$e,"黒ケース付き")):m("",!0),t[105]||(t[105]=b(" ) ",-1))])):m("",!0)])):m("",!0)])]),e("div",ts,[e("button",{type:"button",onClick:g=>n.modalProductOpen(s),class:"inline-block items-center flex-1 min-w-16 py-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"}," 編集 ",8,es),e("button",{type:"button",onClick:g=>n.destroy_product_last(s.id),class:"inline-block items-center flex-1 min-w-16 py-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," 削除 ",8,ss)])]))),256)),e("div",os,[e("span",null,"還元率: "+u(n.point_rate)+"%",1),e("button",{type:"button",onClick:t[36]||(t[36]=s=>n.modalProductOpen(0)),class:"inline-block items-center flex-1 max-w-48 py-2 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150"}," 追加 ")])]),e("template",null,[f(O,{as:"template",show:d.open},{default:p(()=>[f(S,{as:"div",class:"relative z-20",onClose:t[56]||(t[56]=s=>d.open=!1)},{default:p(()=>[f(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[...t[107]||(t[107]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",ls,[e("div",rs,[f(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[f(T,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:p(()=>[e("form",{onSubmit:t[55]||(t[55]=j(s=>n.submit_last(),["prevent"]))},[e("div",is,[t[110]||(t[110]=e("label",{class:"block font-medium text-sm text-neutral-700 mb-2"},"商品タイプ",-1)),e("div",as,[e("label",ns,[c(e("input",{type:"radio","onUpdate:modelValue":t[37]||(t[37]=s=>r.form_last.use_item=s),value:!1,class:"w-4 h-4"},null,512),[[N,r.form_last.use_item]]),t[108]||(t[108]=e("span",null,"商品を作成",-1))]),e("label",ds,[c(e("input",{type:"radio","onUpdate:modelValue":t[38]||(t[38]=s=>r.form_last.use_item=s),value:!0,class:"w-4 h-4"},null,512),[[N,r.form_last.use_item]]),t[109]||(t[109]=e("span",null,"アイテムを選択",-1))])])]),r.form_last.use_item?(a(),i("div",us,[e("div",ms,[t[111]||(t[111]=e("label",{for:"item_id",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("アイテム"),e("span",{class:"text-red-500"},"*")],-1)),f(_,{modelValue:d.selectedItem,"onUpdate:modelValue":t[39]||(t[39]=s=>d.selectedItem=s),options:l.items,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"選択してください","allow-empty":!0,noResult:"該当するアイテムが見つかりません",class:"w-full"},{option:p(({option:s})=>[e("div",cs,[s&&s.image?(a(),i("img",{key:0,src:s.image,class:"w-12 h-12 -my-2 object-contain border border-gray-200 rounded",alt:s.name},null,8,fs)):(a(),i("span",_s," 画像なし ")),s?(a(),i("div",bs,[e("div",ps,u(s.name),1),e("div",hs,u(n.getItemTypeText(s.type)),1)])):m("",!0)])]),singleLabel:p(({option:s})=>[s?(a(),i("div",gs,[s.image?(a(),i("img",{key:0,src:s.image,class:"w-8 h-8 object-contain border border-gray-200 rounded",alt:s.name},null,8,ys)):(a(),i("span",xs," - ")),e("span",vs,u(s.name),1)])):m("",!0)]),_:1},8,["modelValue","options"]),e("div",ks,u(l.errors.item_id),1)]),d.selectedItem?(a(),i("div",ws,[e("div",Is,[e("div",Vs,[d.selectedItem.image?(a(),i("img",{key:0,src:d.selectedItem.image,class:"w-24 h-24 object-contain border border-gray-300 rounded-lg bg-white p-2",alt:d.selectedItem.name},null,8,Cs)):(a(),i("div",Us," 画像なし "))]),e("div",Fs,[e("div",Ls,u(d.selectedItem.name),1),e("div",qs,u(n.getItemTypeText(d.selectedItem.type)),1),d.selectedItem.description?(a(),i("div",Ps,u(d.selectedItem.description),1)):m("",!0)])])])):m("",!0),r.form_last.is_last==0?(a(),i("div",js,[t[113]||(t[113]=e("label",{for:"rank_item",class:"block font-medium text-sm text-neutral-700 mb-1"},"カードランク",-1)),c(e("select",{"onUpdate:modelValue":t[40]||(t[40]=s=>r.form_last.rank=s),id:"rank_item",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[...t[112]||(t[112]=[e("option",{value:"0"},"その他",-1),e("option",{value:"1"},"1等",-1),e("option",{value:"2"},"2等",-1),e("option",{value:"3"},"3等",-1),e("option",{value:"4"},"4等",-1)])],512),[[F,r.form_last.rank]])])):m("",!0),r.form_last.is_last==0?(a(),i("div",Ts,[e("label",Ss,[b(u(r.form.lost_product_type=="1"?"排出率 (%)":"枚数")+"（半角数字）",1),t[114]||(t[114]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[41]||(t[41]=s=>r.form_last.last_marks=s),id:"text1-4_item",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,Os),[[h,r.form_last.last_marks]]),e("div",As,u(l.errors.last_marks),1)])):m("",!0),r.form_last.is_last==0?(a(),i("div",Ns,[e("label",Rs,[b(u(r.form.lost_product_type=="1"?"表示用の排出率 (%)":"表示用の在庫数")+"（半角数字）",1),t[115]||(t[115]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[42]||(t[42]=s=>r.form_last.category_id=s),id:"text1-4_item2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,Ms),[[h,r.form_last.category_id]]),e("div",Ds,u(l.errors.category_id),1)])):m("",!0),r.form_last.is_last==0&&r.form.lost_product_type!="1"?(a(),i("div",Es,[t[116]||(t[116]=e("label",{for:"text1-4_item3",class:"block font-medium text-sm text-neutral-700 mb-1"},"排出順序",-1)),c(e("input",{"onUpdate:modelValue":t[43]||(t[43]=s=>r.form_last.last_order=s),id:"text1-4_item3",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"排出設定がない場合は、0を入力してください。",required:"",disabled:l.auth.user.type!=1},null,8,Hs),[[h,r.form_last.last_order]]),e("div",Qs,u(l.errors.last_order),1)])):m("",!0)])):(a(),i(k,{key:1},[e("div",Js,[t[117]||(t[117]=e("label",{for:"text1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("名前"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[44]||(t[44]=s=>r.form_last.last_name=s),id:"text1-1",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",required:""},null,512),[[h,r.form_last.last_name]]),e("div",Bs,u(l.errors.last_name),1)]),e("div",Gs,[t[118]||(t[118]=e("label",{for:"text1-2",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("変換ポイント（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[45]||(t[45]=s=>r.form_last.last_point=s),id:"text1-2",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",required:""},null,512),[[h,r.form_last.last_point]]),e("div",zs,u(l.errors.last_point),1)]),e("div",Xs,[c(e("input",{id:"delivery_only","onUpdate:modelValue":t[46]||(t[46]=s=>r.form_last.delivery_only=s),type:"checkbox"},null,512),[[P,r.form_last.delivery_only]]),t[119]||(t[119]=e("label",{for:"delivery_only",class:"cursor-pointer text-sm py-1"}," 発送専用 ",-1))]),e("div",Ys,[c(e("input",{id:"black_case","onUpdate:modelValue":t[47]||(t[47]=s=>r.form_last.black_case=s),type:"checkbox"},null,512),[[P,r.form_last.black_case]]),t[120]||(t[120]=e("label",{for:"black_case",class:"cursor-pointer text-sm py-1"}," 黒ケース付き ",-1))]),e("div",Ks,[t[121]||(t[121]=e("label",{for:"last_rare",class:"block font-medium text-sm text-neutral-700 mb-1"},"種類",-1)),c(e("select",{"onUpdate:modelValue":t[48]||(t[48]=s=>r.form_last.last_rare=s),id:"last_rare",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(a(!0),i(k,null,U(l.lost_types,(s,y)=>(a(),i("option",{value:s},u(s),9,Ws))),256))],512),[[F,r.form_last.last_rare]])]),r.form_last.is_last==0?(a(),i("div",Zs,[t[123]||(t[123]=e("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},"カードランク",-1)),c(e("select",{"onUpdate:modelValue":t[49]||(t[49]=s=>r.form_last.rank=s),id:"rank",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm"},[...t[122]||(t[122]=[e("option",{value:"0"},"その他",-1),e("option",{value:"1"},"1等",-1),e("option",{value:"2"},"2等",-1),e("option",{value:"3"},"3等",-1),e("option",{value:"4"},"4等",-1)])],512),[[F,r.form_last.rank]])])):m("",!0),r.form_last.is_last==0?(a(),i("div",$s,[e("label",to,[b(u(r.form.lost_product_type=="1"?"排出率 (%)":"枚数")+"（半角数字）",1),t[124]||(t[124]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[50]||(t[50]=s=>r.form_last.last_marks=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,eo),[[h,r.form_last.last_marks]]),e("div",so,u(l.errors.last_marks),1)])):m("",!0),r.form_last.is_last==0?(a(),i("div",oo,[e("label",lo,[b(u(r.form.lost_product_type=="1"?"表示用の排出率 (%)":"表示用の在庫数")+"（半角数字）",1),t[125]||(t[125]=e("span",{class:"text-red-500"},"*",-1))]),c(e("input",{"onUpdate:modelValue":t[51]||(t[51]=s=>r.form_last.category_id=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください",step:n.count_step,required:""},null,8,ro),[[h,r.form_last.category_id]]),e("div",io,u(l.errors.last_marks),1)])):m("",!0),r.form_last.is_last==0&&r.form.lost_product_type!="1"?(a(),i("div",ao,[t[126]||(t[126]=e("label",{for:"text1-4",class:"block font-medium text-sm text-neutral-700 mb-1"},"排出順序",-1)),c(e("input",{"onUpdate:modelValue":t[52]||(t[52]=s=>r.form_last.last_order=s),id:"text1-4",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"排出設定がない場合は、0を入力してください。",required:"",disabled:l.auth.user.type!=1},null,8,no),[[h,r.form_last.last_order]]),e("div",uo,u(l.errors.last_order),1)])):m("",!0),r.form_last.use_item?m("",!0):(a(),i("div",mo,[t[127]||(t[127]=e("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[b("画像アップロード "),e("span",{class:"text-red-500"},"*")],-1)),e("div",co,[d.url2?(a(),i("img",{key:0,src:d.url2,class:"inline-block mt-4 h-24"},null,8,fo)):m("",!0)]),e("input",{onChange:t[53]||(t[53]=(...s)=>n.previewImage2&&n.previewImage2(...s)),ref:"photo2",id:"file1-1",type:"file",class:"w-full"},null,544),e("div",_o,u(l.errors.last_image),1)]))],64)),e("div",bo,[t[128]||(t[128]=e("button",{type:"submit",class:"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"}," 保存 ",-1)),e("button",{type:"button",onClick:t[54]||(t[54]=s=>d.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," キャンセル ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),e("template",null,[f(O,{as:"template",show:d.csvDialogOpen},{default:p(()=>[f(S,{as:"div",class:"relative z-30",onClose:t[61]||(t[61]=s=>d.csvDialogOpen=!1)},{default:p(()=>[f(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[...t[129]||(t[129]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",po,[e("div",ho,[f(q,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[f(T,{class:"p-4 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:p(()=>[f(M,{class:"text-lg font-bold mb-2"},{default:p(()=>[...t[130]||(t[130]=[b("CSVでカード登録",-1)])]),_:1}),t[135]||(t[135]=e("div",{class:"mb-4"},[e("a",{href:"/gacha_csv/product.csv",download:"",class:"text-blue-600 underline"},"CSVテンプレートをダウンロード")],-1)),e("form",{onSubmit:t[60]||(t[60]=j((...s)=>n.submitCsv&&n.submitCsv(...s),["prevent"]))},[e("div",go,[t[131]||(t[131]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSVファイル",-1)),e("input",{type:"file",accept:".csv",onChange:t[57]||(t[57]=(...s)=>n.onCsvFileChange&&n.onCsvFileChange(...s)),class:"w-full"},null,32)]),e("div",yo,[t[133]||(t[133]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"画像ファイル",-1)),e("input",{type:"file",multiple:"",accept:"image/*",onChange:t[58]||(t[58]=(...s)=>n.onImageFilesChange&&n.onImageFilesChange(...s)),class:"w-full"},null,32),t[134]||(t[134]=e("p",{class:"text-sm text-gray-500 mt-1"}," 画像ファイルは任意です。CSVに記載された画像名と一致するファイルを選択してください。",-1)),d.imageFiles.length>0?(a(),i("div",xo,[t[132]||(t[132]=e("p",{class:"text-sm font-medium text-gray-700"},"選択された画像:",-1)),e("ul",vo,[(a(!0),i(k,null,U(d.imageFiles,(s,y)=>(a(),i("li",{key:y,class:"flex items-center gap-2"},[e("span",null,u(s.name),1),e("button",{type:"button",onClick:g=>n.removeImageFile(y),class:"text-red-500 hover:text-red-700"},[f(I,{class:"h-4 w-4"})],8,ko)]))),128))])])):m("",!0)]),e("div",wo,[e("button",{type:"button",onClick:t[59]||(t[59]=s=>d.csvDialogOpen=!1),class:"px-4 py-2 bg-neutral-300 text-neutral-700 rounded hover:bg-neutral-400"},"キャンセル"),e("button",{type:"submit",disabled:d.csvUploading,class:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"},[d.csvUploading?(a(),i("span",Vo,"アップロード中...")):(a(),i("span",Co,"登録"))],8,Io)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1},8,["closeModal"])],64)}const Ro=$(et,[["render",Uo]]);export{Ro as default};
