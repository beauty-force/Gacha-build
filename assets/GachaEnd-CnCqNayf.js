import{d as h,r as c,c as s,o as n,a as r,w as u,b as t,i as g,Z as C,t as l,F as d,f as x,y as b,n as j,e as p}from"./app-D8qqHlea.js";import{A as L}from"./UserLayout-BrlhOyYO.js";import{G as N}from"./GachaButtons-DyPwRnDS.js";import{l as S}from"./index-DwEkfMsA.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-n4MunjC8.js";import"./PlayIcon-CaftTXV-.js";const B={components:{Head:h.Head,AppLayout:L,Link:h.Link,GachaButtons:N},props:{errors:Object,auth:Object,gacha:Object,offer_coupon_code:String,code:String},data(){return{showPointNotification:!1}},computed:{progress_value(){return Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%"},progress_background_width(){return this.gacha.count_rest==0?"100%":Math.round(this.gacha.count_card*100/this.gacha.count_rest)+"%"}},mounted(){this.offer_coupon_code&&(this.showPointNotification=!0)},methods:{copyCouponCode(){navigator.clipboard.writeText(this.offer_coupon_code).then(()=>{S("クーポンコードをコピーしました！",{autoClose:2e3})})},goToCouponPage(){window.location.href=route("user.coupon",{code:this.offer_coupon_code})},closeNotification(){this.showPointNotification=!1}}},E={class:"pt-6 md:px-6 px-4"},T={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},V={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 animate-bounce-in"},z={class:"text-center"},G={class:"flex items-center justify-center gap-2 mb-4"},H={class:"bg-gray-100 px-2 py-1 rounded"},A={class:"flex justify-center gap-4"},M={key:0,class:"mb-8 text-center"},O=["src"],F={key:0,class:"w-full max-w-md mx-auto mb-4"},q={class:"flex flex-wrap gap-2 justify-center"},D={class:"w-full max-w-md mx-auto flex flex-col justify-center flex-1 bg-neutral-600"},I={class:"text-white font-[mplus2]"},X={class:"flex justify-between items-center pt-2 w-full"},Z={class:"flex items-end gap-1.5 w-[45%] px-3"},J={key:0,class:"flex items-center justify-around gap-1.5 w-full"},K=["src"],Q={class:"text-white text-[10px] leading-3 bg-white/30 w-full text-center"},R={class:"text-white text-base md:text-xl font-bold"},U={class:"text-white text-base md:text-xl font-bold"},W={key:0,class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Y={key:0,class:"text-white text-sm pr-1"},$={key:1,class:"flex items-center"},tt={class:"w-full mb-2.5"},et={class:"w-full h-2.5 rounded-full overflow-hidden flex bg-neutral-800"},ot={class:"mb-12 text-center"};function st(f,e,o,nt,_,i){const w=c("Head"),y=c("GachaButtons"),m=c("Link"),v=c("AppLayout");return n(),s(d,null,[r(w,{title:"マイページ"}),r(v,null,{default:u(()=>[t("div",E,[e[16]||(e[16]=t("h1",{class:"mb-2 text-lg font-bold"},"ガチャ完了",-1)),e[17]||(e[17]=t("hr",{class:"mb-8"},null,-1)),r(C,{name:"fade"},{default:u(()=>[_.showPointNotification?(n(),s("div",T,[t("div",V,[t("div",z,[e[5]||(e[5]=t("img",{src:"/images/EVE-X3p0L.jpg",alt:"ポイントチャージ案内",class:"w-full mb-4"},null,-1)),e[6]||(e[6]=t("h3",{class:"text-base font-bold mb-2"},"所持ポイントが少なくなっています！",-1)),e[7]||(e[7]=t("p",{class:"mb-4 text-sm"},"次回のチャンスに備えてチャージしませんか？",-1)),t("div",G,[e[4]||(e[4]=t("span",{class:"font-bold"},"クーポンコード：",-1)),t("span",H,l(o.offer_coupon_code),1),t("button",{onClick:e[0]||(e[0]=(...a)=>i.copyCouponCode&&i.copyCouponCode(...a)),class:"bg-blue-500 text-white p-1.5 rounded hover:bg-blue-600 transition-colors duration-200"},[...e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])]),t("div",A,[t("button",{onClick:e[1]||(e[1]=(...a)=>i.goToCouponPage&&i.goToCouponPage(...a)),class:"bg-theme bg-theme-hover text-white px-6 py-2 rounded transition-colors duration-200"}," チャージする "),t("button",{onClick:e[2]||(e[2]=(...a)=>i.closeNotification&&i.closeNotification(...a)),class:"bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400 transition-colors duration-200"}," 閉じる ")])])])])):g("",!0)]),_:1}),o.gacha.ableCount>0?(n(),s("div",M,[e[13]||(e[13]=t("h3",{class:"text-base font-bold"},"もう一度ガチャる！",-1)),t("img",{src:o.gacha.thumbnail,class:"block w-full max-w-md mx-auto my-4"},null,8,O),o.gacha.tags&&o.gacha.tags.length>0?(n(),s("div",F,[t("div",q,[(n(!0),s(d,null,x(o.gacha.tags,a=>(n(),s("span",{key:a.id,class:"px-3 py-1 rounded-full text-sm font-medium text-white shadow-sm",style:b({backgroundColor:a.color_theme})},l(a.name),5))),128))])])):g("",!0),t("div",D,[t("div",I,[t("div",X,[t("div",Z,[o.gacha.items&&o.gacha.items.length>0?(n(),s("div",J,[(n(!0),s(d,null,x(o.gacha.items,(a,k)=>(n(),s("div",{key:k,class:"flex flex-col items-center gap-0.5 rounded-lg border-2 border-white/50 shadow-lg overflow-hidden"},[t("img",{src:a.image,class:"h-8 w-8 object-contain"},null,8,K),t("span",Q,"×"+l(a.quantity),1)]))),128))])):o.gacha.dp_gacha?(n(),s(d,{key:1},[t("span",R,l(o.gacha.point.toLocaleString()),1),e[8]||(e[8]=t("span",{class:"text-white pb-0.5 text-sm font-semibold"},"EP",-1)),e[9]||(e[9]=t("span",{class:"text-gray-300 text-xs pb-0.5 text-nowrap"},"/1回",-1))],64)):(n(),s(d,{key:2},[e[10]||(e[10]=t("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1)),t("span",U,l(o.gacha.point.toLocaleString()),1),e[11]||(e[11]=t("span",{class:"text-gray-300 text-xs pb-0.5 text-nowrap"},"/1回",-1))],64))]),o.gacha.count_rest?(n(),s("div",W,[o.gacha.count_card>0?(n(),s("span",Y," のこり "+l(o.gacha.count_rest.toLocaleString())+" / "+l(o.gacha.count_card.toLocaleString()),1)):(n(),s("div",$,[...e[12]||(e[12]=[t("span",{class:"font-semibold pr-2"},"- / -",-1)])])),t("div",tt,[t("div",et,[t("div",{class:j(["h-full rounded-full border-neutral-800",{"bg-gradient-to-r from-[#dd422d] via-[#fae94e] to-[#02ec0e]":o.gacha.count_card>0,"bg-[#02ec0e] w-full":o.gacha.count_card==0}]),style:b(o.gacha.count_card>0?{width:i.progress_value,backgroundSize:i.progress_background_width}:{})},null,6)])])])):g("",!0)])]),r(y,{gacha:{...o.gacha,code:o.code},class:"bg-neutral-600 px-2 py-2"},null,8,["gacha"])])])):g("",!0),t("div",ot,[r(m,{href:f.route("main"),class:"inline-block items-center px-4 py-2 m-1 bg-neutral-700 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-900 active:bg-neutral-900 focus:outline-none focus:border-neutral-900 focus:shadow-outline-neutral transition ease-in-out duration-150"},{default:u(()=>[...e[14]||(e[14]=[p(" ガチャ選択ページへ ",-1)])]),_:1},8,["href"]),r(m,{href:f.route("user.products"),class:"inline-block items-center px-4 py-2 m-1 bg-neutral-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150"},{default:u(()=>[...e[15]||(e[15]=[p(" 獲得した商品一覧へ ",-1)])]),_:1},8,["href"])])])]),_:1})],64)}const gt=P(B,[["render",st],["__scopeId","data-v-f939138b"]]);export{gt as default};
