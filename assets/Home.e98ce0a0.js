import{H as x,L as k,r as h,o as n,c as i,b as f,w as v,F as d,d as s,t as L,J as C,M as b,f as g,i as m,h as p}from"./app.11743934.js";import{A as B}from"./UserLayout.f0111103.js";import{G as z}from"./GachaCard.038d6297.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import"./useConfirm.79cb9933.js";import"./index.1467874d.js";import"./GachaButtons.f670c3f7.js";import"./PlayIcon.b573101f.js";const A={components:{Head:x,AppLayout:B,Link:k,GachaCard:z},props:{errors:Object,auth:Object,gachas:Object,category_share:Object,show_one_day_gacha:Number},data(){return{orderBy:"recommended",one_day_gachas:this.gachas.data.filter(o=>o.rank_limit==-2),other_gachas:this.gachas.data.filter(o=>o.rank_limit!=-2)}},computed:{sortedGachas(){let o=this.other_gachas;return o.sort((e,t)=>{if(e.status!==t.status)return e.status-t.status;switch(this.orderBy){case"recommended":return t.order_level-e.order_level;case"gauge_low":const u=e.count_rest/e.count_card,r=t.count_rest/t.count_card;return u-r;case"gauge_high":const c=e.count_rest/e.count_card;return t.count_rest/t.count_card-c;case"point_up":return e.point-t.point;case"point_down":return t.point-e.point;case"newest":return e.id-t.id;default:return t.order_level-e.order_level}}),o}},mounted(){this.initializeLazyLoading();const o=sessionStorage.getItem("eve-gacha-top-scroll");o!==null&&(setTimeout(()=>{window.scrollTo(0,parseFloat(o))},100),sessionStorage.removeItem("eve-gacha-top-scroll"))},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},initializeLazyLoading(){const o=document.querySelectorAll("img.lazy"),e={root:null,rootMargin:"0px",threshold:.1},t=r=>{r.src=r.dataset.src},u=new IntersectionObserver((r,c)=>{r.forEach(l=>{l.isIntersecting&&(t(l.target),c.unobserve(l.target))})},e);o.forEach(r=>{u.observe(r)})},orderChanged(){this.$nextTick(()=>{this.initializeLazyLoading()})}}},S={class:"flex px-2 pt-3 z-20 sticky top-28 -mb-12"},j=s("option",{value:"recommended"},"\xA0\xA0\u304A\u3059\u3059\u3081\u9806\xA0",-1),H=s("option",{value:"gauge_low"},"\xA0\xA0\u6B8B\u30B2\u30FC\u30B8\u304C\u5C11\u306A\u3044\u9806\xA0",-1),I=s("option",{value:"gauge_high"},"\xA0\xA0\u6B8B\u30B2\u30FC\u30B8\u304C\u591A\u3044\u9806\xA0",-1),O=s("option",{value:"point_up"},"\xA0\xA0\u30DD\u30A4\u30F3\u30C8\u304C\u4F4E\u3044\u9806\xA0",-1),D=s("option",{value:"point_down"},"\xA0\xA0\u30DD\u30A4\u30F3\u30C8\u304C\u9AD8\u3044\u9806\xA0",-1),N=s("option",{value:"newest"},"\xA0\xA0\u65B0\u7740\u9806\xA0",-1),V=[j,H,I,O,D,N],E={key:0,class:""},F={class:"bg-gradient-to-b from-yellow-100 to-yellow-400 p-4 shadow-lg"},M=s("h2",{class:"text-rose-500 text-lg font-bold mb-4 text-center flex items-center justify-center"}," \u{1F308} \u65B0\u898F\u767B\u9332\u8005\u9650\u5B9A\uFF01\u4ECA\u3060\u3051\u5F15\u3051\u308B\u8D85\u304A\u5F97\u306A\u30AA\u30EA\u30D1 \u{1F308} ",-1),T={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},q={class:"sm:px-4 px-4 mb-8 grid sm:grid-cols-2 grid-cols-1 gap-4 pt-4 pb-8"};function J(o,e,t,u,r,c){const l=h("Head"),_=h("GachaCard"),w=h("AppLayout");return n(),i(d,null,[f(l,null,{default:v(()=>[s("title",null,L(t.category_share.title)+"\u30AB\u30FC\u30C9\u30AC\u30C1\u30E3",1)]),_:1}),f(w,{is_home:!0},{default:v(()=>[s("div",S,[C(s("select",{class:"rounded-full py-2 border focus:ring-0 text-sm md:text-base","onUpdate:modelValue":e[0]||(e[0]=a=>r.orderBy=a),onChange:e[1]||(e[1]=(...a)=>c.orderChanged&&c.orderChanged(...a))},V,544),[[b,r.orderBy]])]),t.show_one_day_gacha&&r.one_day_gachas.length>0?(n(),i("div",E,[s("div",F,[M,s("div",T,[(n(!0),i(d,null,g(r.one_day_gachas,(a,y)=>(n(),m(_,{gacha:a},null,8,["gacha"]))),256))])])])):p("",!0),s("div",q,[(n(!0),i(d,null,g(c.sortedGachas,(a,y)=>(n(),i(d,null,[a.count_rest?(n(),m(_,{key:0,gacha:a},null,8,["gacha"])):p("",!0)],64))),256)),(n(!0),i(d,null,g(c.sortedGachas,(a,y)=>(n(),i(d,null,[a.count_rest?p("",!0):(n(),m(_,{key:0,gacha:a},null,8,["gacha"]))],64))),256))])]),_:1})],64)}const Z=G(A,[["render",J]]);export{Z as default};
