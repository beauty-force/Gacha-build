import{C as I,S as L,F as O,f as z,o as S,N,V as B,r as j,a as E,b as F,v as P,I as A,g as R,c as V,_ as X,d as H,T as q}from"./toastify.41e3799e.js";import{L as K,u as h,r as i,o as l,c as _,b as a,w as n,d as t,t as g,e as u,g as x,h as v,i as W}from"./app.cde0afa9.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";const J={components:{Category:I,Sidebar:L,Footer:O,TransitionRoot:z,TransitionChild:S,Dialog:N,DialogOverlay:B,XMarkIcon:j,ChevronLeftIcon:E,Bars3Icon:F,Link:K,Menu:P,MenuButton:A,MenuItems:R,MenuItem:V,Logo:X,PlusIcon:H},props:{closeModal:Function},data(){return{sidebarOpened:!1,isDialogMessage:!1,dialogMessage:"",dialogTitle:"",page_title:"",user:{},point_value:0,dp_value:0,point_link:route("user.point"),hide_cat_bar:"",gacha_button:{}}},mounted(){this.user=h().props.value.auth.user,this.user&&(this.point_value=this.user.point,this.dp_value=this.user.dp,this.user.type==1&&(this.point_link=route("test.user.point"))),this.gacha_button=h().props.value.gacha_button,this.hide_cat_bar=h().props.value.hide_cat_bar;const s=document.querySelectorAll("img.lazy"),o={root:null,rootMargin:"0px",threshold:.1},d=e=>{e.src=e.dataset.src,e.classList.remove("lazy")},b=new IntersectionObserver((e,y)=>{e.forEach(r=>{r.isIntersecting&&(d(r.target),y.unobserve(r.target))})},o);s.forEach(e=>{b.observe(e)})},computed:{flash(){return h().props.value.flash}},watch:{flash:function(s,o){s.type=="notification"&&this.notification(s.message),s.type=="dialog"&&(this.dialogMessage=s.message,this.dialogTitle=s.title,this.isDialogMessage=!0)}},methods:{format_number(s){return String(s).replace(/(.)(?=(\d{3})+$)/g,"$1,")},notification(s){s&&q({text:s,duration:3e4,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!1,className:"toastify-content newClass",onClick:function(){}}).showToast()},back(){window.history.back()}}},Q={class:"flex min-h-screen text-neutral-700 text-base underline-offset-2 font-medium bg-yellow-50/50"},U={class:"fixed h-full right-0 z-40"},Y={class:"flex flex-col relative h-full w-64 bg-gray-100 border-l border-neutral-200 ml-auto"},Z={class:"flex-1 overflow-y-auto"},$={class:"flex flex-col text-neutral-700 rounded relative z-20 top-20 w-fit min-w-64 px-4 bg-neutral-50 border-l border-neutral-200 m-auto max-w-full"},ee={class:"pt-3 pb-1 px-1 text-center font-bold"},te=["innerHTML"],se=t("hr",{class:"mt-3"},null,-1),oe={class:"w-full max-w-[760px] mx-auto flex flex-col bg-white shadow-[0px_0px_5px_0px_#fac239aa]"},ae={class:"flex-shrink-0 w-full max-w-[760px] sticky top-0 z-[15] bg-white"},ne={class:"flex justify-center"},ie={class:"md:w-[760px] w-full flex md:px-3 px-2 h-20 mx-auto justify-center border-x border-b border-neutral-200 gap-1 items-center z-10"},le={class:"flex items-center flex-1"},re={key:0,class:"flex-shrink-0 flex items-center gap-1 h-8 md:h-9 text-white text-sm"},ce={class:"flex items-center h-full"},ue=t("img",{src:"/images/icon_cash.png",class:"md:h-6 h-5"},null,-1),de=t("span",{class:"border-l m-2 h-4"},null,-1),fe={class:"flex items-center justify-center min-w-12 md:min-w-16 bg-theme px-2 md:px-3 h-full rounded-lg"},pe=t("span",{class:"text-sm"},"EP",-1),he={class:"relative flex-shrink-0 flex items-center"},me=["src"],_e={class:"w-full flex-1 relative"};function ge(s,o,d,b,e,y){const r=i("XMarkIcon"),k=i("Sidebar"),f=i("TransitionChild"),w=i("TransitionRoot"),M=i("DialogOverlay"),C=i("Dialog"),T=i("Logo"),m=i("Link"),D=i("Category");return l(),_("div",Q,[a(w,{show:e.sidebarOpened,class:"h-full"},{default:n(()=>[a(f,{enter:"transition ease-in-out duration-200 transform","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-200 transform","leave-from":"translate-x-0","leave-to":"translate-x-full",as:"template"},{default:n(()=>[t("div",U,[t("div",Y,[t("button",{onClick:o[0]||(o[0]=p=>e.sidebarOpened=!1),class:"z-20 absolute top-3 md:right-4 right-2 flex items-center justify-center w-9 h-9 rounded-full focus:outline-none bg-theme bg-theme-hover",type:"button",value:"Close sidebar"},[a(r,{class:"h-5 w-5 rounded-full text-white"})]),t("div",Z,[a(k)])])])]),_:1}),a(f,{enter:"transition-opacity ease-linear duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-200","leave-from":"opacity-100","leave-to":"opacity-0",class:"fixed z-30 w-full h-full"},{default:n(()=>[t("div",{class:"bg-neutral-600 h-full bg-opacity-50",onClick:o[1]||(o[1]=p=>e.sidebarOpened=!1)})]),_:1})]),_:1},8,["show"]),a(w,{show:e.isDialogMessage,class:"h-full"},{default:n(()=>[a(C,{open:e.isDialogMessage,onClose:o[3]||(o[3]=p=>{var c;(c=d.closeModal)==null||c.call(),e.isDialogMessage=!1}),class:"fixed h-full inset-0 z-40"},{default:n(()=>[a(f,{enter:"transition ease-in-out duration-200 transform","enter-from":"translate-y-full","enter-to":"translate-y-0",leave:"transition ease-in-out duration-200 transform","leave-from":"translate-y-0","leave-to":"translate-y-full",as:"template"},{default:n(()=>[t("div",$,[t("div",ee,g(e.dialogTitle),1),t("div",{class:"px-4 text-sm text-center",innerHTML:e.dialogMessage},null,8,te),se,t("button",{onClick:o[2]||(o[2]=p=>{var c;(c=d.closeModal)==null||c.call(),e.isDialogMessage=!1}),class:"cursor-pointer p-2 text-cyan-500 text-center text-base focus-visible:outline-0"}," OK ")])]),_:1}),a(f,{enter:"transition-opacity ease-linear duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-200","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:n(()=>[a(M,{class:"fixed inset-0 bg-neutral-600 h-full bg-opacity-50"})]),_:1})]),_:1},8,["open"])]),_:1},8,["show"]),t("div",oe,[t("div",ae,[t("div",ne,[t("div",ie,[t("div",le,[a(T)]),this.user?(l(),_("div",re,[a(m,{href:e.point_link,class:"text-center bg-theme bg-theme-hover rounded-lg px-2 h-full"},{default:n(()=>[t("div",ce,[ue,u("\xA0\xA0"+g(e.point_value)+"\xA0PT\xA0",1),de,u("\xA0+ ")])]),_:1},8,["href"]),t("div",fe,[u(g(e.dp_value)+"\xA0",1),pe])])):x("",!0),e.user?x("",!0):(l(),v(m,{key:1,href:s.route("register"),class:"rounded-md bg-gray-200 hover:bg-gray-300 text-sm md:px-4 px-2 md:py-2 py-1.5 text-neutral-700",as:"button"},{default:n(()=>[u("\u65B0\u898F\u767B\u9332")]),_:1},8,["href"])),t("div",he,[this.user?(l(),_("div",{key:0,onClick:o[4]||(o[4]=p=>e.sidebarOpened=!0),class:"overflow-hidden cursor-pointer w-10 md:w-11 h-10 md:h-11 rounded-full border border-yellow-900/50"},[t("img",{src:e.user.avatar?"/images/avatars/"+e.user.avatar:"/images/icon_user.png",class:"w-full h-full object-cover"},null,8,me)])):(l(),v(m,{key:1,href:s.route("login"),class:"rounded-md text-sm md:px-4 px-2 md:py-2 py-1.5 text-white bg-theme bg-theme-hover",as:"button"},{default:n(()=>[u("\u30ED\u30B0\u30A4\u30F3")]),_:1},8,["href"]))])])])]),t("main",_e,[e.hide_cat_bar?x("",!0):(l(),v(D,{key:0,is_admin:!0})),W(s.$slots,"default")])])])}const ye=G(J,[["render",ge]]);export{ye as A};
