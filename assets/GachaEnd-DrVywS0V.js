import{d as h,r as u,c as s,o as a,a as l,w as g,b as e,i as d,Z as C,t as r,F as c,f as x,y as b,n as L,e as p}from"./app-CcbLVeuA.js";import{U as j}from"./UserLayout-R5jl2GYN.js";import{G as N}from"./GachaButtons-B9HTCQql.js";import{l as S}from"./index-C024q8mn.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-C5PAXQJA.js";import"./PlayIcon-B4Fv0BrF.js";const B={components:{Head:h.Head,AppLayout:j,Link:h.Link,GachaButtons:N},props:{errors:Object,auth:Object,gacha:Object,offer_coupon_code:String,code:String},data(){return{showPointNotification:!1}},computed:{progress_value(){return Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%"},progress_background_width(){return this.gacha.count_rest==0?"100%":Math.round(this.gacha.count_card*100/this.gacha.count_rest)+"%"}},mounted(){this.offer_coupon_code&&(this.showPointNotification=!0)},methods:{copyCouponCode(){navigator.clipboard.writeText(this.offer_coupon_code).then(()=>{S("クーポンコードをコピーしました！",{autoClose:2e3})})},goToCouponPage(){window.location.href=route("user.coupon",{code:this.offer_coupon_code})},closeNotification(){this.showPointNotification=!1}}},E={class:"pt-6 md:px-6 px-4"},T={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},V={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 animate-bounce-in"},z={class:"text-center"},G={class:"flex items-center justify-center gap-2 mb-4"},H={class:"bg-gray-100 px-2 py-1 rounded"},A={class:"flex justify-center gap-4"},M={key:0,class:"mb-8 text-center"},O=["src"],q={key:0,class:"w-full max-w-md mx-auto mb-4"},F={class:"flex flex-wrap gap-2 justify-center"},U={class:"w-full max-w-md mx-auto flex flex-col justify-center flex-1 bg-neutral-600"},D={class:"text-white font-[mplus2]"},I={class:"flex justify-between items-center pt-2 w-full"},X={class:"flex items-end gap-1.5 w-[45%] px-3"},Z={key:0,class:"flex items-center justify-center gap-1.5 flex-wrap w-full"},J=["src"],K={key:1,class:"text-white text-xs font-bold bg-white/20 px-1 rounded"},Q={class:"text-white text-base md:text-xl font-bold"},R={class:"text-white text-base md:text-xl font-bold"},W={key:0,class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Y={key:0,class:"text-white text-sm pr-1"},$={key:1,class:"flex items-center"},tt={class:"w-full mb-2.5"},et={class:"w-full h-2.5 rounded-full overflow-hidden flex bg-neutral-800"},ot={class:"mb-12 text-center"};function st(f,t,o,at,_,i){const w=u("Head"),y=u("GachaButtons"),m=u("Link"),v=u("AppLayout");return a(),s(c,null,[l(w,{title:"マイページ"}),l(v,null,{default:g(()=>[e("div",E,[t[16]||(t[16]=e("h1",{class:"mb-2 text-lg font-bold"},"ガチャ完了",-1)),t[17]||(t[17]=e("hr",{class:"mb-8"},null,-1)),l(C,{name:"fade"},{default:g(()=>[_.showPointNotification?(a(),s("div",T,[e("div",V,[e("div",z,[t[5]||(t[5]=e("img",{src:"/images/EVE-X3p0L.jpg",alt:"ポイントチャージ案内",class:"w-full mb-4"},null,-1)),t[6]||(t[6]=e("h3",{class:"text-base font-bold mb-2"},"所持ポイントが少なくなっています！",-1)),t[7]||(t[7]=e("p",{class:"mb-4 text-sm"},"次回のチャンスに備えてチャージしませんか？",-1)),e("div",G,[t[4]||(t[4]=e("span",{class:"font-bold"},"クーポンコード：",-1)),e("span",H,r(o.offer_coupon_code),1),e("button",{onClick:t[0]||(t[0]=(...n)=>i.copyCouponCode&&i.copyCouponCode(...n)),class:"bg-blue-500 text-white p-1.5 rounded hover:bg-blue-600 transition-colors duration-200"},[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])]),e("div",A,[e("button",{onClick:t[1]||(t[1]=(...n)=>i.goToCouponPage&&i.goToCouponPage(...n)),class:"bg-theme bg-theme-hover text-white px-6 py-2 rounded transition-colors duration-200"}," チャージする "),e("button",{onClick:t[2]||(t[2]=(...n)=>i.closeNotification&&i.closeNotification(...n)),class:"bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400 transition-colors duration-200"}," 閉じる ")])])])])):d("",!0)]),_:1}),o.gacha.ableCount>0?(a(),s("div",M,[t[13]||(t[13]=e("h3",{class:"text-base font-bold"},"もう一度ガチャる！",-1)),e("img",{src:o.gacha.thumbnail,class:"block w-full max-w-md mx-auto my-4"},null,8,O),o.gacha.tags&&o.gacha.tags.length>0?(a(),s("div",q,[e("div",F,[(a(!0),s(c,null,x(o.gacha.tags,n=>(a(),s("span",{key:n.id,class:"px-3 py-1 rounded-full text-sm font-medium text-white shadow-sm",style:b({backgroundColor:n.color_theme})},r(n.name),5))),128))])])):d("",!0),e("div",U,[e("div",D,[e("div",I,[e("div",X,[o.gacha.items&&o.gacha.items.length>0?(a(),s("div",Z,[(a(!0),s(c,null,x(o.gacha.items,(n,k)=>(a(),s("div",{key:k,class:"flex items-center gap-1"},[n.image?(a(),s("img",{key:0,src:n.image,class:"h-8 w-8 object-contain rounded-lg border-2 border-white/50 shadow-lg"},null,8,J)):d("",!0),n.quantity>1?(a(),s("span",K,"×"+r(n.quantity),1)):d("",!0)]))),128))])):o.gacha.dp_gacha?(a(),s(c,{key:1},[e("span",Q,r(o.gacha.point.toLocaleString()),1),t[8]||(t[8]=e("span",{class:"text-white pb-0.5 text-sm font-semibold"},"EP",-1)),t[9]||(t[9]=e("span",{class:"text-gray-300 text-xs pb-0.5 text-nowrap"},"/1回",-1))],64)):(a(),s(c,{key:2},[t[10]||(t[10]=e("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1)),e("span",R,r(o.gacha.point.toLocaleString()),1),t[11]||(t[11]=e("span",{class:"text-gray-300 text-xs pb-0.5 text-nowrap"},"/1回",-1))],64))]),o.gacha.count_rest?(a(),s("div",W,[o.gacha.count_card>0?(a(),s("span",Y," のこり "+r(o.gacha.count_rest.toLocaleString())+" / "+r(o.gacha.count_card.toLocaleString()),1)):(a(),s("div",$,[...t[12]||(t[12]=[e("span",{class:"font-semibold pr-2"},"- / -",-1)])])),e("div",tt,[e("div",et,[e("div",{class:L(["h-full rounded-full border-neutral-800",{"bg-gradient-to-r from-[#dd422d] via-[#fae94e] to-[#02ec0e]":o.gacha.count_card>0,"bg-[#02ec0e] w-full":o.gacha.count_card==0}]),style:b(o.gacha.count_card>0?{width:i.progress_value,backgroundSize:i.progress_background_width}:{})},null,6)])])])):d("",!0)])]),l(y,{gacha:{...o.gacha,code:o.code},class:"bg-neutral-600 px-2 py-2"},null,8,["gacha"])])])):d("",!0),e("div",ot,[l(m,{href:f.route("main"),class:"inline-block items-center px-4 py-2 m-1 bg-neutral-700 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-900 active:bg-neutral-900 focus:outline-none focus:border-neutral-900 focus:shadow-outline-neutral transition ease-in-out duration-150"},{default:g(()=>[...t[14]||(t[14]=[p(" ガチャ選択ページへ ",-1)])]),_:1},8,["href"]),l(m,{href:f.route("user.products"),class:"inline-block items-center px-4 py-2 m-1 bg-neutral-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150"},{default:g(()=>[...t[15]||(t[15]=[p(" 獲得した商品一覧へ ",-1)])]),_:1},8,["href"])])])]),_:1})],64)}const gt=P(B,[["render",st],["__scopeId","data-v-c2074a1c"]]);export{gt as default};
