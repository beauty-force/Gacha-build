import{H as b,L as v,u as w,r as _,o as t,c as r,b as m,w as a,F as f,d as e,i as p,e as n,f as x,n as k,t as i,h as L}from"./app.fae13d50.js";import{U as C}from"./UserLayout.a2bab384.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import"./useConfirm.6b50f79b.js";import"./index.fa16ef09.js";const j={components:{Head:b,AppLayout:C,Link:v},props:{},data(){return{user:null,period:"",users:[],loading:!1,periods:[{title:"\u672C\u65E5",period:"daily"},{title:"\u9031\u9593",period:"weekly"},{title:"\u6708\u9593",period:"monthly"}]}},setup(l){},computed:{is_admin(){return this.user&&this.user.type==1}},mounted(){this.user=w().props.value.auth.user,this.onPeriodSelection("daily")},methods:{onPeriodSelection(l){this.period!=l&&(this.loading=!0,this.users=[],this.period=l,axios.get(route("ranking.data",{period:this.period})).then(u=>{this.loading=!1,this.users=u.data.users}).catch(u=>{}))}}},B={class:"h-full flex flex-col"},H={class:"px-4 pt-4 pb-1"},N=e("h1",{class:"text-xl font-bold flex gap-4 md:gap-6 items-end"},[n(" \u30E9\u30F3\u30AD\u30F3\u30B0 "),e("span",{class:"text-xs md:text-sm text-neutral-500 md:leading-6 leading-5"}," \u203B1\u6642\u9593\u6BCE\u306B\u66F4\u65B0 ")],-1),P={class:"pt-2 w-full"},V={class:"w-full text-neutral-500 space-x-1 border-b-4 border-yellow-500 px-4 flex justify-center"},z=["onClick"],A={class:"flex-1 relative"},E={key:0,class:"absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-neutral-300/75 z-[20]"},F=e("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[e("svg",{class:"animate-spin h-8 w-8 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1),I=[F],U={class:"p-3"},D={key:0,class:"flex justify-center flex-col items-center gap-1 py-2 border-b"},M={class:"relative flex justify-center w-full pb-4"},R=["src"],T=e("img",{src:"/images/top_one.svg",class:"w-28 absolute bottom-0"},null,-1),q={key:1,class:"flex font-bold text-base"},G={class:"flex gap-1 items-center justify-center text-sm"},J=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1),K={key:1,class:"flex items-center gap-2.5 border-b py-2"},O={class:"w-8 text-center text-xl font-[mplus2]"},Q=["src"],W={class:"space-y-0.5"},X={key:1,class:"flex font-bold text-base"},Y={class:"flex gap-1 items-center text-sm"},Z=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1);function $(l,u,ee,te,s,c){const g=_("Head"),d=_("Link"),y=_("AppLayout");return t(),r(f,null,[m(g,{title:"\u30E9\u30F3\u30AD\u30F3\u30B0"}),m(y,null,{default:a(()=>[e("div",B,[e("div",H,[N,c.is_admin?(t(),p(d,{key:0,href:l.route("admin.ranking.history"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:a(()=>[n(" \u5831\u916C\u5C65\u6B74 ")]),_:1},8,["href"])):(t(),p(d,{key:1,href:l.route("ranking.about"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:a(()=>[n(" \u5831\u916C\u306B\u3064\u3044\u3066 ")]),_:1},8,["href"]))]),e("div",P,[e("div",V,[(t(!0),r(f,null,x(s.periods,(o,h)=>(t(),r("button",{onClick:se=>c.onPeriodSelection(o.period),class:k(["-mb-[1px] flex-1 inline-block text-center py-1.5 rounded-t-md border-yellow-500 border-x border-t",{"bg-yellow-500 text-white":o.period==s.period,"hover:bg-yellow-400 hover:text-white":o.period!=s.period}])},i(o.title),11,z))),256))])]),e("div",A,[s.loading?(t(),r("div",E,I)):L("",!0),e("div",U,[(t(!0),r(f,null,x(s.users,(o,h)=>(t(),r("div",null,[o.total_points==s.users[0].total_points?(t(),r("div",D,[e("div",M,[e("img",{src:s.users[0].avatar?"/images/avatars/"+s.users[0].avatar:"/images/icon_user.png",class:"w-24 h-24 rounded-full border-[#EE4444] border-2"},null,8,R),T]),c.is_admin?(t(),p(d,{key:0,href:l.route("admin.users.detail",{id:s.users[0].id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:a(()=>[n(i(s.users[0].name),1)]),_:1},8,["href"])):(t(),r("span",q,i(s.users[0].name),1)),e("span",G,[J,n(" "+i(parseInt(s.users[0].total_points).toLocaleString()),1)])])):(t(),r("div",K,[e("span",O,i(s.users[h-1].total_points!=o.total_points?h+1:""),1),e("img",{src:o.avatar?"/images/avatars/"+o.avatar:"/images/icon_user.png",class:"w-14 h-14 rounded-full border"},null,8,Q),e("div",W,[c.is_admin?(t(),p(d,{key:0,href:l.route("admin.users.detail",{id:o.id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:a(()=>[n(i(o.name),1)]),_:2},1032,["href"])):(t(),r("span",X,i(o.name),1)),e("span",Y,[Z,n(" "+i(parseInt(o.total_points).toLocaleString()),1)])])]))]))),256))])])])]),_:1})],64)}const ae=S(j,[["render",$]]);export{ae as default};
