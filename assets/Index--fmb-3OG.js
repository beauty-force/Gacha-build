import{d as h,r as d,c as r,o as n,a as l,w as c,b as t,e as p,n as b,t as o,i as _,F as v,f as w}from"./app-B03fDtnv.js";import{A as k}from"./Admin-8a540uiu.js";import{d as L}from"./index-Dwroll6w.js";import{u as C}from"./useConfirm-BM4_Bl1J.js";import{P as T}from"./Pagination-CiceDS4-.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const{confirm:H}=C(),N={components:{Head:h.Head,AppLayout:k,Link:h.Link,Pagination:T},props:{coupons:Object,types:Object,auth:Object,availableTotal:Number,unavailableTotal:Number,totalPages:Number,search_cond:Object},data(){return{activeTab:this.search_cond.tab||"available",_search_cond:this.search_cond}},mounted(){},methods:{delete_coupon(a){H("削除してもいいですか？","","error").then(e=>{e&&L.Inertia.delete(route("admin.coupon.delete",{id:a}))})},switchTab(a){this.activeTab=a,this._search_cond.tab=a,this._search_cond.page=1,this.$inertia.get(route("admin.coupon"),this._search_cond)}}},P={class:"md:px-4 px-2"},A={class:"border-b w-full px-2 py-3 mb-2 flex justify-between items-center"},B={class:"border-b border-gray-200 mb-4"},V={class:"-mb-px flex space-x-8"},M={class:"ml-2 bg-teal-100 text-teal-600 py-0.5 px-2.5 rounded-full text-xs font-medium"},O={class:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2.5 rounded-full text-xs font-medium"},S={class:"w-full overflow-auto"},z={class:"w-full table-auto"},E={class:"text-sm"},F={class:"border-b border-collapse"},I={class:"text-center px-1 py-2"},D={class:"text-center px-1 py-2 text-red-600"},R={key:0,class:"text-center px-1 py-2"},q={key:1,class:"text-center px-1 py-2"},G={class:"text-center px-1 py-2"},J={class:"text-center px-1 py-2"},K={key:0},Q={class:"text-center px-1 py-2"},U={class:"flex justify-center items-center py-2 gap-1"},W=["onClick"],X={key:0,class:"mt-6"};function Y(a,e,i,Z,x,u){const f=d("Head"),m=d("Link"),y=d("Pagination"),g=d("AppLayout");return n(),r(v,null,[l(f,{title:"クーポン発行"}),l(g,null,{default:c(()=>[t("div",P,[t("div",A,[e[3]||(e[3]=t("h3",{class:"font-semibold"},"クーポン発行",-1)),l(m,{href:a.route("admin.coupon.create"),class:"rounded float-right px-8 py-1.5 text-sm bg-teal-600 hover:bg-teal-700 text-neutral-50"},{default:c(()=>[...e[2]||(e[2]=[p(" 新規追加 ",-1)])]),_:1},8,["href"])]),t("div",B,[t("nav",V,[t("button",{onClick:e[0]||(e[0]=s=>u.switchTab("available")),class:b(["py-2 px-1 border-b-2 font-medium text-sm",x.activeTab==="available"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[e[4]||(e[4]=p(" 利用可能クーポン ",-1)),t("span",M,o(i.availableTotal),1)],2),t("button",{onClick:e[1]||(e[1]=s=>u.switchTab("unavailable")),class:b(["py-2 px-1 border-b-2 font-medium text-sm",x.activeTab==="unavailable"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[e[5]||(e[5]=p(" 利用不可クーポン ",-1)),t("span",O,o(i.unavailableTotal),1)],2)])]),t("div",S,[t("table",z,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"border-b border-collapse text-nowrap font-bold text-sm"},[t("th",{class:"text-center px-1 py-2"},"名前"),t("th",{class:"text-center px-1 py-2"},"コード"),t("th",{class:"text-center px-1 py-2"},"ポイント"),t("th",{class:"text-center px-1 py-2"},"有効期限"),t("th",{class:"text-center px-1 py-2"},"枚数(使用)"),t("th",{class:"text-center px-1 py-2"},"一人当上限"),t("th",{class:"text-center px-1 py-2"})])],-1)),t("tbody",E,[(n(!0),r(v,null,w(i.coupons,s=>(n(),r("tr",F,[t("td",I,o(s.title),1),t("td",D,o(s.code),1),s.type=="NORMAL"?(n(),r("td",R,o(s.point.toLocaleString()+"pt"),1)):(n(),r("td",q,o("割引率: "+s.min_rate+"~"+s.max_rate+"%"),1)),t("td",G,o(s.expiration),1),t("td",J,[p(o(s.count.toLocaleString())+" ",1),s.used_count>0?(n(),r("span",K,"/ "+o(s.used_count.toLocaleString()),1)):_("",!0)]),t("td",Q,o(s.user_limit),1),t("td",null,[t("div",U,[l(m,{href:a.route("admin.coupon.create",{id:s.id}),class:"rounded float-right p-1.5 text-sm bg-yellow-500 hover:bg-yellow-600 text-neutral-50 text-nowrap"},{default:c(()=>[...e[6]||(e[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])]),_:1},8,["href"]),l(m,{href:a.route("admin.coupon.edit",s.id),class:"rounded float-right p-1.5 text-sm bg-cyan-600 hover:bg-cyan-700 text-neutral-50 text-nowrap"},{default:c(()=>[...e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),t("button",{onClick:$=>u.delete_coupon(s.id),class:"rounded float-right p-1.5 text-sm bg-neutral-600 hover:bg-neutral-700 text-neutral-50 text-nowrap"},[...e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,W)])])]))),256))])]),i.totalPages>1?(n(),r("div",X,[l(y,{route_name:"admin.coupon",search_cond:x._search_cond,total:i.totalPages},null,8,["search_cond","total"])])):_("",!0)])])]),_:1})],64)}const nt=j(N,[["render",Y]]);export{nt as default};
