import{H as w,L as k,r as h,o as n,c as i,b as f,w as v,F as d,d as s,t as L,f as g,i as m,h as p,J as C,a1 as b}from"./app.fae13d50.js";import{U as B}from"./UserLayout.a2bab384.js";import{G as z}from"./GachaCard.70c29549.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import"./useConfirm.6b50f79b.js";import"./index.fa16ef09.js";import"./GachaButtons.89e26f46.js";import"./PlayIcon.4a04f4e7.js";const G={components:{Head:w,AppLayout:B,Link:k,GachaCard:z},props:{errors:Object,auth:Object,gachas:Object,category_share:Object,show_one_day_gacha:Number},data(){return{orderBy:localStorage.getItem("eve-gacha-top-order")||"recommended",one_day_gachas:this.gachas.data.filter(o=>o.rank_limit==-2),other_gachas:this.gachas.data.filter(o=>o.rank_limit!=-2)}},computed:{sortedGachas(){let o=this.other_gachas;return o.sort((e,t)=>{if(e.status!==t.status)return e.status-t.status;switch(this.orderBy){case"recommended":return t.order_level-e.order_level;case"gauge_low":const u=e.count_rest/e.count_card,r=t.count_rest/t.count_card;return u-r;case"gauge_high":const c=e.count_rest/e.count_card;return t.count_rest/t.count_card-c;case"point_up":return e.point-t.point;case"point_down":return t.point-e.point;case"newest":return t.id-e.id;default:return t.order_level-e.order_level}}),o}},mounted(){this.initializeLazyLoading();const o=sessionStorage.getItem("eve-gacha-top-scroll");o!==null&&(setTimeout(()=>{window.scrollTo(0,parseFloat(o))},100),sessionStorage.removeItem("eve-gacha-top-scroll"))},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},initializeLazyLoading(){const o=document.querySelectorAll("img.lazy"),e={root:null,rootMargin:"0px",threshold:.1},t=r=>{r.src=r.dataset.src},u=new IntersectionObserver((r,c)=>{r.forEach(l=>{l.isIntersecting&&(t(l.target),c.unobserve(l.target))})},e);o.forEach(r=>{u.observe(r)})},orderChanged(){localStorage.setItem("eve-gacha-top-order",this.orderBy),this.$nextTick(()=>{this.initializeLazyLoading()})}}},I={key:0,class:""},j={class:"bg-gradient-to-b from-yellow-100 to-yellow-400 p-4 shadow-lg"},A=s("h2",{class:"text-rose-500 text-sm sm:text-base md:text-lg font-bold mb-4 -mx-3 text-center flex items-center justify-center"}," \u{1F308} \u65B0\u898F\u767B\u9332\u8005\u9650\u5B9A\uFF01\u4ECA\u3060\u3051\u5F15\u3051\u308B\u8D85\u304A\u5F97\u306A\u30AA\u30EA\u30D1 \u{1F308} ",-1),H={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},O={class:"flex px-2 pt-2.5 sticky top-32 z-10"},D=s("option",{value:"recommended"},"\xA0\xA0\u304A\u3059\u3059\u3081\u9806\xA0",-1),N=s("option",{value:"gauge_low"},"\xA0\xA0\u6B8B\u30B2\u30FC\u30B8\u304C\u5C11\u306A\u3044\u9806\xA0",-1),V=s("option",{value:"gauge_high"},"\xA0\xA0\u6B8B\u30B2\u30FC\u30B8\u304C\u591A\u3044\u9806\xA0",-1),E=s("option",{value:"point_up"},"\xA0\xA0\u30DD\u30A4\u30F3\u30C8\u304C\u4F4E\u3044\u9806\xA0",-1),F=s("option",{value:"point_down"},"\xA0\xA0\u30DD\u30A4\u30F3\u30C8\u304C\u9AD8\u3044\u9806\xA0",-1),T=s("option",{value:"newest"},"\xA0\xA0\u65B0\u7740\u9806\xA0",-1),U=[D,N,V,E,F,T],M={class:"sm:px-4 px-4 mb-8 grid sm:grid-cols-2 grid-cols-1 gap-4 pt-4 pb-8"};function q(o,e,t,u,r,c){const l=h("Head"),_=h("GachaCard"),x=h("AppLayout");return n(),i(d,null,[f(l,null,{default:v(()=>[s("title",null,L(t.category_share.title)+"\u30AB\u30FC\u30C9\u30AC\u30C1\u30E3",1)]),_:1}),f(x,{is_home:!0},{default:v(()=>[t.show_one_day_gacha&&r.one_day_gachas.length>0?(n(),i("div",I,[s("div",j,[A,s("div",H,[(n(!0),i(d,null,g(r.one_day_gachas,(a,y)=>(n(),m(_,{gacha:a},null,8,["gacha"]))),256))])])])):p("",!0),s("div",O,[C(s("select",{class:"rounded-full py-2 border focus:ring-0 text-sm md:text-base","onUpdate:modelValue":e[0]||(e[0]=a=>r.orderBy=a),onChange:e[1]||(e[1]=(...a)=>c.orderChanged&&c.orderChanged(...a))},U,544),[[b,r.orderBy]])]),s("div",M,[(n(!0),i(d,null,g(c.sortedGachas,(a,y)=>(n(),i(d,null,[a.count_rest?(n(),m(_,{key:0,gacha:a},null,8,["gacha"])):p("",!0)],64))),256)),(n(!0),i(d,null,g(c.sortedGachas,(a,y)=>(n(),i(d,null,[a.count_rest?p("",!0):(n(),m(_,{key:0,gacha:a},null,8,["gacha"]))],64))),256))])]),_:1})],64)}const Z=S(G,[["render",q]]);export{Z as default};
