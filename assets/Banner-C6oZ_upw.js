import{d as f,r as d,c as u,o as c,a as s,w as _,b as t,h as b,i as h,j as g,v as w,F as v,f as M,n as I}from"./app-DsZT8ZFb.js";import{A as H}from"./Admin-DmD77vfe.js";import{d as j}from"./index-B-2oS8p0.js";import{r as A,a as D,V as B}from"./ArrowLongUpIcon-Be05ZEEE.js";import{u as F}from"./useConfirm-IV4jvDvB.js";import{B as O}from"./main-BBeBg7Ib.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as S}from"./XMarkIcon-CYlg8lyD.js";import"./isNativeReflectConstruct-zdezgZUv.js";const{confirm:N}=F(),E={components:{Link:f.Link,Head:f.Head,AppLayout:H,draggable:B,ArrowLongUpIcon:D,ArrowLongDownIcon:A,VueDatePicker:O,XMarkIcon:S},props:{errors:Object,auth:Object,banners:Object},methods:{log(){},submit(){this.new_form.file=this.$refs.file.files[0],this.new_form.link_url=this.banner.link_url,this.new_form.start_date=this.banner.start_date,this.new_form.end_date=this.banner.end_date,this.new_form.post(route("admin.banner.create"),{onSuccess:()=>this.new_form.reset(),preserveScroll:!0})},destroy(o){N("削除してもいいですか？","","error").then(e=>{e&&j.Inertia.delete(route("admin.banner.destroy",o),{preserveScroll:!0})})},previewImage(o,e){if(o.target.files.length>0){const i=o.target.files[0];e==-1?this.banner.image=URL.createObjectURL(i):this.banners[e].image=URL.createObjectURL(i)}},levelUp(o){let e;for(e=1;e<this.banners.length&&this.banners[e].id!=o;e++);e<this.banners.length&&this.arrayMove(e,e-1)},arrayMove(o,e){this.banners.splice(e,0,this.banners.splice(o,1)[0])},levelDown(o){let e;for(e=0;e<this.banners.length-1&&this.banners[e].id!=o;e++);e<this.banners.length-1&&this.arrayMove(e,e+1)},submit_order(){this.order_form.files=this.$refs.photo.map(o=>o.files[0]),this.order_form.banners=this.banners,this.order_form.post(route("admin.banner.store"),{preserveScroll:!0,onFinish:()=>{}})}},data(){return{open:!0,dragging:!1,banner:{link_url:"",start_date:"",end_date:"",image:""}}},setup(o){const e=f.useForm({file:null,link_url:null,start_date:null,end_date:null}),i=f.useForm({files:[],banners:[]});return{new_form:e,order_form:i}},mounted(){}},P={class:"pt-4 md:px-6 px-4"},X={class:""},z={class:"m-auto min-w-full text-sm font-medium"},T={class:"border border-neutral-500"},q={class:"border-b"},G=["src"],J={class:"border-b"},K={class:"flex"},Q={class:""},W={class:""},Y={class:"text-center pb-2"},Z={class:"flex mb-1"},$={class:"flex-1 h-full border-r"},ee={class:"flex"},te={class:"flex-1"},re=["onChange"],oe=["src"],ne={class:"flex w-full"},se={class:"flex-1"},le={class:"flex-1"},ae={class:"flex w-full"},ie={class:"flex-1"},de=["onUpdate:modelValue"],ue={class:"align-middle h-full flex items-center z-10 gap-1 p-2 flex-col md:flex-row"},ce=["onClick"],me=["onClick"],fe=["onClick"],be={class:"p-1 flex justify-center"},pe=["disabled"];function _e(o,e,i,p,l,a){const y=d("Head"),m=d("VueDatePicker"),x=d("ArrowLongUpIcon"),k=d("ArrowLongDownIcon"),V=d("XMarkIcon"),U=d("draggable"),C=d("AppLayout");return c(),u(v,null,[s(y,{title:"バナー設定"}),s(C,null,{default:_(()=>[t("div",P,[e[12]||(e[12]=t("h1",{class:"mb-2 text-lg font-bold"},"バナー設定",-1)),e[13]||(e[13]=t("hr",{class:"mb-8"},null,-1)),t("div",X,[t("form",{onSubmit:e[4]||(e[4]=b(r=>a.submit(),["prevent"]))},[t("table",z,[t("tbody",T,[t("tr",q,[e[6]||(e[6]=t("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"バナー画像",-1)),t("td",null,[t("input",{onChange:e[0]||(e[0]=r=>a.previewImage(r,-1)),ref:"file",type:"file",class:"w-full"},null,544),l.banner.image!=""?(c(),u("img",{key:0,src:l.banner.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,G)):h("",!0)])]),t("tr",J,[e[7]||(e[7]=t("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"日時",-1)),t("td",null,[t("div",K,[s(m,{modelValue:l.banner.start_date,"onUpdate:modelValue":e[1]||(e[1]=r=>l.banner.start_date=r),format:"yyyy-MM-dd HH:mm",placeholder:"開始日時"},null,8,["modelValue"]),s(m,{modelValue:l.banner.end_date,"onUpdate:modelValue":e[2]||(e[2]=r=>l.banner.end_date=r),format:"yyyy-MM-dd HH:mm",placeholder:"終了日時"},null,8,["modelValue"])])])]),t("tr",Q,[e[8]||(e[8]=t("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"バナーURL",-1)),t("td",W,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>l.banner.link_url=r),type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,512),[[w,l.banner.link_url]])])])])]),e[9]||(e[9]=t("div",{class:"text-center py-2"},[t("button",{type:"submit",class:"w-28 bg-neutral-500 hover:bg-neutral-700 text-white text-sm font-normal py-2 px-5 rounded"}," 登録 ")],-1))],32)]),e[14]||(e[14]=t("hr",{class:"my-4"},null,-1)),t("div",Y,[e[11]||(e[11]=t("div",{class:"border-b border-r border-l bg-neutral-300 p-2"}," バナー編集 ",-1)),t("div",Z,[s(U,{class:"w-full",list:i.banners,onChange:a.log},{default:_(()=>[(c(!0),u(v,null,M(i.banners,(r,L)=>(c(),u("div",{class:"my-1 text-left cursor-pointer border border-neutral-500 flex items-center hover:bg-white focus:bg-neutral-100 flex-wrap justify-center",key:r.id},[t("div",$,[t("div",ee,[t("div",te,[t("input",{onChange:n=>a.previewImage(n,L),ref_for:!0,ref:"photo",type:"file",class:"w-full"},null,40,re),r.image!=""?(c(),u("img",{key:0,src:r.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,oe)):h("",!0)])]),t("div",ne,[t("div",se,[s(m,{modelValue:r.start_date,"onUpdate:modelValue":n=>r.start_date=n,format:"yyyy-MM-dd HH:mm",placeholder:"開始日時"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",le,[s(m,{modelValue:r.end_date,"onUpdate:modelValue":n=>r.end_date=n,format:"yyyy-MM-dd HH:mm",placeholder:"終了日時"},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",ae,[t("div",ie,[g(t("input",{"onUpdate:modelValue":n=>r.link_url=n,type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"入力してください"},null,8,de),[[w,r.link_url]])])])]),t("div",ue,[t("button",{onClick:b(n=>a.levelUp(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[s(x,{class:"w-5 h-5 text-white block"})],8,ce),t("button",{onClick:b(n=>a.levelDown(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[s(k,{class:"w-5 h-5 text-white block"})],8,me),t("button",{onClick:n=>a.destroy(r.id),class:"bg-red-500 hover:bg-red-700 text-white text-sm font-normal p-1 rounded"},[s(V,{class:"w-5 h-5 text-white block"})],8,fe)])]))),128))]),_:1},8,["list","onChange"])]),t("div",be,[t("button",{onClick:e[5]||(e[5]=b(r=>a.submit_order(),["prevent"])),class:I([{"opacity-25":p.order_form.processing},"w-28 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-normal py-2 px-3 inline-block rounded"]),disabled:p.order_form.processing},[...e[10]||(e[10]=[t("div",{class:"inline-block"},"保存する",-1)])],10,pe)])])])]),_:1})],64)}const Ce=R(E,[["render",_e]]);export{Ce as default};
