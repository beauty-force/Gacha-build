import{L as M,H as I,E as H,G as f,r as d,o as c,c as u,b as n,w as b,F as p,d as e,I as m,h as g,J as w,K as v,f as A,n as D}from"./app.63504f63.js";import{A as j}from"./Admin.92f664f1.js";import{V as B,r as O,a as R}from"./ArrowLongUpIcon.856130ec.js";import{u as S}from"./useConfirm.1c6f5431.js";import{B as F}from"./main.0b1a4cf1.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as Y}from"./XMarkIcon.ec98fd15.js";import"./isNativeReflectConstruct.8f2fcece.js";const{confirm:P}=S(),X={components:{Link:M,Head:I,AppLayout:j,draggable:B,ArrowLongUpIcon:O,ArrowLongDownIcon:R,VueDatePicker:F,XMarkIcon:Y},props:{errors:Object,auth:Object,banners:Object},methods:{log(){},submit(){this.new_form.file=this.$refs.file.files[0],this.new_form.link_url=this.banner.link_url,this.new_form.post(route("admin.banner.create"),{onSuccess:()=>this.new_form.reset(),preserveScroll:!0})},destroy(s){P("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F","","error").then(t=>{t&&H.Inertia.delete(route("admin.banner.destroy",s),{preserveScroll:!0})})},previewImage(s,t){if(s.target.files.length>0){const i=s.target.files[0];t==-1?this.banner.image=URL.createObjectURL(i):this.banners[t].image=URL.createObjectURL(i)}},levelUp(s){let t;for(t=1;t<this.banners.length&&this.banners[t].id!=s;t++);t<this.banners.length&&this.arrayMove(t,t-1)},arrayMove(s,t){this.banners.splice(t,0,this.banners.splice(s,1)[0])},levelDown(s){let t;for(t=0;t<this.banners.length-1&&this.banners[t].id!=s;t++);t<this.banners.length-1&&this.arrayMove(t,t+1)},submit_order(){this.order_form.files=this.$refs.photo.map(s=>s.files[0]),this.order_form.banners=this.banners,this.order_form.post(route("admin.banner.store"),{preserveScroll:!0,onFinish:()=>{}})}},data(){return{open:!0,dragging:!1,banner:{link_url:"",start_date:"",end_date:"",image:""}}},setup(s){const t=f({file:null,link_url:null,start_date:null,end_date:null}),i=f({files:[],banners:[]});return{new_form:t,order_form:i}},mounted(){}},z={class:"pt-4 md:px-6 px-4"},E=e("h1",{class:"mb-2 text-lg font-bold"},"\u30D0\u30CA\u30FC\u8A2D\u5B9A",-1),G=e("hr",{class:"mb-8"},null,-1),J={class:""},K={class:"m-auto min-w-full text-sm font-medium"},T={class:"border border-neutral-500"},q={class:"border-b"},Q=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FC\u753B\u50CF",-1),W=["src"],Z={class:"border-b"},$=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u65E5\u6642",-1),ee={class:"flex"},te={class:""},oe=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FCURL",-1),se={class:""},re=e("div",{class:"text-center py-2"},[e("button",{type:"submit",class:"w-28 bg-neutral-500 hover:bg-neutral-700 text-white text-sm font-normal py-2 px-5 rounded"}," \u767B\u9332 ")],-1),ne=e("hr",{class:"my-4"},null,-1),le={class:"text-center pb-2"},ae=e("div",{class:"border-b border-r border-l bg-neutral-300 p-2"}," \u30D0\u30CA\u30FC\u7DE8\u96C6 ",-1),ie={class:"flex mb-1"},de={class:"flex-1 h-full border-r"},ce={class:"flex"},ue={class:"flex-1"},_e=["onChange"],me=["src"],he={class:"flex w-full"},fe={class:"flex-1"},be={class:"flex-1"},pe={class:"flex w-full"},ge={class:"flex-1"},we=["onUpdate:modelValue"],ve={class:"align-middle h-full flex items-center z-10 gap-1 p-2 flex-col md:flex-row"},xe=["onClick"],ke=["onClick"],ye=["onClick"],Ve={class:"p-1 flex justify-center"},Ue=["disabled"],Ce=e("div",{class:"inline-block"},"\u4FDD\u5B58\u3059\u308B",-1),Le=[Ce];function Me(s,t,i,h,l,a){const x=d("Head"),_=d("VueDatePicker"),k=d("ArrowLongUpIcon"),y=d("ArrowLongDownIcon"),V=d("XMarkIcon"),U=d("draggable"),C=d("AppLayout");return c(),u(p,null,[n(x,{title:"\u30D0\u30CA\u30FC\u8A2D\u5B9A"}),n(C,null,{default:b(()=>[e("div",z,[E,G,e("div",J,[e("form",{onSubmit:t[4]||(t[4]=m(o=>a.submit(),["prevent"]))},[e("table",K,[e("tbody",T,[e("tr",q,[Q,e("td",null,[e("input",{onChange:t[0]||(t[0]=o=>a.previewImage(o,-1)),ref:"file",type:"file",class:"w-full"},null,544),l.banner.image!=""?(c(),u("img",{key:0,src:l.banner.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,W)):g("",!0)])]),e("tr",Z,[$,e("td",null,[e("div",ee,[n(_,{modelValue:l.banner.start_date,"onUpdate:modelValue":t[1]||(t[1]=o=>l.banner.start_date=o),format:"Y-MM-dd HH:mm",placeholder:"\u958B\u59CB\u65E5\u6642"},null,8,["modelValue"]),n(_,{modelValue:l.banner.end_date,"onUpdate:modelValue":t[2]||(t[2]=o=>l.banner.end_date=o),format:"Y-MM-dd HH:mm",placeholder:"\u7D42\u4E86\u65E5\u6642"},null,8,["modelValue"])])])]),e("tr",te,[oe,e("td",se,[w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.banner.link_url=o),type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,512),[[v,l.banner.link_url]])])])])]),re],32)]),ne,e("div",le,[ae,e("div",ie,[n(U,{class:"w-full",list:i.banners,onChange:a.log},{default:b(()=>[(c(!0),u(p,null,A(i.banners,(o,L)=>(c(),u("div",{class:"my-1 text-left cursor-pointer border border-neutral-500 flex items-center hover:bg-white focus:bg-neutral-100 flex-wrap justify-center",key:o.id},[e("div",de,[e("div",ce,[e("div",ue,[e("input",{onChange:r=>a.previewImage(r,L),ref_for:!0,ref:"photo",type:"file",class:"w-full"},null,40,_e),o.image!=""?(c(),u("img",{key:0,src:o.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,me)):g("",!0)])]),e("div",he,[e("div",fe,[n(_,{modelValue:o.start_date,"onUpdate:modelValue":r=>o.start_date=r,format:"Y-MM-dd HH:mm",placeholder:"\u958B\u59CB\u65E5\u6642"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",be,[n(_,{modelValue:o.end_date,"onUpdate:modelValue":r=>o.end_date=r,format:"Y-MM-dd HH:mm",placeholder:"\u7D42\u4E86\u65E5\u6642"},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",pe,[e("div",ge,[w(e("input",{"onUpdate:modelValue":r=>o.link_url=r,type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,8,we),[[v,o.link_url]])])])]),e("div",ve,[e("button",{onClick:m(r=>a.levelUp(o.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[n(k,{class:"w-5 h-5 text-white block"})],8,xe),e("button",{onClick:m(r=>a.levelDown(o.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[n(y,{class:"w-5 h-5 text-white block"})],8,ke),e("button",{onClick:r=>a.destroy(o.id),class:"bg-red-500 hover:bg-red-700 text-white text-sm font-normal p-1 rounded"},[n(V,{class:"w-5 h-5 text-white block"})],8,ye)])]))),128))]),_:1},8,["list","onChange"])]),e("div",Ve,[e("button",{onClick:t[5]||(t[5]=m(o=>a.submit_order(),["prevent"])),class:D([{"opacity-25":h.order_form.processing},"w-28 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-normal py-2 px-3 inline-block rounded"]),disabled:h.order_form.processing},Le,10,Ue)])])])]),_:1})],64)}const Se=N(X,[["render",Me]]);export{Se as default};
