import{d as p,r as c,c as f,o as a,l as x,a as l,w as u,b as t,h as M,i as b,t as A,j as n,e as i,v as h,m as F,n as y,a9 as v,F as U,g as B}from"./app-0wH1KzxS.js";import{_ as L}from"./Checkbox-D1yEiMXy.js";import{A as C}from"./UserLayout-EBlolaXa.js";import{_ as D}from"./InputError-B3Nj1hSG.js";import{_ as E}from"./TextInput-2HnrHXsy.js";import{B as j}from"./main-DmeQ77n8.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-DiRK4iAb.js";import"./index-DZjxj9Tr.js";import"./isNativeReflectConstruct-zdezgZUv.js";const S={components:{Checkbox:L,Head:p.Head,AppLayout:C,InputError:D,TextInput:E,Link:p.Link,VueDatePicker:j},data:()=>({passwordFieldType:"password",step_integer:0,step_titles:["本人確認","認証コード入力","アカウント登録"],is_processing:!1,data:{},termsAccepted:!1}),props:{invitation_code:String,invited_bonus:Number,errors:Object,recaptcha_site_key:String},methods:{submit(){if(this.step_integer==0)grecaptcha.ready(()=>{grecaptcha.execute(this.recaptcha_site_key,{action:"phone_submit"}).then(s=>{this.form.recaptcha_token=s,this.form.post(route("register.phone.send"),{onFinish:()=>{this.data=p.usePage().props.value.flash,this.data.data&&this.data.data.status==1&&(this.step_integer=1,this.form.phone=this.data.data.phone)}})})});else if(this.step_integer==1)this.form.post(route("register.phone.verify"),{onFinish:()=>{this.data=p.usePage().props.value.flash,this.data.data&&(this.data.data.status==1?this.step_integer=2:this.step_integer=0)}});else{if(this.form.password!==this.form.password_confirmation)return;this.form.post(route("register.phone.register"),{onFinish:()=>{}})}},submit_phone(){const s={phone:this.form.phone};this.is_processing=!0,B.post(route("register.phone.send"),s).then(e=>{e.status==201||e.status==200,this.is_processing=!1}).catch(e=>{this.is_processing=!1})}},computed:{passwordMismatch(){return this.form.password&&this.form.password_confirmation&&this.form.password!==this.form.password_confirmation}},setup(s){return{form:p.useForm({phone:"",code:"",email:"",password:"",password_confirmation:"",birthday:null,invite_code:s.invitation_code,recaptcha_token:""})}},mounted(){const s=document.createElement("script");s.src="https://www.google.com/recaptcha/api.js?render="+this.recaptcha_site_key,s.async=!0,s.defer=!0,document.head.appendChild(s)},beforeUnmount(){const s=document.getElementById("recaptcha-script");s&&s.remove();const e=document.querySelector(".grecaptcha-badge");e&&e.remove()}},T={class:"flex flex-col h-full"},I={class:"py-6 md:px-6 px-4 flex-1"},N={class:"underline underline-offset-8 mb-10 text-center text-lg font-bold"},H={key:0,class:"flex flex-col items-center"},R={class:"mb-6 w-full"},q={class:"mb-6 px-2"},z={class:"flex items-center cursor-pointer gap-2"},O={class:"text-sm md:text-base text-neutral-600 font-semibold"},G=["disabled"],J={key:1},K={class:"mb-8"},Q={class:"mb-8 text-center border border-yellow-600 rounded-full p-0.5 w-fit mx-auto"},W=["disabled"],X={key:2},Y={class:"mb-4"},Z={class:"block mb-4"},$=["type"],ee={class:"block mb-4"},te=["type"],se={key:0,class:"mt-2 text-sm text-red-500"},oe={class:"block mb-4"},re={class:"mb-8"},le={class:"mb-8 text-center border border-yellow-600 rounded-full p-0.5 w-fit mx-auto"},ie=["disabled"],ae={class:"flex items-center justify-center text-sm my-4"};function ne(s,e,w,o,de,m){const _=c("Head"),d=c("InputError"),g=c("Link"),k=c("VueDatePicker"),V=c("AppLayout");return a(),f(U,null,[w.invitation_code?(a(),x(_,{key:0,description:"大赤字ガチャ大量排出中 新規ユーザーも爆アド報告多数",title:`今なら新規登録で${w.invited_bonus.toLocaleString()}ptもらえる!!`},null,8,["title"])):(a(),x(_,{key:1,title:"新規登録"})),l(V,null,{default:u(()=>[t("div",T,[e[23]||(e[23]=t("div",{class:"flex justify-center w-full"},[t("img",{src:"/images/register_badge.png",alt:"Register Badge",class:"w-full object-contain mt-2 md:mt-6 sm:mt-4 sm:mx-8 md:mx-12"})],-1)),t("div",I,[t("form",{onSubmit:e[8]||(e[8]=M((...r)=>m.submit&&m.submit(...r),["prevent"]))},[t("h2",N,"   "+A(s.step_titles[s.step_integer])+"  ",1),s.step_integer==0?(a(),f("div",H,[t("div",R,[e[9]||(e[9]=t("label",{for:"phone",class:"block text-base font-bold pl-2 mb-2"},[i("電話番号"),t("span",{class:"text-red-500 pl-1"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.phone=r),id:"phone",type:"tel",class:"w-full text-neutral-700 border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},null,512),[[h,o.form.phone]]),l(d,{class:"mt-2",message:o.form.errors.phone},null,8,["message"])]),t("div",q,[t("label",z,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=r=>s.termsAccepted=r),class:"w-5 h-5 rounded border-yellow-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,512),[[F,s.termsAccepted]]),t("span",O,[e[12]||(e[12]=i(" 本サービスの",-1)),l(g,{href:s.route("main.terms_conditions"),class:"underline underline-offset-4 text-neutral-600 hover:text-sky-500"},{default:u(()=>[...e[10]||(e[10]=[i("利用規約",-1)])]),_:1},8,["href"]),e[13]||(e[13]=i("及び",-1)),l(g,{href:s.route("main.privacy_police"),class:"underline underline-offset-4 text-neutral-600 hover:text-sky-500"},{default:u(()=>[...e[11]||(e[11]=[i("プライバシーポリシー",-1)])]),_:1},8,["href"]),e[14]||(e[14]=i("に同意した上で会員登録、認証を行います ",-1))])])]),t("button",{type:"submit",class:y([{"opacity-50":o.form.processing||!s.termsAccepted},"inline-block items-center mb-8 text-center border border-yellow-600 rounded-full p-0.5 w-fit mx-auto hover:scale-105"]),disabled:o.form.processing||!s.termsAccepted},[...e[15]||(e[15]=[t("div",{class:"inline-block items-center px-10 py-1 rounded-full font-semibold text-base text-white uppercase bg-theme bg-theme-hover"}," 認証へ進む ",-1)])],10,G)])):b("",!0),s.step_integer==1?(a(),f("div",J,[t("div",K,[e[16]||(e[16]=t("label",{for:"code",class:"block text-base font-bold pl-2 mb-2"},"smsに記載された4桁の認証コードを入力してください。",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.code=r),id:"code",type:"tel",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"認証コードを入力してください"},null,512),[[h,o.form.code]]),l(d,{class:"mt-2",message:o.form.errors.code},null,8,["message"])]),t("div",Q,[t("button",{type:"submit",class:y([{"opacity-50":o.form.processing},"inline-block items-center px-10 py-1 rounded-full font-semibold text-base text-white uppercase bg-theme bg-theme-hover"]),disabled:o.form.processing}," 次へ ",10,W)])])):b("",!0),s.step_integer==2?(a(),f("div",X,[t("div",Y,[e[17]||(e[17]=t("label",{for:"email",class:"block text-base font-bold pl-2 mb-2"},[i("メールアドレス"),t("span",{class:"text-red-500 pl-1"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.email=r),id:"email",type:"email",class:"text-neutral-700 h-10 w-full border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder:text-neutral-300"},null,512),[[h,o.form.email]]),l(d,{class:"mt-2",message:o.form.errors.email},null,8,["message"])]),t("div",Z,[e[18]||(e[18]=t("label",{for:"password",class:"block text-base font-bold pl-2 mb-2"},[i("パスワード"),t("span",{class:"text-red-500 pl-1"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.password=r),id:"password",type:s.passwordFieldType,class:"text-neutral-700 h-10 w-full border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder:text-neutral-300"},null,8,$),[[v,o.form.password]]),l(d,{class:"mt-2",message:o.form.errors.password},null,8,["message"])]),t("div",ee,[e[19]||(e[19]=t("label",{for:"password_confirmation",class:"block text-base font-bold pl-2 mb-2"},[i("パスワード（確認）"),t("span",{class:"text-red-500 pl-1"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.form.password_confirmation=r),id:"password_confirmation",type:s.passwordFieldType,class:"text-neutral-700 h-10 w-full border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder:text-neutral-300"},null,8,te),[[v,o.form.password_confirmation]]),l(d,{class:"mt-2",message:o.form.errors.password_confirmation},null,8,["message"]),m.passwordMismatch?(a(),f("div",se," パスワードが一致しません ")):b("",!0)]),t("div",oe,[e[20]||(e[20]=t("label",{for:"birthday",class:"block text-base font-bold pl-2 mb-2"},[i("生年月日"),t("span",{class:"text-red-500 pl-1"},"*")],-1)),l(k,{modelValue:o.form.birthday,"onUpdate:modelValue":e[6]||(e[6]=r=>o.form.birthday=r),"enable-time-picker":!1,format:"yyyy-MM-dd","max-date":new Date,"auto-apply":"",placeholder:"生年月日を選択してください",class:"w-full"},null,8,["modelValue","max-date"]),l(d,{class:"mt-2",message:o.form.errors.birthday},null,8,["message"])]),t("div",re,[e[21]||(e[21]=t("label",{for:"invite_code",class:"block text-base font-bold pl-2 mb-2",title:"あなたを招待した友達の招待コード"},"招待コード",-1)),n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>o.form.invite_code=r),id:"invite_code",type:"text",class:"text-neutral-700 h-10 w-full border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder:text-neutral-300",placeholder:"招待した友達の招待コードを入力します",autocomplete:"off"},null,512),[[h,o.form.invite_code]])]),t("div",le,[t("button",{type:"submit",class:y([{"opacity-50":o.form.processing||m.passwordMismatch},"inline-block items-center px-10 py-1 rounded-full font-semibold text-base text-white uppercase bg-theme bg-theme-hover"]),disabled:o.form.processing||m.passwordMismatch}," 登録 ",10,ie)])])):b("",!0),t("div",ae,[l(g,{href:s.route("login"),class:"underline underline-offset-4 text-neutral-600 hover:text-sky-500"},{default:u(()=>[...e[22]||(e[22]=[i("すでにアカウントをお持ちの方はこちら",-1)])]),_:1},8,["href"])])],32)])])]),_:1})],64)}const _e=P(S,[["render",ne]]);export{_e as default};
