import{p as P,l as J,o as a,w as l,a as u,b as t,u as m,d as g,e as x,c as n,F as _,f as h,i as f,t as r,n as v}from"./app-BYu5DXrm.js";import{A as C}from"./Admin-Dz8qJH0W.js";import{u as F}from"./useConfirm-VcIfKJOa.js";import{d as y}from"./index-BKZhcuEm.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"mx-auto"},B={class:"bg-white"},M={class:"p-3 md:p-6 bg-white"},A={class:"flex justify-between items-center mb-4"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"p-4"},H={class:"flex items-start justify-between mb-3"},I={class:"flex-1"},N={class:"text-lg font-semibold text-gray-900 mb-1"},E={class:"text-sm text-gray-600 mb-2"},U={class:"flex items-center space-x-4 text-sm"},O={class:"text-gray-700"},q={class:"text-gray-700"},G={class:"mt-2"},K={class:"flex flex-col"},Q=["title"],R=["src"],W={key:0,class:"border-t pt-3"},X=["onClick"],Y={class:"flex items-center space-x-2"},Z={class:"text-blue-600 font-medium"},tt={class:"flex items-center space-x-2"},et={class:"text-gray-500 text-xs"},st={key:0,class:"mt-3 space-y-2 max-h-48 overflow-y-auto"},ot=["onClick"],it={class:"flex items-center space-x-3"},rt={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},at={class:"text-xs font-medium text-gray-600"},nt={class:"text-sm font-medium text-gray-900"},dt={class:"text-xs text-gray-500"},ct={class:"flex justify-end space-x-2 mt-4 pt-3 border-t"},lt=["onClick"],ut={__name:"Index",props:{plans:Array},setup(b){const{confirm:w}=F(),d=P([]),p=s=>{const e=d.value.indexOf(s);e>-1?d.value.splice(e,1):d.value.push(s)},k=s=>{w("このプランを削除してもよろしいですか？").then(e=>{e&&y.Inertia.delete(route("admin.plans.destroy",s.id))})},j=s=>{y.Inertia.visit(route("admin.users.detail",{id:s}),{preserveScroll:!0,preserveState:!0})},D=s=>{if(!s.start_date&&!s.end_date)return"無制限";if(s.start_date&&s.end_date){const e=new Date(s.start_date),o=new Date(s.end_date),i=e.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),c=o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`${i} - ${c}`}if(s.start_date){const e=new Date(s.start_date);return`${e.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} から`}if(s.end_date){const e=new Date(s.end_date);return`${e.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} まで`}return"無制限"},L=s=>{if(!s.start_date&&!s.end_date)return"登録期間: 無制限";if(s.start_date&&s.end_date){const e=new Date(s.start_date),o=new Date(s.end_date),i=e.toLocaleDateString("ja-JP")+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),c=o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`登録期間: ${i} - ${c}`}if(s.start_date){const e=new Date(s.start_date);return`登録開始: ${e.toLocaleDateString("ja-JP")+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}if(s.end_date){const e=new Date(s.end_date);return`登録終了: ${e.toLocaleDateString("ja-JP")+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}return"登録期間: 無制限"},S=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"upcoming":return"bg-blue-100 text-blue-800";case"ended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return(s,e)=>(a(),J(C,null,{default:l(()=>[u(m(g.Head),{title:"プラン管理"}),t("div",null,[t("div",T,[t("div",B,[t("div",M,[t("div",A,[e[1]||(e[1]=t("h3",{class:"text-lg font-medium"},"プラン一覧",-1)),u(m(g.Link),{href:s.route("admin.plans.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:l(()=>[...e[0]||(e[0]=[x(" 新規プラン作成 ",-1)])]),_:1},8,["href"])]),t("div",V,[(a(!0),n(_,null,h(b.plans,o=>(a(),n("div",{key:o.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[t("div",z,[t("div",H,[t("div",I,[t("h4",N,r(o.name),1),t("p",E,r(o.description),1),t("div",U,[t("span",O,"¥"+r(o.amount.toLocaleString()),1),t("span",q,r(o.point.toLocaleString())+" pt",1)]),t("div",G,[t("div",K,[e[2]||(e[2]=t("span",{class:"text-xs text-gray-500 mb-1"},"登録期間",-1)),t("span",{class:v([S(o.status),"px-2 py-1 text-xs font-medium rounded-full inline-block max-w-full truncate"]),title:L(o)},r(D(o)),11,Q)])])]),t("img",{src:o.image,class:"w-20 h-16 object-contain ml-3"},null,8,R)]),o.users&&o.users.length>0?(a(),n("div",W,[t("button",{onClick:i=>p(o.id),class:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 p-2 rounded-lg hover:bg-gray-50 transition-colors duration-200"},[t("div",Y,[e[3]||(e[3]=t("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),t("span",Z,r(o.users?o.users.length:0)+" 名の購読者",1)]),t("div",tt,[t("span",et,r(d.value.includes(o.id)?"一覧を閉じる":"一覧を表示"),1),(a(),n("svg",{class:v(["w-4 h-4 transition-transform duration-200 text-gray-400",{"rotate-180":d.value.includes(o.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,X),d.value.includes(o.id)?(a(),n("div",st,[(a(!0),n(_,null,h(o.users,i=>(a(),n("div",{key:i.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200 border border-gray-200",onClick:c=>j(i.id)},[t("div",it,[t("div",rt,[t("span",at,r(i.name?i.name.charAt(0):"U"),1)]),t("div",null,[t("p",nt,r(i.name||"名前なし"),1),t("p",dt,r(i.email),1)])])],8,ot))),128))])):f("",!0)])):f("",!0),t("div",ct,[u(m(g.Link),{href:s.route("admin.plans.edit",o.id),class:"flex items-center px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-md"},{default:l(()=>[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" 編集 ",-1)])]),_:1},8,["href"]),t("button",{onClick:i=>k(o),class:"flex items-center px-3 py-2 text-sm font-medium text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x(" 削除 ",-1)])],8,lt)])])]))),128))])])])])])]),_:1}))}},ft=$(ut,[["__scopeId","data-v-dc920de6"]]);export{ft as default};
