import{d as b,p as f,q as L,l as T,o as i,w as x,a as v,b as s,u as o,h as q,c as a,i as n,j as p,e as m,k,t as u,v as g}from"./app-Bu09xE1P.js";import{A as C}from"./Admin-DTP_k4Ys.js";import{s as N}from"./vue-multiselect-DsBynqTi.js";import"./useConfirm-BNi5hOII.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"py-2"},S={class:"max-w-7xl mx-auto sm:px-0 lg:px-2"},j={class:"bg-white"},M={class:"p-6 text-gray-900"},A={key:0,class:"text-red-500 text-sm mt-1"},D={key:0,class:"text-red-500 text-sm mt-1"},E={key:0,class:"text-red-500 text-sm mt-1"},F={class:"text-center w-full"},I=["src"],O={key:0,class:"text-red-500 text-sm mt-1"},P={key:0,class:"border p-4 rounded-lg bg-gray-50"},R={key:0,class:"text-red-500 text-sm mt-1"},H={key:1,class:"border p-4 rounded-lg bg-gray-50"},z={key:0,class:"text-red-500 text-sm mt-1"},G={key:2,class:"border p-4 rounded-lg bg-gray-50"},J={key:0,class:"text-red-500 text-sm mt-1"},K={key:0,class:"text-red-500 text-sm mt-1"},Q={class:"flex items-center justify-end space-x-4"},W=["disabled"],st={__name:"Create",setup(X){const e=b.useForm({type:"",name:"",description:"",image:null,status:1,meta:{}}),c=f(null),_=f(null),d=f([]),w=()=>{e.meta={},e.type==="point_lottery"?(e.meta={points:[]},d.value=[]):e.type==="point_discount"||e.type==="purchase_discount"?e.meta={discount_percentage:10}:e.type==="chip_card"?e.meta={point_amount:1e3}:d.value=[]},y=()=>{e.type==="point_lottery"&&(e.meta.points=d.value.map(l=>l.value))},V=l=>{l=parseInt(l),l&&l>0&&!d.value.find(t=>t.value===l)&&(d.value.push({label:Number(l).toLocaleString(),value:l}),d.value.sort((t,r)=>t.value-r.value),y())};L(()=>d.value,()=>{y()},{deep:!0});const h=l=>{const t=l.target.files[0];t&&(c.value=URL.createObjectURL(t),e.image=t)},U=()=>{e.type==="point_lottery"&&y(),e.post(route("admin.items.store"))};return(l,t)=>(i(),T(C,null,{default:x(()=>[v(o(b.Head),null,{default:x(()=>[...t[7]||(t[7]=[s("title",null,"アイテム作成",-1)])]),_:1}),s("div",B,[s("div",S,[s("div",j,[s("div",M,[s("form",{onSubmit:q(U,["prevent"]),class:"space-y-6"},[s("div",null,[t[9]||(t[9]=s("label",{for:"type",class:"block text-sm font-medium text-gray-700"},[m(" アイテムタイプ "),s("span",{class:"text-red-500"},"*")],-1)),p(s("select",{id:"type","onUpdate:modelValue":t[0]||(t[0]=r=>o(e).type=r),onChange:w,placeholder:"選択してください",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},[...t[8]||(t[8]=[s("option",{value:"gacha_ticket"},"ガチャチケット",-1),s("option",{value:"point_lottery"},"ポイント抽選",-1)])],544),[[k,o(e).type]]),o(e).errors.type?(i(),a("div",A,u(o(e).errors.type),1)):n("",!0)]),s("div",null,[t[10]||(t[10]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},[m(" アイテム名 "),s("span",{class:"text-red-500"},"*")],-1)),p(s("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=r=>o(e).name=r),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[g,o(e).name]]),o(e).errors.name?(i(),a("div",D,u(o(e).errors.name),1)):n("",!0)]),s("div",null,[t[11]||(t[11]=s("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," 説明 ",-1)),p(s("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=r=>o(e).description=r),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,o(e).description]]),o(e).errors.description?(i(),a("div",E,u(o(e).errors.description),1)):n("",!0)]),s("div",null,[t[12]||(t[12]=s("label",{for:"image",class:"block text-sm font-medium text-gray-700"}," アイテム画像 ",-1)),s("div",F,[c.value?(i(),a("img",{key:0,src:c.value,class:"inline-block mt-4 h-52"},null,8,I)):n("",!0)]),s("input",{id:"image",type:"file",onChange:h,ref_key:"image",ref:_,accept:"image/*",class:"mt-1 block w-full border-gray-300"},null,544),o(e).errors.image?(i(),a("div",O,u(o(e).errors.image),1)):n("",!0)]),o(e).type==="point_lottery"?(i(),a("div",P,[t[14]||(t[14]=s("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ポイント抽選設定",-1)),s("div",null,[t[13]||(t[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" 抽選ポイント (複数設定可能) "),s("span",{class:"text-red-500"},"*")],-1)),v(o(N),{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=r=>d.value=r),"tag-placeholder":"",placeholder:"ポイント数を入力",showNoOptions:!1,options:[],multiple:!0,taggable:!0,label:"label","track-by":"value",onTag:V},null,8,["modelValue"]),o(e).errors["meta.points"]?(i(),a("div",R,u(o(e).errors["meta.points"]),1)):n("",!0)])])):n("",!0),o(e).type==="point_discount"||o(e).type==="purchase_discount"?(i(),a("div",H,[t[16]||(t[16]=s("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"割引設定",-1)),s("div",null,[t[15]||(t[15]=s("label",{for:"discount_percentage",class:"block text-sm font-medium text-gray-700"},[m(" 割引率 (%) "),s("span",{class:"text-red-500"},"*")],-1)),p(s("input",{id:"discount_percentage","onUpdate:modelValue":t[4]||(t[4]=r=>o(e).meta.discount_percentage=r),type:"number",min:"1",max:"100",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[g,o(e).meta.discount_percentage]]),o(e).errors["meta.discount_percentage"]?(i(),a("div",z,u(o(e).errors["meta.discount_percentage"]),1)):n("",!0)])])):n("",!0),o(e).type==="chip_card"?(i(),a("div",G,[t[18]||(t[18]=s("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"チップカード設定",-1)),s("div",null,[t[17]||(t[17]=s("label",{for:"point_amount",class:"block text-sm font-medium text-gray-700"},[m(" ポイント数 "),s("span",{class:"text-red-500"},"*")],-1)),p(s("input",{id:"point_amount","onUpdate:modelValue":t[5]||(t[5]=r=>o(e).meta.point_amount=r),type:"number",min:"1",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[g,o(e).meta.point_amount]]),o(e).errors["meta.point_amount"]?(i(),a("div",J,u(o(e).errors["meta.point_amount"]),1)):n("",!0)])])):n("",!0),s("div",null,[t[20]||(t[20]=s("label",{for:"status",class:"block text-sm font-medium text-gray-700"},[m(" ステータス "),s("span",{class:"text-red-500"},"*")],-1)),p(s("select",{id:"status","onUpdate:modelValue":t[6]||(t[6]=r=>o(e).status=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},[...t[19]||(t[19]=[s("option",{value:1},"有効",-1),s("option",{value:0},"無効",-1)])],512),[[k,o(e).status]]),o(e).errors.status?(i(),a("div",K,u(o(e).errors.status),1)):n("",!0)]),s("div",Q,[v(o(b.Link),{href:l.route("admin.items.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:x(()=>[...t[21]||(t[21]=[m(" キャンセル ",-1)])]),_:1},8,["href"]),s("button",{type:"submit",disabled:o(e).processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},u(o(e).processing?"作成中...":"作成"),9,W)])],32)])])])])]),_:1}))}};export{st as default};
