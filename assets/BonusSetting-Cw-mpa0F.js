import{d as x,r as h,c as a,o,a as y,w as c,b as e,F as f,f as w,j as d,v as p,k as v,l as V,i as _,t as u,e as S}from"./app-lJilX7J2.js";import{U as I}from"./UserLayout-B4AXm_q1.js";import{s as L}from"./vue-multiselect-CpBu4U01.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as M}from"./XMarkIcon-WFwGDp7X.js";import"./useConfirm-C51xXyxl.js";import"./index-DHdg26la.js";const B={components:{Head:x.Head,AppLayout:I,Link:x.Link,XMarkIcon:M,Multiselect:L},props:{bonus:Object,items:Array},data(){return{daily_bonus:[],weekly_bonus:[],monthly_bonus:[]}},mounted(){this.daily_bonus=this.bonus.filter(n=>n.period=="daily"),this.weekly_bonus=this.bonus.filter(n=>n.period=="weekly"),this.monthly_bonus=this.bonus.filter(n=>n.period=="monthly")},methods:{format_number(n){return String(n).replace(/(.)(?=(\d{3})+$)/g,"$1,")},getItemTypeText(n){return{gacha_ticket:"ガチャチケット",point_lottery:"ポイント抽選",rank_double:"ランクアップ2倍",point_discount:"ポイント購入割引",daily_reset:"日次リセット",hidden_gacha_key:"隠しガチャ鍵",chip_card:"チップカード",purchase_discount:"購入割引チケット"}[n]||n},getSelectedItem(n){return n&&this.items.find(s=>s.id==n)||null},onItemSelected(n,s){s?n.value=s.id:n.value=""},add_item(n){let s=n=="daily"?this.daily_bonus:n=="weekly"?this.weekly_bonus:this.monthly_bonus,i={period:n,type:"point",value:"",rank:s.length+1};s.push(i)},save_bonus_setting(){x.useForm({bonus:[...this.daily_bonus,...this.weekly_bonus,...this.monthly_bonus]}).post(route("admin.ranking.bonus_update"),{preserveScroll:!0})}},setup(n){let s={};return{form:x.useForm(s)}}},A={class:"h-full flex flex-col px-4 md:px-8 pb-10 md:items-center text-sm md:text-base"},F={class:"w-full"},H={class:"leading-8"},N={class:"w-1/4"},q=["onUpdate:modelValue"],R={class:""},X=["onUpdate:modelValue"],D={class:"font-bold"},E=["onUpdate:modelValue"],O={class:"flex items-center gap-3 py-2"},z=["src","alt"],G={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},J={key:2,class:"flex-1"},K={class:"font-medium text-sm text-gray-900"},P={class:"text-xs text-gray-500"},Q={key:0,class:"flex items-center gap-3"},W=["src","alt"],Y={key:1,class:"w-8 h-8 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Z={class:"font-medium text-sm"},$={class:"w-full"},ee={class:"text-sm leading-8"},te={class:"w-1/4"},se=["onUpdate:modelValue"],le={class:""},oe=["onUpdate:modelValue"],ae={class:"font-bold"},ne=["onUpdate:modelValue"],re={class:"flex items-center gap-3 py-2"},de=["src","alt"],ue={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},ce={key:2,class:"flex-1"},ie={class:"font-medium text-sm text-gray-900"},me={class:"text-xs text-gray-500"},ye={key:0,class:"flex items-center gap-3"},pe=["src","alt"],_e={key:1,class:"w-8 h-8 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},be={class:"font-medium text-sm"},he={class:"w-full"},xe={class:"text-sm leading-8"},fe={class:"w-1/4"},ge=["onUpdate:modelValue"],ke={class:""},we=["onUpdate:modelValue"],ve={class:"font-bold"},Ve=["onUpdate:modelValue"],Ue={class:"flex items-center gap-3 py-2"},je=["src","alt"],Ce={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Se={key:2,class:"flex-1"},Ie={class:"font-medium text-sm text-gray-900"},Le={class:"text-xs text-gray-500"},Te={key:0,class:"flex items-center gap-3"},Me=["src","alt"],Be={key:1,class:"w-8 h-8 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},Ae={class:"font-medium text-sm"},Fe={class:"sticky bottom-6 w-full flex gap-2 justify-center"};function He(n,s,i,Ne,m,r){const U=h("Head"),g=h("multiselect"),k=h("XMarkIcon"),j=h("Link"),C=h("AppLayout");return o(),a(f,null,[y(U,{title:"ランキング報酬管理"}),y(C,null,{default:c(()=>[e("div",A,[s[11]||(s[11]=e("div",{class:"pt-4 pb-4"},[e("h1",{class:"md:text-center md:text-lg font-bold"},"ランキング報酬管理")],-1)),s[12]||(s[12]=e("hr",{class:"w-full mb-2"},null,-1)),s[13]||(s[13]=e("div",{class:"w-full flex flex-wrap justify-between items-center"},[e("h1",{class:"px-2 py-2 text-base font-bold"},"日次ランキング")],-1)),e("table",F,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",{class:"border px-1 py-1"},"ランク"),e("th",{class:"border px-1 py-1"},"種類"),e("th",{class:"border px-1 py-1"},"ボーナス")])],-1)),e("tbody",H,[(o(!0),a(f,null,w(m.daily_bonus,(l,b)=>(o(),a("tr",null,[e("td",N,[d(e("input",{type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.rank=t,required:""},null,8,q),[[p,l.rank]])]),e("td",R,[d(e("select",{"onUpdate:modelValue":t=>l.type=t,class:"h-8 py-0 w-full border-sky-200"},[...s[4]||(s[4]=[e("option",{value:"point",class:"py-0"},"ポイント",-1),e("option",{value:"item",class:"py-0"},"アイテム",-1)])],8,X),[[v,l.type]])]),e("td",D,[l.type==="point"?d((o(),a("input",{key:0,type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.value=t,placeholder:"ポイント数"},null,8,E)),[[p,l.value]]):(o(),V(g,{key:1,"model-value":r.getSelectedItem(l.value),options:i.items,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"選択してください","allow-empty":!0,noResult:"該当するアイテムが見つかりません",class:"w-full","onUpdate:modelValue":t=>r.onItemSelected(l,t)},{option:c(({option:t})=>[e("div",O,[t&&t.image?(o(),a("img",{key:0,src:t.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:t.name},null,8,z)):(o(),a("span",G," 画像なし ")),t?(o(),a("div",J,[e("div",K,u(t.name),1),e("div",P,u(r.getItemTypeText(t.type)),1)])):_("",!0)])]),singleLabel:c(({option:t})=>[t?(o(),a("div",Q,[t.image?(o(),a("img",{key:0,src:t.image,class:"w-8 h-8 object-contain border border-gray-200 rounded",alt:t.name},null,8,W)):(o(),a("span",Y," - ")),e("span",Z,u(t.name),1)])):_("",!0)]),_:1},8,["model-value","options","onUpdate:modelValue"]))]),e("td",null,[y(k,{class:"h-5 w-5 mx-1",onClick:t=>m.daily_bonus.splice(b,1)},null,8,["onClick"])])]))),256))])]),e("button",{class:"my-2 px-6 py-1 rounded-md bg-neutral-600 hover:bg-neutral-500 text-white text-sm",onClick:s[0]||(s[0]=l=>r.add_item("daily"))},"追加"),s[14]||(s[14]=e("div",{class:"pt-10 w-full flex flex-wrap justify-between items-center"},[e("h1",{class:"px-2 py-2 text-base font-bold"},"週次ランキング")],-1)),e("table",$,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",{class:"border px-1 py-1"},"ランク"),e("th",{class:"border px-1 py-1"},"種類"),e("th",{class:"border px-1 py-1"},"ボーナス")])],-1)),e("tbody",ee,[(o(!0),a(f,null,w(m.weekly_bonus,(l,b)=>(o(),a("tr",null,[e("td",te,[d(e("input",{type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.rank=t,required:""},null,8,se),[[p,l.rank]])]),e("td",le,[d(e("select",{"onUpdate:modelValue":t=>l.type=t,class:"h-8 py-0 w-full border-sky-200"},[...s[6]||(s[6]=[e("option",{value:"point",class:"py-0"},"ポイント",-1),e("option",{value:"item",class:"py-0"},"アイテム",-1)])],8,oe),[[v,l.type]])]),e("td",ae,[l.type==="point"?d((o(),a("input",{key:0,type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.value=t,placeholder:"ポイント数"},null,8,ne)),[[p,l.value]]):(o(),V(g,{key:1,"model-value":r.getSelectedItem(l.value),options:i.items,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"選択してください","allow-empty":!0,noResult:"該当するアイテムが見つかりません",class:"w-full","onUpdate:modelValue":t=>r.onItemSelected(l,t)},{option:c(({option:t})=>[e("div",re,[t&&t.image?(o(),a("img",{key:0,src:t.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:t.name},null,8,de)):(o(),a("span",ue," 画像なし ")),t?(o(),a("div",ce,[e("div",ie,u(t.name),1),e("div",me,u(r.getItemTypeText(t.type)),1)])):_("",!0)])]),singleLabel:c(({option:t})=>[t?(o(),a("div",ye,[t.image?(o(),a("img",{key:0,src:t.image,class:"w-8 h-8 object-contain border border-gray-200 rounded",alt:t.name},null,8,pe)):(o(),a("span",_e," - ")),e("span",be,u(t.name),1)])):_("",!0)]),_:1},8,["model-value","options","onUpdate:modelValue"]))]),e("td",null,[y(k,{class:"h-5 w-5 mx-1",onClick:t=>m.weekly_bonus.splice(b,1)},null,8,["onClick"])])]))),256))])]),e("button",{class:"my-2 px-6 py-1 rounded-md bg-neutral-600 hover:bg-neutral-500 text-white text-sm",onClick:s[1]||(s[1]=l=>r.add_item("weekly"))},"追加"),s[15]||(s[15]=e("div",{class:"pt-10 w-full flex flex-wrap justify-between items-center"},[e("h1",{class:"px-2 py-2 text-base font-bold"},"月次ランキング")],-1)),e("table",he,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",{class:"border px-1 py-1"},"ランク"),e("th",{class:"border px-1 py-1"},"種類"),e("th",{class:"border px-1 py-1"},"ボーナス")])],-1)),e("tbody",xe,[(o(!0),a(f,null,w(m.monthly_bonus,(l,b)=>(o(),a("tr",null,[e("td",fe,[d(e("input",{type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.rank=t,required:""},null,8,ge),[[p,l.rank]])]),e("td",ke,[d(e("select",{"onUpdate:modelValue":t=>l.type=t,class:"h-8 py-0 w-full border-sky-200"},[...s[8]||(s[8]=[e("option",{value:"point",class:"py-0"},"ポイント",-1),e("option",{value:"item",class:"py-0"},"アイテム",-1)])],8,we),[[v,l.type]])]),e("td",ve,[l.type==="point"?d((o(),a("input",{key:0,type:"text",class:"w-full border-sky-200 h-8","onUpdate:modelValue":t=>l.value=t,placeholder:"ポイント数"},null,8,Ve)),[[p,l.value]]):(o(),V(g,{key:1,"model-value":r.getSelectedItem(l.value),options:i.items,label:"name","track-by":"id",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"選択してください","allow-empty":!0,noResult:"該当するアイテムが見つかりません",class:"w-full","onUpdate:modelValue":t=>r.onItemSelected(l,t)},{option:c(({option:t})=>[e("div",Ue,[t&&t.image?(o(),a("img",{key:0,src:t.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:t.name},null,8,je)):(o(),a("span",Ce," 画像なし ")),t?(o(),a("div",Se,[e("div",Ie,u(t.name),1),e("div",Le,u(r.getItemTypeText(t.type)),1)])):_("",!0)])]),singleLabel:c(({option:t})=>[t?(o(),a("div",Te,[t.image?(o(),a("img",{key:0,src:t.image,class:"w-8 h-8 object-contain border border-gray-200 rounded",alt:t.name},null,8,Me)):(o(),a("span",Be," - ")),e("span",Ae,u(t.name),1)])):_("",!0)]),_:1},8,["model-value","options","onUpdate:modelValue"]))]),e("td",null,[y(k,{class:"h-5 w-5 mx-1",onClick:t=>m.monthly_bonus.splice(b,1)},null,8,["onClick"])])]))),256))])]),e("button",{class:"my-2 px-6 py-1 rounded-md bg-neutral-600 hover:bg-neutral-500 text-white text-sm",onClick:s[2]||(s[2]=l=>r.add_item("monthly"))},"追加"),e("div",Fe,[e("button",{class:"mt-8 px-12 py-2 rounded-md bg-sky-600 hover:bg-sky-500 text-white text-sm",onClick:s[3]||(s[3]=(...l)=>r.save_bonus_setting&&r.save_bonus_setting(...l))},"保存"),y(j,{href:n.route("ranking.about"),class:"mt-8 px-12 py-2 rounded-md bg-rose-600 hover:bg-rose-500 text-white text-sm"},{default:c(()=>[...s[10]||(s[10]=[S("戻る",-1)])]),_:1},8,["href"])])])]),_:1})],64)}const Ge=T(B,[["render",He]]);export{Ge as default};
