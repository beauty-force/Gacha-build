import{d as b,r as p,c as a,o as i,a as _,w as v,i as m,b as t,F as f,f as g,l as C,n as h,e as c,t as s,j,v as N}from"./app-BZZ3I4qG.js";import{A as S}from"./Admin-D6BXAJGg.js";import{P as T,r as F}from"./Pagination-CRn80wLk.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as I,a as O}from"./useConfirm-DV5NN04W.js";/* empty css            */const V={components:{Head:b.Head,AppLayout:S,Link:b.Link,ChevronLeftIcon:O,ChevronRightIcon:I,EllipsisHorizontalIcon:F,Pagination:T},props:{errors:Object,gacha:Object,category_share:Object,products:Object,search_cond:Object,total:Number,totalPoints:Number,totalProducts:Number,searchProducts:Number,searchPoints:Number},data(){return{main_tab:[{title:"発送依頼中",route_url:route("admin.delivery"),is_active:!1},{title:"発送済み",route_url:route("admin.delivery.completed"),is_active:!0},{title:"取得済み",route_url:route("admin.delivery.acquired"),is_active:!1}],page_step:0,is_busy:!1,profile:{},product:{},user:{}}},setup(r){let e={},n;for(n=0;n<r.products.data.length;n++)e["id"+r.products.data[n].id]=!1;const d=b.useForm(r.search_cond);return{form:b.useForm({id:0}),form_search:d}},methods:{showProductDetail(r){this.is_busy=!0;const e={id:r.id};axios.post(route("admin.delivery.product_data"),e).then(n=>{(n.status==201||n.status==200)&&n.data.status&&(this.profile=n.data.profile,this.user=n.data.user,this.product=r,this.page_step=1),this.is_busy=!1}).catch(n=>{this.is_busy=!0,console.log(n)})},backToList(){this.page_step=0},submit(r){this.form.id=r,this.form.post(route("admin.delivery.un_delivery"),{onFinish:()=>{this.page_step=0}})},search(){this.form_search.get(route("admin.delivery.completed"))}}},A={key:0,class:"pt-2 md:px-6 px-4 mb-6"},B={class:"w-full text-neutral-400 mb-3"},D={class:"mb-2 flex justify-between items-center text-sm"},E={class:"flex items-center gap-2 w-full flex-wrap mb-2 py-2 justify-between text-sm"},R={class:"flex items-center gap-2 flex-1"},z={class:"mb-6"},q={class:"mb-0 border-neutral-200 border-b py-1"},M=["onClick"],U={class:"relative"},G=["src"],J={key:0},K=["src"],Q={class:"cursor-pointer min-h-24 flex items-center justify-between flex-1 text-xs py-1 px-2"},W={class:"text-left"},X={class:"font-bold text-base"},Y={class:"text-red-500"},Z={class:"text-neutral-300"},$={key:1,class:"pt-6 md:px-6 px-4 mb-6"},tt={class:"mb-6"},et={class:"flex border-neutral-200 items-center w-full"},st=["src"],ot={class:"cursor-pointer min-h-20 flex items-center justify-between flex-1 text-xs py-1 px-2"},lt={class:"text-left"},nt={class:"text-red-500"},rt={class:"w-full mb-6"},it={class:"w-full text-sm"},dt={class:"p-1 w-3/5"},at={class:"p-1 w-3/5"},ct={class:"p-1 w-3/5"},ut={class:"p-1 w-3/5"},pt={class:"p-1 w-3/5"},bt={class:"p-1 w-3/5"},_t={class:"p-1 w-3/5"},mt={class:"p-1 w-3/5"},ft={class:"mb-6 w-full text-center"},ht=["disabled"],vt=["disabled"];function gt(r,e,n,d,o,u){const x=p("Head"),w=p("Link"),y=p("ChevronRightIcon"),k=p("Pagination"),L=p("AppLayout");return i(),a(f,null,[_(x,{title:"配送商品"}),_(L,null,{default:v(()=>[o.page_step==0?(i(),a("div",A,[t("div",B,[(i(!0),a(f,null,g(o.main_tab,(l,P)=>(i(),C(w,{href:l.route_url,class:h(["inline-block px-4 py-1.5",{"border-b-2 border-red-600 text-red-600":l.is_active}])},{default:v(()=>[c(s(l.title),1)]),_:2},1032,["href","class"]))),256))]),t("div",D,[t("p",null,[c(" 総商品数: "+s(n.totalProducts.toLocaleString())+" 件",1),e[4]||(e[4]=t("br",null,null,-1)),c(" 総ポイント: "+s(n.totalPoints.toLocaleString())+" PT ",1)]),t("p",null,[c(" 検索商品数: "+s(n.searchProducts.toLocaleString())+" 件",1),e[5]||(e[5]=t("br",null,null,-1)),c(" 検索ポイント: "+s(n.searchPoints.toLocaleString())+" PT ",1)])]),t("div",E,[t("div",R,[j(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.form_search.name=l),type:"text",placeholder:"名前、メール、電話番号、追跡番号",class:"h-9 flex-1 w-0 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},null,512),[[N,d.form_search.name]])]),t("button",{type:"button",onClick:e[1]||(e[1]=(...l)=>u.search&&u.search(...l)),class:"rounded-md border bg-neutral-600 text-white px-4 py-2"},"検索")]),t("div",z,[(i(!0),a(f,null,g(n.products.data,(l,P)=>(i(),a("div",q,[t("button",{onClick:xt=>u.showProductDetail(l),class:"flex border-neutral-200 items-center w-full"},[t("div",U,[t("img",{src:l.image,class:"w-20 h-24 inline-block object-contain"},null,8,G),l.black_case?(i(),a("div",J,[t("img",{src:l.black_case,class:"w-6 h-6 inline-block object-contain absolute bottom-0 right-0"},null,8,K)])):m("",!0)]),t("div",Q,[t("div",W,[t("div",X,s(l.name),1),t("div",null,s(l.gacha_title),1),t("div",null,[t("span",Y,s(l.point.toLocaleString())+"pt",1),c(" ("+s(l.rare)+")",1)]),t("div",null,s(l.updated_at),1),t("div",null,s(l.address),1),t("div",null,"追跡番号: "+s(l.tracking_number),1)]),t("div",Z,[_(y,{class:"w-5"})])])],8,M)]))),256))]),_(k,{search_cond:n.search_cond,route_name:"admin.delivery.completed",total:n.total},null,8,["search_cond","total"])])):m("",!0),o.page_step==1?(i(),a("div",$,[e[14]||(e[14]=t("h2",{class:"mb-2 text-lg font-bold"},"配送済み商品詳細",-1)),e[15]||(e[15]=t("hr",{class:"mb-3"},null,-1)),t("div",tt,[t("div",et,[t("img",{src:o.product.image,class:"w-20 h-20 inline-block object-contain"},null,8,st),t("div",ot,[t("div",lt,[t("div",null,s(o.product.name),1),t("div",null,[t("span",nt,s(o.product.point.toLocaleString())+"pt",1),c(" ("+s(o.product.rare)+")",1)]),t("div",null,s(o.product.updated_at),1),t("div",null,s(o.product.address),1),t("div",null,"追跡番号: "+s(o.product.tracking_number),1)])])])]),e[16]||(e[16]=t("div",{class:"mb-1 text-base font-semibold"},"配送先情報",-1)),e[17]||(e[17]=t("hr",{class:"mb-3"},null,-1)),t("div",rt,[t("table",it,[t("tr",null,[e[6]||(e[6]=t("td",{class:"p-1 w-2/5 font-bold"},"アドレス",-1)),t("td",dt,s(o.user.email),1)]),o.profile?(i(),a(f,{key:0},[t("tr",null,[e[7]||(e[7]=t("td",{class:"p-1 w-2/5 font-bold"},"名前",-1)),t("td",at,s(o.profile.first_name)+" "+s(o.profile.last_name),1)]),t("tr",null,[e[8]||(e[8]=t("td",{class:"p-1 w-2/5 font-bold"},"名前(カナ)",-1)),t("td",ct,s(o.profile.first_name_gana)+" "+s(o.profile.last_name_gana),1)]),t("tr",null,[e[9]||(e[9]=t("td",{class:"p-1 w-2/5 font-bold"},"郵便番号",-1)),t("td",ut,s(o.profile.postal_code),1)]),t("tr",null,[e[10]||(e[10]=t("td",{class:"p-1 w-2/5 font-bold"},"都道府県",-1)),t("td",pt,s(o.profile.prefecture),1)]),t("tr",null,[e[11]||(e[11]=t("td",{class:"p-1 w-2/5 font-bold"},"住所",-1)),t("td",bt,s(o.profile.city)+s(o.profile.street)+"　"+s(o.profile.building),1)]),t("tr",null,[e[12]||(e[12]=t("td",{class:"p-1 w-2/5 font-bold"},"電話番号",-1)),t("td",_t,s(o.profile.phone),1)]),t("tr",null,[e[13]||(e[13]=t("td",{class:"p-1 w-2/5 font-bold"},"電話番号",-1)),t("td",mt,s(o.profile.phone),1)])],64)):m("",!0)])]),t("div",ft,[t("button",{type:"button",onClick:e[2]||(e[2]=l=>u.backToList()),class:h([{"opacity-25":d.form.processing},"inline-block items-center px-8 py-2.5 bg-neutral-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:d.form.processing}," リストへ ",10,ht),t("button",{type:"button",onClick:e[3]||(e[3]=l=>u.submit(o.product.id)),class:h([{"opacity-25":d.form.processing},"inline-block items-center px-8 py-2.5 bg-neutral-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:d.form.processing}," 未発送に戻す ",10,vt)])])):m("",!0)]),_:1})],64)}const jt=H(V,[["render",gt]]);export{jt as default};
