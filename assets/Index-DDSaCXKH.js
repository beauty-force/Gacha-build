import{d as l,r as i,c,o as p,a as u,w as y,b as e,e as m,t as a,j as f,v as g,k as v,F as _,f as k}from"./app-DpQfGHc-.js";import{A as C}from"./Admin-B1wTZYRG.js";import{P as S}from"./Pagination-CcwddtdI.js";import{G as j}from"./GachaCard-Bxqm6VkF.js";import{u as L}from"./useConfirm-C9zNtL-J.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-Dlznyn2H.js";import"./GachaButtons-DJ4yFUt9.js";import"./PlayIcon-wLgzFTGt.js";const{confirm:x}=L(),F={components:{Head:l.Head,AppLayout:C,Link:l.Link,GachaCard:j,Pagination:S},props:{errors:Object,users:Object,search_cond:Object,total:Number,total_point:Number},mounted(){},methods:{search(){this.form_search.get(route("admin.users"))},go_detail(r){this.$inertia.visit(route("admin.users.detail",{id:r}),{preserveScroll:!0,preserveState:!0})},updateStatus(r,t){t==0?x("アカウントをブロックしますか？","獲得した商品と発送依頼中の商品は全て回収されます。","warning").then(s=>{s&&l.useForm({id:r,status:t}).post(route("admin.users.update"))}):x("アカウントを承認しますか？").then(s=>{s&&l.useForm({id:r,status:t}).post(route("admin.users.update"))})},format_number(r){return r==null?0:String(r).replace(/(.)(?=(\d{3})+$)/g,"$1,")}},setup(r){return{form_search:l.useForm(r.search_cond)}}},N={class:"md:px-4 px-2"},P={class:"border-b w-full p-2 my-2 font-semibold flex justify-between flex-wrap items-center gap-3"},A={class:"font-normal flex gap-2"},H={class:"font-bold"},B=["href"],O={class:"w-full flex flex-col gap-4 mb-8"},T={class:"w-full flex justify-between gap-4"},D={class:"flex-1 flex flex-wrap gap-2"},E={class:"flex gap-2"},G={class:"w-full overflow-auto"},M={class:"min-w-full"},U={class:"text-sm"},I=["onClick"],q={class:"text-center py-3 px-1"},z={class:"text-center py-3 px-1 text-red-600 text-nowrap"},J={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},K={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},Q={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"};function R(r,t,s,d,W,n){const h=i("Head"),b=i("Pagination"),w=i("AppLayout");return p(),c(_,null,[u(h,{title:"ユーザー管理"}),u(w,null,{default:y(()=>[e("div",N,[e("div",P,[t[5]||(t[5]=e("h3",null,"ユーザー管理",-1)),e("span",A,[t[3]||(t[3]=m("合計ポイント: ",-1)),e("span",H,a(n.format_number(s.total_point)),1),t[4]||(t[4]=m("PT",-1))]),e("a",{href:r.route("admin.users.export"),class:"rounded-md border bg-green-600 text-white px-4 py-1 hover:bg-green-700 text-sm"},"CSVエクスポート",8,B)]),e("div",O,[e("div",T,[e("div",D,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d.form_search.keyword=o),type:"text",class:"text-sm flex-1 md:min-w-96 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"ユーザー名、メールアドレス、電話番号を入力します。"},null,512),[[g,d.form_search.keyword]]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.form_search.order_by=o),id:"order_by",class:"bg-white/90 flex-1 px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400"},[...t[6]||(t[6]=[e("option",{value:"amount"},"購入金額",-1),e("option",{value:"rank"},"ランク",-1),e("option",{value:"status"},"状態",-1)])],512),[[v,d.form_search.order_by]])]),e("div",E,[e("button",{type:"button",onClick:t[2]||(t[2]=(...o)=>n.search&&n.search(...o)),class:"rounded-md border bg-neutral-600 text-white px-4 py-1"},"検索")])]),e("div",G,[e("table",M,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-collapse border-yellow-100 whitespace-nowrap"},[e("th",{class:"text-center py-2"},"名前"),e("th",{class:"text-center py-2"},"ユーザー名"),e("th",{class:"text-center py-2"},"電話番号"),e("th",{class:"text-center py-2"},"購入金額"),e("th",{class:"text-center py-2"},"ランク")])],-1)),e("tbody",U,[(p(!0),c(_,null,k(s.users,o=>(p(),c("tr",{class:"border border-yellow-100 divide-x-2 divide-sky-50 border-collapse cursor-pointer hover:bg-sky-100",onClick:X=>n.go_detail(o.id)},[e("td",q,a(o.first_name)+" "+a(o.last_name),1),e("td",z,a(o.name),1),e("td",J,a(o.phone),1),e("td",K,a(n.format_number(o.amount)),1),e("td",Q,a(o.rank),1)],8,I))),256))])])]),u(b,{search_cond:s.search_cond,route_name:"admin.users",total:s.total},null,8,["search_cond","total"])])])]),_:1})],64)}const le=V(F,[["render",R]]);export{le as default};
