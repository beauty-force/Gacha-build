import{B as _,c as a,o as r,a as i,u as l,d,w as c,b as t,i as y,t as n,e as x,n as b,F as h,f,l as p}from"./app-BnS6p37g.js";import{A as w}from"./Admin-CiHTiUM4.js";import{r as L,a as S,b as j}from"./ChevronRightIcon-BRJVVeHS.js";import{r as B}from"./ChevronLeftIcon-Be-R4zFz.js";import"./useConfirm-zA1IHriv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"md:px-4 px-2"},$={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},E={class:"flex gap-2"},C={class:"border-b border-gray-200 mb-4"},N={class:"-mb-px flex space-x-4"},V={key:0,class:"w-full flex flex-col gap-4 mb-4 text-sm md:text-base"},z={key:0,class:"text-center py-12 text-gray-500"},A={key:1,class:"w-full table-auto"},D={class:"text-sm"},F={class:"text-center py-2"},H={class:"text-center py-2"},I={class:"text-center py-2"},J={class:"text-center py-2"},M={key:1,class:"w-full flex flex-col gap-4 mb-4 text-sm md:text-base"},O={key:0,class:"text-center py-12 text-gray-500"},T={key:1,class:"w-full table-auto"},Y={class:"text-sm"},q={class:"text-center py-2"},G={class:"text-center py-2"},K={class:"text-center py-2"},Q={class:"text-center py-2"},R={key:2,class:"w-full flex flex-col gap-4 mb-4 text-sm md:text-base overflow-auto"},U={key:0,class:"text-center py-12 text-gray-500"},W={key:1,class:"min-w-full table-auto"},X={class:"text-sm"},Z={class:"text-center py-2"},tt={class:"text-center py-2"},et={class:"text-center py-2"},st={class:"text-center py-2"},rt={key:3,class:"w-full flex flex-col gap-4 mb-4 text-sm md:text-base overflow-auto"},at={key:0,class:"text-center py-12 text-gray-500"},ot={key:1,class:"min-w-full table-auto"},nt={class:"text-sm"},lt={class:"text-center py-2"},it={class:"text-center py-2"},dt={class:"text-center py-2"},ct={class:"text-center py-2"},yt={key:4,class:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-3 px-3 lg:px-4"},ut={class:"text-sm text-gray-600 font-medium"},xt={class:"font-bold text-gray-900"},ht={class:"flex items-center gap-1"},bt={key:1,class:"px-2 text-gray-400"},_t={__name:"History",props:{user:Object,history:Array,type:String,pagination:Object},setup(e){const m=e,v=u=>String(u).replace(/(.)(?=(\d{3})+$)/g,"$1,"),k=_(()=>m.pagination.links.filter((u,o)=>o>0&&o<m.pagination.links.length-1));return(u,o)=>(r(),a(h,null,[i(l(d.Head),{title:`ユーザー履歴 (ID-${e.user.id})`},null,8,["title"]),i(w,null,{default:c(()=>[t("div",P,[t("div",$,[t("h3",null,"ユーザー履歴 (ID-"+n(e.user.id)+")",1),t("div",E,[i(l(d.Link),{href:u.route("admin.users.detail",e.user.id),class:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200 text-sm"},{default:c(()=>[...o[0]||(o[0]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),x(" ユーザー情報へ ",-1)])]),_:1},8,["href"])])]),t("div",C,[t("nav",N,[i(l(d.Link),{href:u.route("admin.users.history",{id:e.user.id,type:"payment"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",e.type==="payment"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:c(()=>[...o[1]||(o[1]=[x(" 入金履歴 ",-1)])]),_:1},8,["href","class"]),i(l(d.Link),{href:u.route("admin.users.history",{id:e.user.id,type:"coupon"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",e.type==="coupon"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:c(()=>[...o[2]||(o[2]=[x(" クーポン使用履歴 ",-1)])]),_:1},8,["href","class"]),i(l(d.Link),{href:u.route("admin.users.history",{id:e.user.id,type:"point"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",e.type==="point"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:c(()=>[...o[3]||(o[3]=[x(" ポイント履歴 ",-1)])]),_:1},8,["href","class"]),i(l(d.Link),{href:u.route("admin.users.history",{id:e.user.id,type:"ep"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",e.type==="ep"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:c(()=>[...o[4]||(o[4]=[x(" EP履歴 ",-1)])]),_:1},8,["href","class"])])]),e.type==="payment"?(r(),a("div",V,[e.history.length===0?(r(),a("div",z," 履歴がありません ")):(r(),a("table",A,[o[5]||(o[5]=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"金額"),t("th",{class:"text-center py-2"},"ポイント"),t("th",{class:"text-center py-2"},"利用クーポン"),t("th",{class:"text-center py-2"},"購入時間")])],-1)),t("tbody",D,[(r(!0),a(h,null,f(e.history,s=>(r(),a("tr",{key:s.order_id||s.updated_at,class:"border divide-x-2"},[t("td",F,n(s.amount?s.amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"}):"-"),1),t("td",H,n(s.point?s.point.toLocaleString():"-")+" pt",1),t("td",I,n(s.coupon_name??"-"),1),t("td",J,n(s.updated_at),1)]))),128))])]))])):y("",!0),e.type==="coupon"?(r(),a("div",M,[e.history.length===0?(r(),a("div",O," 履歴がありません ")):(r(),a("table",T,[o[6]||(o[6]=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"名前"),t("th",{class:"text-center py-2"},"コード"),t("th",{class:"text-center py-2"},"ポイント"),t("th",{class:"text-center py-2"},"使用時間")])],-1)),t("tbody",Y,[(r(!0),a(h,null,f(e.history,s=>(r(),a("tr",{key:s.code||s.updated_at,class:"border divide-x-2"},[t("td",q,n(s.title),1),t("td",G,n(v(s.code)),1),t("td",K,n(v(s.point))+" pt",1),t("td",Q,n(s.updated_at),1)]))),128))])]))])):y("",!0),e.type==="point"?(r(),a("div",R,[e.history.length===0?(r(),a("div",U," 履歴がありません ")):(r(),a("table",W,[o[7]||(o[7]=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"事由"),t("th",{class:"text-center py-2"},"ポイント（利用）"),t("th",{class:"text-center py-2"},"次のポイント（PT残高）"),t("th",{class:"text-center py-2"},"日時")])],-1)),t("tbody",X,[(r(!0),a(h,null,f(e.history,(s,g)=>(r(),a("tr",{key:g,class:"border divide-x-2"},[t("td",Z,n(s.point_type),1),t("td",tt,n(s.point_diff.toLocaleString()),1),t("td",et,n((s.point_before+s.point_diff).toLocaleString()),1),t("td",st,n(s.updated_at1),1)]))),128))])]))])):y("",!0),e.type==="ep"?(r(),a("div",rt,[e.history.length===0?(r(),a("div",at," 履歴がありません ")):(r(),a("table",ot,[o[8]||(o[8]=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"事由"),t("th",{class:"text-center py-2"},"EPの変動量"),t("th",{class:"text-center py-2"},"次のEP"),t("th",{class:"text-center py-2"},"日時")])],-1)),t("tbody",nt,[(r(!0),a(h,null,f(e.history,s=>(r(),a("tr",{key:s.updated_at,class:"border divide-x-2"},[t("td",lt,n(s.dp_type),1),t("td",it,n(s.dp_diff.toLocaleString()),1),t("td",dt,n((s.dp_before+s.dp_diff).toLocaleString()),1),t("td",ct,n(s.updated_at1),1)]))),128))])]))])):y("",!0),e.pagination.total>0?(r(),a("div",yt,[t("div",ut,[x(n(e.pagination.from)+" - "+n(e.pagination.to)+" / ",1),t("span",xt,n(e.pagination.total),1),o[9]||(o[9]=x("件 ",-1))]),t("div",ht,[e.pagination.current_page>1?(r(),p(l(d.Link),{key:0,href:e.pagination.first_page_url,class:"px-2 py-1.5 rounded text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium",title:"最初"},{default:c(()=>[i(l(L),{class:"w-4 h-4"})]),_:1},8,["href"])):y("",!0),e.pagination.prev_page_url?(r(),p(l(d.Link),{key:1,href:e.pagination.prev_page_url,class:"px-2 py-1.5 rounded text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium"},{default:c(()=>[i(l(B),{class:"w-4 h-4"})]),_:1},8,["href"])):y("",!0),(r(!0),a(h,null,f(k.value,(s,g)=>(r(),a(h,{key:g},[s.url?(r(),p(l(d.Link),{key:0,href:s.url,class:b({"px-3 py-1 rounded text-sm font-semibold transition-colors":!0,"bg-yellow-500 text-white shadow-md":s.active,"bg-gray-200 text-gray-700 hover:bg-gray-300":!s.active})},{default:c(()=>[x(n(s.label),1)]),_:2},1032,["href","class"])):(r(),a("span",bt,"..."))],64))),128)),e.pagination.next_page_url?(r(),p(l(d.Link),{key:2,href:e.pagination.next_page_url,class:"px-2 py-1.5 rounded text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium"},{default:c(()=>[i(l(S),{class:"w-4 h-4"})]),_:1},8,["href"])):y("",!0),e.pagination.current_page<e.pagination.last_page?(r(),p(l(d.Link),{key:3,href:e.pagination.last_page_url,class:"px-2 py-1.5 rounded text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium",title:"最後"},{default:c(()=>[i(l(j),{class:"w-4 h-4"})]),_:1},8,["href"])):y("",!0)])])):y("",!0)])]),_:1})],64))}};export{_t as default};
