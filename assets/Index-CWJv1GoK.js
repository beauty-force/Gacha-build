import{d as h,r as c,c as f,o as p,a as d,w as b,b as e,F as g,f as L,t as l,h as H,j as u,e as a,v as m,i as j,n as S}from"./app-BZZ3I4qG.js";import{A as V}from"./Admin-D6BXAJGg.js";import{d as W}from"./index-CKqyS3_y.js";import{S as D,h as P,V as U,G as q,Y as O,u as A}from"./useConfirm-DV5NN04W.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const{confirm:I}=A(),R={components:{Head:h.Head,AppLayout:V,Dialog:O,DialogPanel:q,DialogTitle:U,TransitionChild:P,TransitionRoot:D},props:{errors:Object,ranks:Object},data(){return{url1:null,url2:null,open:!1}},methods:{destroy_rank(r){I("削除してもいいですか？","","error").then(t=>{t&&W.Inertia.delete(route("admin.rank.destroy",{id:r}))})},modalOpen(r){r?(this.form.id=r.id,this.form.rank=r.rank,this.form.title=r.title,this.form.limit=r.limit,this.form.keep_limit=r.keep_limit,this.form.bonus=r.bonus,this.form.pt_rate=r.pt_rate,this.form.dp_rate=r.dp_rate,this.form.badge="",this.url2=r.badge):(this.form.id=0,this.form.rank="",this.form.title="",this.form.limit="",this.form.keep_limit="",this.form.bonus="",this.form.pt_rate=0,this.form.dp_rate=1,this.form.badge="",this.url2=""),this.open=!0},closeModal(){this.open=!1},submit(){this.$refs.photo2.files[0]&&(this.form.badge=this.$refs.photo2.files[0]),this.form.post(route("admin.rank.store"),{preserveScroll:!0,onFinish:()=>{}})},previewImage2(r){const t=r.target.files[0];this.url2=URL.createObjectURL(t)},pt_rate_string(r){return r.rank==1?'<span class="text-[1.5em]">—</span>':r.limit<0||r.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${r.pt_rate}%付与<br/>(購入時PTの)`},format_number(r){return String(r).replace(/(.)(?=(\d{3})+$)/g,"$1,")},bonus_pt_string(r){return r.rank==1?'<span class="text-[1.5em]">—</span>':r.limit<0||r.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${this.format_number(r.bonus)}PT`}},setup(r){let t={id:"",rank:"",title:"",limit:"",keep_limit:"",bonus:"",pt_rate:"",dp_rate:"",image:"",badge:""};return{form:h.useForm(t)}},mounted(){}},z={class:"pt-4 px-5 py-2"},E={class:"flex flex-wrap border-neutral-200 items-center gap-[0.8em]"},F={class:"w-[1em]"},N={class:"flex-1 flex bg-neutral-200 rounded-lg justify-center relative"},G=["src"],Y={class:"absolute top-0 bottom-0 left-0 right-0 flex items-center"},J={class:"text-center text-[0.9em] text-black font-black w-[30%] h-full flex flex-col items-center justify-center relative"},K=["innerHTML"],Q=["innerHTML"],X={class:"text-center text-[0.8em] font-bold text-white w-[40%] h-full flex items-center justify-center"},Z={class:"text-center flex gap-[0.4em] items-end h-full"},$={class:"relative flex justify-center text-[1em]"},ee={class:"leading-[1.2em]",style:{WebkitTextStrokeColor:"black",WebkitTextStrokeWidth:"2.5px"}},te={class:"absolute leading-[1.2em]"},se={class:"w-[30%] flex divide-x-[0.3em] divide-white h-full relative"},re={class:"text-center text-[0.9em] text-black font-black w-[40%] h-full flex items-center justify-center"},oe=["innerHTML"],ne=["innerHTML"],le={class:"text-center text-[0.9em] text-black font-black w-[60%] h-full flex items-center justify-center relative"},ie=["innerHTML"],ae=["innerHTML"],de={class:"flex items-center justify-between"},ue={key:0,class:"text-sm"},me={key:1},ce={class:"my-2 text-center flex justify-center gap-2"},fe=["onClick"],pe=["onClick"],be={class:"text-center mb-6"},xe={class:"fixed inset-0 z-20 overflow-y-auto"},_e={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},he={class:"mb-4"},ge={class:"text-red-500 text-sm mt-1"},ve={class:"mb-4"},ke={class:"text-red-500 text-sm mt-1"},ye={class:"mb-4"},we={class:"text-red-500 text-sm mt-1"},Te={class:"mb-4"},Ce={class:"text-red-500 text-sm mt-1"},Me={class:"mb-4"},Le={class:"text-red-500 text-sm mt-1"},He={class:"mb-4"},je={class:"text-red-500 text-sm mt-1"},Se={class:"mb-4"},Ve={class:"text-red-500 text-sm mt-1"},We={class:"mb-4"},De={class:"text-center w-full"},Pe=["src"],Ue={class:"text-red-500 text-sm mt-1"},qe={class:"mb-6 text-center"},Oe=["disabled"];function Ae(r,t,i,o,x,n){const v=c("Head"),_=c("TransitionChild"),k=c("DialogPanel"),y=c("Dialog"),w=c("TransitionRoot"),T=c("AppLayout");return p(),f(g,null,[d(v,{title:"ランク特典設定"}),d(T,{closeModal:n.closeModal},{default:b(()=>[e("div",z,[t[16]||(t[16]=e("h1",{class:"mb-2 text-lg font-bold"},"ランク特典設定",-1)),t[17]||(t[17]=e("hr",{class:"mb-2"},null,-1)),(p(!0),f(g,null,L(i.ranks,(s,C)=>(p(),f("div",{class:"my-2 text-[0.6em] md:text-[1em] sm:text-[0.8em]",key:C},[e("div",E,[e("div",F,l(s.rank),1),e("div",N,[e("img",{src:s.badge,class:"h-[8.5vw] max-h-[80px]"},null,8,G),e("div",Y,[e("div",J,[e("span",{class:"leading-[1.4em]",innerHTML:n.pt_rate_string(s),style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,K),e("span",{class:"absolute leading-[1.4em]",innerHTML:n.pt_rate_string(s)},null,8,Q)]),t[12]||(t[12]=e("div",{class:"h-full w-[0.3em] bg-white"},null,-1)),e("div",X,[e("div",Z,[e("div",$,[e("span",ee,"( "+l(s.title)+" )",1),e("span",te,"( "+l(s.title)+" )",1)])])]),t[13]||(t[13]=e("div",{class:"h-full w-[0.3em] bg-white"},null,-1)),e("div",se,[e("div",re,[e("span",{innerHTML:s.dp_rate>0?s.dp_rate+"%":"<span class='text-[1.2em]'>???</span>",style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,oe),e("span",{class:"absolute",innerHTML:s.dp_rate>0?s.dp_rate+"%":"<span class='text-[1.2em]'>???</span>"},null,8,ne)]),e("div",le,[e("span",{class:"leading-[1.4em]",innerHTML:n.bonus_pt_string(s),style:{WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"2px"}},null,8,ie),e("span",{class:"absolute leading-[1.4em]",innerHTML:n.bonus_pt_string(s)},null,8,ae)])])])])]),e("div",de,[s.limit>0?(p(),f("span",ue,"到達 / 維持基準: "+l(n.format_number(s.limit))+" / "+l(n.format_number(s.keep_limit))+" PT",1)):(p(),f("span",me)),e("div",ce,[e("button",{type:"button",onClick:M=>n.modalOpen(s),class:"inline-flex items-center justify-center p-2 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-1",title:"編集"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,fe),e("button",{type:"button",onClick:M=>n.destroy_rank(s.id),class:"inline-flex items-center justify-center p-2 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150",title:"削除"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,pe)])])]))),128)),e("div",be,[e("button",{type:"button",onClick:t[0]||(t[0]=s=>n.modalOpen(0)),class:"inline-block items-center px-10 py-2.5 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 mr-2"}," 追加 ")])]),e("template",null,[d(w,{as:"template",show:x.open},{default:b(()=>[d(y,{as:"div",class:"relative z-20",onClose:t[11]||(t[11]=s=>x.open=!1)},{default:b(()=>[d(_,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:b(()=>[...t[18]||(t[18]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",xe,[e("div",_e,[d(_,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:b(()=>[d(k,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:b(()=>[e("form",{onSubmit:t[10]||(t[10]=H(s=>n.submit(),["prevent"]))},[e("div",he,[t[19]||(t[19]=e("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("ランク（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.rank=s),id:"rank",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.rank]]),e("div",ge,l(i.errors.rank),1)]),e("div",ve,[t[20]||(t[20]=e("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("ランク名"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.title=s),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.title]]),e("div",ke,l(i.errors.title),1)]),e("div",ye,[t[21]||(t[21]=e("label",{for:"limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("到達基準消費量（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.limit=s),id:"limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.limit]]),e("div",we,l(i.errors.limit),1)]),e("div",Te,[t[22]||(t[22]=e("label",{for:"keep_limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("維持基準消費量（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.keep_limit=s),id:"keep_limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.keep_limit]]),e("div",Ce,l(i.errors.keep_limit),1)]),e("div",Me,[t[23]||(t[23]=e("label",{for:"bonus",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("ボーナスPT（半角数字）"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.form.bonus=s),id:"bonus",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.bonus]]),e("div",Le,l(i.errors.bonus),1)]),e("div",He,[t[24]||(t[24]=e("label",{for:"pt_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("購入時PT付与特典 (%)"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.form.pt_rate=s),id:"pt_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.pt_rate]]),e("div",je,l(i.errors.pt_rate),1)]),e("div",Se,[t[25]||(t[25]=e("label",{for:"dp_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("EP付与率 (%)"),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.form.dp_rate=s),id:"dp_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[m,o.form.dp_rate]]),e("div",Ve,l(i.errors.dp_rate),1)]),e("div",We,[t[26]||(t[26]=e("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[a("ランクカード画像 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",De,[x.url2?(p(),f("img",{key:0,src:x.url2,class:"inline-block mt-4 h-24"},null,8,Pe)):j("",!0)]),e("input",{onChange:t[8]||(t[8]=(...s)=>n.previewImage2&&n.previewImage2(...s)),ref:"photo2",id:"file1-1",type:"file",class:"w-full"},null,544),e("div",Ue,l(i.errors.badge),1)]),e("div",qe,[e("button",{type:"submit",class:S([{"opacity-25":o.form.processing},"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"]),disabled:o.form.processing}," 保存 ",10,Oe),e("button",{type:"button",onClick:t[9]||(t[9]=s=>x.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," キャンセル ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1},8,["closeModal"])],64)}const Ne=B(R,[["render",Ae]]);export{Ne as default};
