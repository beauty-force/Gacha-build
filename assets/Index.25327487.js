import{H as V,L as O,G as F,r as x,o as n,c,b,w as f,F as p,d as e,f as y,i as N,e as u,t as d,n as _,J as w,a2 as C,h}from"./app.b514bc6b.js";import{A as B}from"./UserLayout.7420a3f5.js";import{u as H}from"./useConfirm.ae05174f.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.75f3279d.js";const{confirm:j,alert:k}=H(),S={components:{Head:V,AppLayout:B,Link:O},props:{errors:Object,gacha:Object,category_share:Object,products:Object,profile:Object,delivery_limit:Number},data(){return{hasCheck:!1,main_tab:[{title:"\u672A\u9078\u629E",route_url:route("user.products"),is_active:!0},{title:"\u767A\u9001\u5F85\u3061",route_url:route("user.products.wait"),is_active:!1},{title:"\u767A\u9001\u6E08\u307F",route_url:route("user.products.delivered"),is_active:!1}],ready_delivery:0,products_count:0,isCheckAll:!1,_products:this.products.data.filter(o=>o.status==1)}},setup(o){return{form:F({checks:{}})}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},changeCheck(){let o,s=!1;for(this._products=this.products.data.filter(l=>l.status==1),this.isCheckAll=this._products.length>0,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]?s=!0:this.isCheckAll=!1;this.hasCheck=s},submit(o){let s,l=0;var r=0;let i=0;for(s=0;s<this._products.length;s++)this.form.checks["id"+this._products[s].id]&&(l++,r=parseInt(r)+parseInt(this._products[s].point),this._products[s].rare=="\u30DD\u30A4\u30F3\u30C8"&&i++);if(o=="point")r>0&&j("\u4EA4\u63DB\u3057\u307E\u3059\u304B\uFF1F \u9078\u629E\u3057\u305F"+l+"\u70B9\u306E\u5546\u54C1\u3092"+this.format_number(r)+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002").then(a=>{a&&this.form.post(route("user.products.point.exchange"),{onFinish:()=>{this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})});else{if(i>0){k("\u30DD\u30A4\u30F3\u30C8\u306F\u767A\u9001\u3067\u304D\u307E\u305B\u3093");return}if(l>0){if(r<this.delivery_limit){k("\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u308B\u6700\u4F4E\u30DD\u30A4\u30F3\u30C8\u306F"+this.format_number(this.delivery_limit)+"pt\u3067\u3059\u3002");return}this.products_count=l,this.ready_delivery=1}}},back_delivery(){this.ready_delivery=0},submit_delivery(){this.profile.city&&this.profile.street?j(""+this.products_count+"\u70B9\u306E\u5546\u54C1\u3092\u914D\u9001\u3057\u307E\u3059\u304B\uFF1F").then(o=>{o&&this.form.post(route("user.delivery.post"),{onFinish:()=>{this.ready_delivery=2,this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})}):k("\u5165\u529B\u30A8\u30E9\u30FC\u3001\u914D\u9001\u5148\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002")},checkall(){let o;for(this.hasCheck=!1,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},T={key:0,class:"p-4 md:p-6 w-full"},U=e("h1",{class:"underline underline-offset-8 mb-3 text-center text-lg font-bold"},"\xA0\xA0\xA0\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\xA0\xA0\xA0",-1),z={class:"sticky top-20 bg-white py-3 z-[1]"},D={class:"w-full text-neutral-500 space-x-1 border-b-4 border-yellow-500 px-4 flex justify-center"},P={class:"grid md:grid-cols-2 gap-1"},E={class:"flex border-neutral-200 items-start w-full"},G=["id","onUpdate:modelValue"],J=["for"],M={class:"relative"},q=["src"],K=["src","alt"],Q={class:"min-h-28 ml-2 flex flex-col justify-evenly flex-1 items-start"},R=["src"],W={key:1,class:"text-base px-3 font-bold"},X={class:"text-sm px-3"},Y={class:"text-xs px-3"},Z={key:2,class:"flex bg-red-500 justify-center items-center rounded-full px-3 mx-3 py-0.5 text-white w-fit"},$=e("img",{src:"/images/icon_cash.png",class:"h-4 mr-1"},null,-1),ee={class:"text-xs px-3 text-neutral-400"},te={class:"sticky bottom-16 md:bottom-20 bg-white py-5 space-y-3"},se={class:"text-center relative"},oe={class:"flex items-center cursor-pointer justify-center"},ie=e("span",{class:"ml-2 font-bold text-yellow-600"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),re={class:"text-center text-neutral-600 flex justify-center items-center gap-2 text-xs md:text-sm"},le=["disabled"],ne=e("div",{class:"p-1"},"\u30DD\u30A4\u30F3\u30C8\u306B\u63DB\u3048\u308B",-1),ce=[ne],de=["disabled"],ae=e("div",{class:"p-1"},"\u767A\u9001\u3059\u308B",-1),he=[ae],ue={key:1,class:"pt-6 md:px-6 px-4"},_e=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u5185\u5BB9\u306E\u78BA\u8A8D",-1),pe=e("hr",{class:"mb-6"},null,-1),be={class:"mb-3 text-sm"},fe={class:"mb-8 grid md:grid-cols-2"},me={key:0,class:"mb-0 border-neutral-200 border-b p-1"},xe={class:"flex border-neutral-200 items-center"},ye=["src"],ke=["for"],ge={class:"text-red-500"},ve=e("div",{class:"mb-2 text-sm"},"\u914D\u9001\u5148\u60C5\u5831",-1),we={class:"mb-8 border border-neutral-200 rounded-md px-4 py-2 flex items-center justify-between"},Ce={class:"flex-1 space-y-1"},je={class:"font-bold text-sm"},Ae={class:"text-sm"},Le={class:"text-sm"},Ve={key:0,class:"text-sm"},Oe={class:"mb-8 text-center text-neutral-50"},Fe=["disabled"],Ne=["disabled"],Be={key:2,class:"pt-6 md:px-6 px-4"},He=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u624B\u7D9A\u304D\u5B8C\u4E86",-1),Ie=e("hr",{class:"mb-8"},null,-1),Se={class:"mb-8"},Te=e("br",null,null,-1),Ue=e("br",null,null,-1),ze=e("span",{class:"font-bold"},"\u6570\u65E5~\u6570\u9031\u9593",-1),De=e("br",null,null,-1),Pe={class:"mb-6 text-center text-neutral-50 flex flex-wrap justify-center gap-2"};function Ee(o,s,l,r,i,a){const A=x("Head"),m=x("Link"),L=x("AppLayout");return n(),c(p,null,[b(A,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7"}),b(L,null,{default:f(()=>[i.ready_delivery==0?(n(),c("div",T,[U,e("div",z,[e("div",D,[(n(!0),c(p,null,y(i.main_tab,(t,g)=>(n(),N(m,{href:t.route_url,class:_(["-mb-[1px] flex-1 inline-block text-center py-1.5 rounded-t-md border-yellow-500 border-x border-t",{"bg-yellow-500 text-white":t.is_active,"hover:bg-yellow-400 hover:text-white":!t.is_active}])},{default:f(()=>[u(d(t.title),1)]),_:2},1032,["href","class"]))),256))])]),e("div",P,[(n(!0),c(p,null,y(l.products.data,(t,g)=>(n(),c("div",{class:_(["mt-1 py-2 px-3 border rounded-md hover:bg-yellow-50",{"bg-yellow-100 border-yellow-300":r.form.checks["id"+t.id]}])},[e("div",E,[w(e("input",{id:"checkbox"+t.id,"onUpdate:modelValue":v=>r.form.checks["id"+t.id]=v,type:"checkbox",onChange:s[0]||(s[0]=v=>a.changeCheck()),class:"cursor-pointer rounded border-yellow-300 text-yellow-600 shadow-sm focus:ring-0 m-1"},null,40,G),[[C,r.form.checks["id"+t.id]]]),e("label",{for:"checkbox"+t.id,class:"flex-1 cursor-pointer flex items-center text-sm py-1 px-2"},[e("div",M,[e("img",{src:t.image,class:"h-28 w-20 object-contain"},null,8,q),t.badge?(n(),c("img",{key:0,src:t.badge,class:"absolute -top-2 -right-2 w-[35%]",alt:t.badge},null,8,K)):h("",!0)]),e("div",Q,[t.rank>0?(n(),c("img",{key:0,src:`/images/badge${t.rank}.png`,class:"px-3 h-7 w-auto object-contain"},null,8,R)):h("",!0),t.gacha_title?(n(),c("div",W,d(t.gacha_title),1)):h("",!0),e("div",X,d(t.name),1),e("div",Y,d(t.rare),1),t.is_lost_product!=2?(n(),c("div",Z,[$,e("span",null,d(t.point.toLocaleString())+"\xA0PT",1)])):h("",!0),e("div",ee,"\u4FDD\u6709\u671F\u9650: "+d(t.expiration),1)])],8,J)])],2))),256))]),e("div",te,[e("div",se,[e("label",oe,[w(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=t=>i.isCheckAll=t),onChange:s[2]||(s[2]=t=>a.checkall()),class:"h-5 w-5 cursor-pointer rounded border-yellow-400 text-yellow-600 focus:ring-0"},null,544),[[C,i.isCheckAll]]),ie])]),e("div",re,[e("button",{type:"button",onClick:s[3]||(s[3]=t=>a.submit("point")),class:_([{"opacity-50":r.form.processing||!i.hasCheck},"w-40 md:w-60 inline-block items-center px-1 py-1 border rounded-md font-semibold text-white uppercase tracking-widest bg-theme bg-theme-hover focus:shadow-outline-blue transition ease-in-out duration-150"]),disabled:r.form.processing||!i.hasCheck},ce,10,le),e("button",{type:"button",onClick:s[4]||(s[4]=t=>a.submit("delivery")),class:_([{"opacity-50":r.form.processing||!i.hasCheck},"w-40 md:w-60 inline-block items-center px-1 py-1 border rounded-md font-semibold text-white uppercase tracking-widest bg-theme bg-theme-hover focus:shadow-outline-lime transition ease-in-out duration-150"]),disabled:r.form.processing||!i.hasCheck},he,10,de)])])])):h("",!0),i.ready_delivery==1?(n(),c("div",ue,[_e,pe,e("div",be,"\u914D\u9001\u5546\u54C1 \uFF08\u8A08"+d(i.products_count)+"\u70B9\uFF09",1),e("div",fe,[(n(!0),c(p,null,y(l.products.data,(t,g)=>(n(),c(p,null,[r.form.checks["id"+t.id]?(n(),c("div",me,[e("div",xe,[e("img",{src:t.image,class:"h-20 inline-block object-contain"},null,8,ye),e("label",{for:"checkbox"+t.id,class:"cursor-pointer h-20 flex flex-col justify-evenly flex-1 text-xs py-1 px-2"},[e("div",null,d(t.name),1),e("div",null,d(t.rare),1),e("div",ge,d(t.point)+"pt",1)],8,ke)])])):h("",!0)],64))),256))]),ve,e("div",we,[e("div",Ce,[l.profile.id?(n(),c(p,{key:0},[e("p",je,d(l.profile.first_name+l.profile.last_name),1),e("p",Ae,"\u3012"+d(l.profile.postal_code),1),e("p",Le,d(l.profile.city)+d(l.profile.street),1),l.profile.building?(n(),c("p",Ve,d(l.profile.building),1)):h("",!0)],64)):h("",!0)]),e("div",null,[b(m,{href:o.route("user.address"),type:"button",onClick:s[5]||(s[5]=t=>a.back_delivery()),class:_([{"opacity-25":r.form.processing||!i.hasCheck},"inline-block items-center px-5 py-1.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:r.form.processing||!i.hasCheck},{default:f(()=>[u(" \u7DE8\u96C6 ")]),_:1},8,["href","class","disabled"])])]),e("div",Oe,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>a.back_delivery()),class:_([{"opacity-25":r.form.processing||!i.hasCheck},"w-32 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-neutral-600 hover:bg-neutral-700 transition ease-in-out duration-150 m-1"]),disabled:r.form.processing||!i.hasCheck}," \u623B\u308B ",10,Fe),e("button",{type:"button",onClick:s[7]||(s[7]=t=>a.submit_delivery()),class:_([{"opacity-25":r.form.processing||!i.hasCheck},"w-32 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150 m-1"]),disabled:r.form.processing||!i.hasCheck}," \u767A\u9001\u3059\u308B ",10,Ne)])])):h("",!0),i.ready_delivery==2?(n(),c("div",Be,[He,Ie,e("div",Se,[u(" \u8A08"+d(i.products_count)+"\u70B9\u306E\u5546\u54C1\u306E\u914D\u9001\u624B\u7D9A\u304D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",1),Te,Ue,u(" \u5546\u54C1\u306E\u767A\u9001\u306B\u306F"),ze,u("\u304B\u304B\u308B\u53EF\u80FD\u6027\u304C\u3054\u3056\u3044\u307E\u3059\u3002"),De,u(" \u3054\u4E86\u627F\u306E\u307B\u3069\u3088\u308D\u3057\u304F\u304A\u9858\u3044\u81F4\u3057\u307E\u3059\u3002 ")]),e("div",Pe,[b(m,{href:o.route("main"),class:"w-48 inline-block items-center px-1 py-2 bg-red-600 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"},{default:f(()=>[u(" \u30AC\u30C1\u30E3TOP\u3078 ")]),_:1},8,["href"]),e("button",{type:"button",onClick:s[8]||(s[8]=t=>a.back_delivery()),class:"w-48 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150 m-1"}," \u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\u3078 ")])])):h("",!0)]),_:1})],64)}const Qe=I(S,[["render",Ee]]);export{Qe as default};
