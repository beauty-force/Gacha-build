import{d as c,p as u,c as p,o as f,b as e,y as L,n as b,i as g,a as o,u as a,j as U,e as h,w as x,a3 as S,Z as P,h as $}from"./app-BEiqhFTt.js";import{_ as y,a as _}from"./TextInput-CIc8FwBh.js";import{_ as w}from"./InputLabel-DWbUQsE6.js";const z={class:"relative flex flex-col items-center justify-center pt-8 sm:pt-16 px-4"},N={class:"absolute top-4 right-4"},E={class:"-mb-12"},q=["src"],A={class:"flex flex-col items-center justify-center gap-3 mt-16"},F={class:"p-4 sm:p-8 bg-white/70 border shadow rounded-lg shadow-yellow-300 space-y-4"},I={key:0},M={class:"text-sm mt-2 text-neutral-600"},O={class:"mt-2 font-medium text-sm text-yellow-500"},T={class:"flex gap-4 items-center justify-end"},D={key:0,class:"text-sm text-neutral-600"},H={class:"text-center border border-yellow-600 rounded-full p-0.5 w-fit"},Z=["disabled"],Q={__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:Boolean,status:String},setup(k){const C=k,l=c.usePage().props.value.auth.user,s=c.useForm({name:l.name,email:l.email,avatar:null,banner:null}),v=u(l.avatar?"/images/avatars/"+l.avatar:"/images/icon_user.png"),r=u(l.banner?"/images/banners/"+l.banner:null),m=u(null),d=u(null),V=n=>{const t=n.target.files[0];t&&(v.value=URL.createObjectURL(t),s.avatar=t)},R=n=>{const t=n.target.files[0];t&&(r.value=URL.createObjectURL(t),s.banner=t)},j=()=>{m.value&&m.value.click()},B=()=>{d.value&&d.value.click()};return(n,t)=>(f(),p("section",null,[e("form",{onSubmit:t[2]||(t[2]=$(i=>a(s).post(n.route("profile.update")),["prevent"])),class:"space-y-6"},[e("div",{class:b(["relative mb-16 -mx-4 md:-mx-6 lg:-mx-8",r.value?"":"bg-gradient-to-b from-amber-300 to-amber-200"]),style:L(r.value?{backgroundImage:`url(${r.value})`,backgroundSize:"cover",backgroundPosition:"center"}:{})},[t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white/30"},null,-1)),e("div",z,[e("div",N,[e("input",{type:"file",accept:"image/*",hidden:"",ref_key:"bannerRef",ref:d,onChange:R},null,544),e("button",{type:"button",onClick:B,class:"inline-flex items-center gap-2 px-4 py-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full font-semibold text-sm text-gray-700 transition-all duration-300 shadow-md hover:shadow-lg hover:bg-gray-50"},[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),e("span",null,"バナー選択",-1)])])]),e("div",E,[e("img",{src:v.value,class:"h-32 w-32 rounded-full mx-auto border-4 border-white shadow-lg"},null,8,q)])])],6),e("div",A,[e("input",{type:"file",accept:"image/*",hidden:"",ref_key:"avatarRef",ref:m,onChange:V},null,544),e("button",{type:"button",class:"rounded-full bg-theme bg-theme-hover text-white text-sm px-6 py-1",onClick:j},"ユーザー画像選択")]),e("div",F,[e("div",null,[o(w,{for:"name",value:"名前",class:"text-neutral-600 pl-2"}),o(y,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a(s).name,"onUpdate:modelValue":t[0]||(t[0]=i=>a(s).name=i),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),o(_,{class:"mt-2",message:a(s).errors.name},null,8,["message"])]),e("div",null,[o(w,{for:"email",value:"メールアドレス",class:"text-neutral-600 pl-2"}),o(y,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:a(s).email,"onUpdate:modelValue":t[1]||(t[1]=i=>a(s).email=i),required:"",autocomplete:"email"},null,8,["modelValue"]),o(_,{class:"mt-2",message:a(s).errors.email},null,8,["message"])]),a(l).email_verified_at===null?(f(),p("div",I,[e("p",M,[t[6]||(t[6]=h(" メールアドレスは認証されていません。 ",-1)),o(a(c.Link),{href:n.route("verification.send"),method:"post",as:"button",class:"mt-2 underline text-xs md:text-sm text-neutral-600 hover:text-neutral-600 rounded-md text-start"},{default:x(()=>[...t[5]||(t[5]=[h(" 確認メールを再送信するには、ここをクリックしてください。 ",-1)])]),_:1},8,["href"])]),U(e("div",O," 新しい確認リンクがあなたの電子メール アドレスに送信されました。 ",512),[[S,C.status==="verification-link-sent"]])])):g("",!0),e("div",T,[o(P,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:x(()=>[a(s).recentlySuccessful?(f(),p("p",D,"保存されました。")):g("",!0)]),_:1}),e("div",H,[e("button",{type:"submit",class:b([{"opacity-50":a(s).processing},"inline-block items-center px-10 py-1 bg-theme bg-theme-hover rounded-full font-semibold text-base text-white uppercase tracking-widest"]),disabled:a(s).processing}," 保存 ",10,Z)])])])],32)]))}};export{Q as default};
