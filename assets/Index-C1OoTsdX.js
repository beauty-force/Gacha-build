import{d as y,r as f,c as o,o as s,a as d,w as i,b as n,i as u,t as c,n as b,e as p,F as g,f as v,l as C}from"./app-CT1Wwlkh.js";import{A as L}from"./UserLayout-DXMsThcG.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as U}from"./useConfirm-DQO9RPtQ.js";import"./index-CtL_WfBf.js";const S={components:{Head:y.Head,Link:y.Link,UserLayout:L,ChevronLeftIcon:U},props:{notifications:Array,unreadCount:Number,personalUnreadCount:{type:Number,default:0},announcementUnreadCount:{type:Number,default:0},activeTab:{type:String,default:"personal"}},computed:{filteredNotifications(){return this.notifications},hasUnread(){return this.filteredNotifications.some(a=>!a.is_read)}},methods:{formatDate(a){const e=new Date(a),t=e.getFullYear(),h=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),x=String(e.getMinutes()).padStart(2,"0");return`${t}/${h}/${_} ${r}:${x}`},goBack(){window.history.back()}}},B={class:"pt-6 md:px-6 px-4 text-neutral-700"},D={class:"flex items-center justify-between mb-4"},H={class:"flex items-center"},T={key:0,class:"ml-3 bg-red-500 text-white text-xs font-bold rounded-full px-2 py-1 min-w-[24px] text-center"},I={class:"flex border-b border-neutral-200 mb-4"},V={key:0,class:"bg-red-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center"},A={key:0,class:"bg-red-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center"},F={key:0,class:"space-y-4"},j={class:"flex justify-between items-start"},E={class:"flex-1"},M={class:"text-xs text-neutral-500 mb-1"},z={class:"text-sm text-neutral-700"},Y={key:0,class:"ml-2 w-2 h-2 bg-yellow-500 rounded-full flex-shrink-0"},q={key:1,class:"text-center py-12"},G={key:2,class:"mt-6 text-center"};function J(a,e,t,h,_,r){const x=f("Head"),w=f("ChevronLeftIcon"),m=f("Link"),k=f("UserLayout");return s(),o(g,null,[d(x,{title:"通知"}),d(k,null,{default:i(()=>[n("div",B,[n("div",D,[n("div",H,[n("button",{onClick:e[0]||(e[0]=(...l)=>r.goBack&&r.goBack(...l)),class:"mr-3"},[d(w,{class:"h-6 w-6 text-neutral-700"})]),e[1]||(e[1]=n("h1",{class:"text-lg md:text-xl font-bold"},"通知",-1)),t.unreadCount>0?(s(),o("span",T,c(t.unreadCount),1)):u("",!0)])]),n("div",I,[d(m,{href:a.route("user.notifications",{tab:"personal"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2",t.activeTab==="personal"?"border-yellow-500 text-yellow-600":"border-transparent text-neutral-500 hover:text-neutral-700"])},{default:i(()=>[e[2]||(e[2]=p(" あなたへの通知 ",-1)),t.personalUnreadCount>0?(s(),o("span",V,c(t.personalUnreadCount),1)):u("",!0)]),_:1},8,["href","class"]),d(m,{href:a.route("user.notifications",{tab:"announcement"}),class:b(["px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2",t.activeTab==="announcement"?"border-yellow-500 text-yellow-600":"border-transparent text-neutral-500 hover:text-neutral-700"])},{default:i(()=>[e[3]||(e[3]=p(" お知らせ ",-1)),t.announcementUnreadCount>0?(s(),o("span",A,c(t.announcementUnreadCount),1)):u("",!0)]),_:1},8,["href","class"])]),r.filteredNotifications.length>0?(s(),o("div",F,[(s(!0),o(g,null,v(r.filteredNotifications,l=>(s(),C(m,{key:l.id,href:a.route("user.notifications.show",l.id),class:b(["block p-4 rounded-lg border cursor-pointer transition-colors",l.is_read?"bg-white border-neutral-200":"bg-yellow-50 border-yellow-200"])},{default:i(()=>[n("div",j,[n("div",E,[n("p",M,c(r.formatDate(l.created_at)),1),n("p",z,c(l.message),1)]),l.is_read?u("",!0):(s(),o("div",Y))])]),_:2},1032,["href","class"]))),128))])):(s(),o("div",q,[...e[4]||(e[4]=[n("p",{class:"text-neutral-500"},"通知はありません",-1)])])),r.filteredNotifications.length>0&&r.hasUnread?(s(),o("div",G,[d(m,{href:a.route("user.notifications.read-all"),method:"post",data:{tab:t.activeTab},class:"inline-block px-6 py-2 bg-neutral-200 text-neutral-700 rounded-md text-sm font-medium hover:bg-neutral-300 transition-colors"},{default:i(()=>[...e[5]||(e[5]=[p(" すべて既読にする ",-1)])]),_:1},8,["href","data"])])):u("",!0)])]),_:1})],64)}const W=N(S,[["render",J]]);export{W as default};
