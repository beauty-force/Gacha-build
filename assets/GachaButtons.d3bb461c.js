import{L as _,u as p,G as d,o as c,c as n,d as a,F as l,f as m,n as f,t as u,h as x}from"./app.780d11f8.js";import{u as y}from"./useConfirm.1c4a5fb0.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as v}from"./PlayIcon.15bcdb12.js";const{confirm:B}=y(),k={components:{Link:_,PlayIcon:v},props:{gacha:Object},data(){return{category_share:p().props.value.category_share,processing:!1,buttons:[],colorThemes:["from-neutral-500 to-neutral-700 hover:from-neutral-600 hover:to-neutral-800","from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700","from-red-500 to-red-700 hover:from-red-600 hover:to-red-800","from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800","from-green-500 to-green-700 hover:from-green-600 hover:to-green-800"]}},computed:{displayButtons(){if(!this.buttons||this.buttons.length===0)return this.getDefaultButtons();const t=this.buttons.filter(s=>s<=this.gacha.count_rest);return t.length===0?[]:(t[t.length-1]<this.gacha.count_rest&&this.buttons.length>t.length&&t.push(this.gacha.count_rest),t.map((s,o)=>{const i=s*this.gacha.point,h=s>=this.gacha.count_rest?"\u5168\u3066":s==1?"1\u56DE":`${s}\u9023`,e=o%this.colorThemes.length;return{number:s,point:i,text:h,classes:s>=this.gacha.count_rest||s>=100?"all_button":this.colorThemes[e]}}))}},methods:{format_number(t){return String(t).replace(/(.)(?=(\d{3})+$)/g,"$1,")},getDefaultButtons(){const t=[];if(t.push({number:1,point:this.gacha.point,text:"1\u56DE",classes:this.colorThemes[0]}),this.gacha.count_rest>1&&(this.gacha.gacha_limit==0||this.gacha.gacha_limit>1)){const s=this.gacha.count_rest<=10?this.gacha.count_rest:10;t.push({number:s,point:s*this.gacha.point,text:this.gacha.count_rest<=10?"\u5168\u3066":"10\u9023",classes:this.colorThemes[1]})}if(this.gacha.count_rest>10&&(this.gacha.gacha_limit==0||this.gacha.gacha_limit>10)){const s=this.gacha.count_rest<=100?this.gacha.count_rest:100;t.push({number:s,point:s*this.gacha.point,text:this.gacha.count_rest<=100?"\u5168\u3066":"100\u9023",classes:"all_button"})}return t},clickgacha(t){let s=this.gacha.point*t,o=this.gacha.dp_gacha?"EP":"\u30DD\u30A4\u30F3\u30C8";B(`\u30AC\u30C1\u30E3\u3092\u5F15\u304D\u307E\u3059\u304B\uFF1F
`+t+"\u56DE\u5206\u306E"+o+"\u3092"+s.toLocaleString()+o+"\u6D88\u8CBB\u3057\u307E\u3059\u3002").then(i=>{i&&this.start_gacha(t)})},start_gacha(t){this.processing=!0,!this.url_edit&&d({id:this.gacha.id,number:t,code:this.gacha.code}).post(route("user.gacha.start_post"),{onFinish:()=>{this.processing=!1}})}},mounted(){this.url_edit||(this.url_card=route("user.gacha",this.gacha.id)+this.category_share.cat_route_appendix),this.buttons=this.gacha.buttons?this.gacha.buttons.split(",").map(t=>parseInt(t)).sort((t,s)=>t-s):[]}},w={key:0,class:"w-full mx-auto flex flex-col justify-center py-1 px-1 gap-2 md:max-w-md"},C={class:"grid grid-cols-2 gap-2 font-[mplus2]"},T=["onClick","disabled"],F={class:"text-nowrap flex items-center justify-center min-w-36"},G={class:"font-extrabold text-[15px]"},L=a("span",{class:"font-semibold text-[11px]"},"\u30AC\u30C1\u30E3",-1),P={class:"font-semibold text-[13px] ml-2 px-0.5"},j=a("span",{class:"font-semibold text-[13px]"},"EP",-1),D=a("img",{src:"/images/icon_cash.png",class:"ml-2 mr-1 h-4"},null,-1),E={class:"font-semibold text-[13px]"};function I(t,s,o,i,h,e){return o.gacha.count_rest>0?(c(),n("div",w,[a("div",C,[(c(!0),n(l,null,m(e.displayButtons,(r,g)=>(c(),n("button",{key:r.number,onClick:S=>e.clickgacha(r.number),class:f([[r.classes,{"opacity-50":h.processing},{"col-span-2":g===e.displayButtons.length-1&&e.displayButtons.length%2===1}],"cursor-pointer rounded-md bg-gradient-to-br border border-yellow-400/50 text-white text-center space-y-1 pt-1.5 pb-2"]),disabled:h.processing},[a("div",F,[a("span",G,u(r.text),1),L,o.gacha.dp_gacha?(c(),n(l,{key:0},[a("span",P,u(e.format_number(r.point)),1),j],64)):(c(),n(l,{key:1},[D,a("span",E,u(e.format_number(r.point)),1)],64))])],10,T))),128))])])):x("",!0)}const q=b(k,[["render",I]]);export{q as G};
