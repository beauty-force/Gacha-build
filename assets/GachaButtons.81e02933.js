import{L as g,u as _,G as p,o as n,c as i,d as o,F as d,f as m,n as f,t as l,h as x}from"./app.9073e441.js";import{u as y}from"./useConfirm.8fae3221.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as v}from"./PlayIcon.9258947d.js";const{confirm:B}=y(),w={components:{Link:g,PlayIcon:v},props:{gacha:Object},data(){return{category_share:_().props.value.category_share,processing:!1,buttons:[],colorThemes:["from-neutral-500 to-neutral-700 hover:from-neutral-600 hover:to-neutral-800","from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700","from-red-500 to-red-700 hover:from-red-600 hover:to-red-800","from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800","from-green-500 to-green-700 hover:from-green-600 hover:to-green-800"]}},computed:{displayButtons(){if(!this.buttons||this.buttons.length===0)return this.getDefaultButtons();const t=this.buttons.filter(s=>s<=this.gacha.count_rest);return t.length===0?[]:(t[t.length-1]<this.gacha.count_rest&&this.buttons.length>t.length&&t.push(this.gacha.count_rest),t.map((s,a)=>{const h=s*this.gacha.point,c=s>=this.gacha.count_rest?"\u5168\u3066":s==1?"1\u56DE":`${s}\u9023`,e=a%this.colorThemes.length;return{number:s,point:h,text:c,classes:s>=this.gacha.count_rest||s>=100?"all_button":this.colorThemes[e]}}))}},methods:{format_number(t){return String(t).replace(/(.)(?=(\d{3})+$)/g,"$1,")},getDefaultButtons(){const t=[];if(t.push({number:1,point:this.gacha.point,text:"1\u56DE",classes:this.colorThemes[0]}),this.gacha.count_rest>1&&(this.gacha.gacha_limit==0||this.gacha.gacha_limit>1)){const s=this.gacha.count_rest<=10?this.gacha.count_rest:10;t.push({number:s,point:s*this.gacha.point,text:this.gacha.count_rest<=10?"\u5168\u3066":"10\u9023",classes:this.colorThemes[1]})}if(this.gacha.count_rest>10&&(this.gacha.gacha_limit==0||this.gacha.gacha_limit>10)){const s=this.gacha.count_rest<=100?this.gacha.count_rest:100;t.push({number:s,point:s*this.gacha.point,text:this.gacha.count_rest<=100?"\u5168\u3066":"100\u9023",classes:"all_button"})}return t},clickgacha(t){let s=this.gacha.point*t;B(`\u30AC\u30C1\u30E3\u3092\u5F15\u304D\u307E\u3059\u304B\uFF1F
`+t+"\u56DE\u5206\u306E\u30DD\u30A4\u30F3\u30C8\u3092"+s.toLocaleString()+"PT\u6D88\u8CBB\u3057\u307E\u3059\u3002").then(a=>{a&&this.start_gacha(t)})},start_gacha(t){this.processing=!0,!this.url_edit&&p({id:this.gacha.id,number:t,code:this.gacha.code}).post(route("user.gacha.start_post"),{onFinish:()=>{this.processing=!1}})}},mounted(){this.url_edit||(this.url_card=route("user.gacha",this.gacha.id)+this.category_share.cat_route_appendix),this.buttons=this.gacha.buttons?this.gacha.buttons.split(",").map(t=>parseInt(t)).sort((t,s)=>t-s):[]}},k={key:0,class:"w-full mx-auto flex flex-col justify-center py-1 px-1 gap-2 md:max-w-md"},T={class:"grid grid-cols-2 gap-2 font-[mplus2]"},C=["onClick","disabled"],F={class:"text-nowrap flex items-center justify-center min-w-36"},G={class:"font-extrabold text-[15px]"},L=o("span",{class:"font-semibold text-[11px]"},"\u30AC\u30C1\u30E3",-1),j=o("img",{src:"/images/icon_cash.png",class:"ml-2 mr-1 h-4"},null,-1),D={class:"font-semibold text-[13px]"};function I(t,s,a,h,c,e){return a.gacha.count_rest>0?(n(),i("div",k,[o("div",T,[(n(!0),i(d,null,m(e.displayButtons,(r,u)=>(n(),i("button",{key:r.number,onClick:P=>e.clickgacha(r.number),class:f([[r.classes,{"opacity-50":c.processing},{"col-span-2":u===e.displayButtons.length-1&&e.displayButtons.length%2===1}],"cursor-pointer rounded-md bg-gradient-to-br border border-yellow-400/50 text-white text-center space-y-1 pt-1.5 pb-2"]),disabled:c.processing},[o("div",F,[o("span",G,l(r.text),1),L,j,o("span",D,l(e.format_number(r.point)),1)])],10,C))),128))])])):x("",!0)}const E=b(w,[["render",I]]);export{E as G};
