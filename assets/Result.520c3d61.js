import{H as w,L as C,G as j,r as u,o as r,c,b as f,w as A,F as _,d as t,t as d,h as m,f as R,e as D,J as x,a2 as b,n as p}from"./app.61d61bea.js";import{A as z}from"./UserLayout.0bb8c8e3.js";import{u as L}from"./useConfirm.f452735d.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as I}from"./PlayIcon.b1ab9d55.js";import"./index.6311b0cb.js";const{confirm:g,alert:k}=L(),F={components:{Head:w,AppLayout:z,Link:C,PlayIcon:I},props:{errors:Object,auth:Object,category_share:Object,products:Object,token:String,show_review:Boolean,rank:Object,delivery_limit:Number},data(){return{isCheckAll:!1,showRankDialog:!1}},mounted(){this.rank&&(this.showRankDialog=!0)},setup(e){let s={},o;for(o=0;o<e.products.data.length;o++)s["id"+e.products.data[o].id]=!1;return{form:j({checks:s,token:e.token})}},methods:{closeRankDialog(){this.showRankDialog=!1},format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},submit(){let e,s=0;var o=0;for(e=0;e<this.products.data.length;e++)this.form.checks["id"+this.products.data[e].id]&&(s++,o=o+parseInt(this.products.data[e].point));let n="";o>0?n="\u9078\u629E\u3057\u305F"+s+"\u70B9\u306E\u5546\u54C1\u3092"+o+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002":n="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002",g(n).then(a=>{a&&this.form.post(route("user.gacha.result.exchange"),{onFinish:()=>{}})})},delivery(){let e,s=0;var o=0;let n=0;for(e=0;e<this.products.data.length;e++)this.form.checks["id"+this.products.data[e].id]&&(s++,o=o+parseInt(this.products.data[e].point),this.products.data[e].rare=="\u30DD\u30A4\u30F3\u30C8"&&n++);if(n>0){k("\u30DD\u30A4\u30F3\u30C8\u306F\u767A\u9001\u3067\u304D\u307E\u305B\u3093");return}let a="";if(s>0){if(a="\u9078\u629E\u3057\u305F"+s+"\u70B9\u306E\u5546\u54C1\u3092\u767A\u9001\u4F9D\u983C\u3057\u307E\u3059\u3002",o<this.delivery_limit){k("\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u308B\u6700\u4F4E\u30DD\u30A4\u30F3\u30C8\u306F"+this.format_number(this.delivery_limit)+"pt\u3067\u3059\u3002");return}}else a="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002";g(a).then(l=>{l&&this.form.post(route("user.gacha.result.delivery"),{onFinish:()=>{}})})},checkall(){let e;for(e=0;e<this.products.data.length;e++)this.form.checks["id"+this.products.data[e].id]=this.isCheckAll&&this.products.data[e].status!=3},checkone(){this.isCheckAll=this.products.data.length>0,this.products.data.forEach(e=>{this.form.checks["id"+e.id]!=!0&&(this.isCheckAll=!1)})}}},N={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},O={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},B=t("div",{class:"fixed inset-0 bg-black bg-opacity-75 transition-opacity animate-[fadeIn_0.3s_ease-out]","aria-hidden":"true"},null,-1),H=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),P={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full animate-[bounceIn_0.6s_cubic-bezier(0.68,-0.55,0.265,1.55)]"},S={class:"bg-white text-black px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},E={class:"text-center"},T=t("h3",{class:"text-lg leading-6 font-medium text-black mb-4"}," \u{1F389}\u4F1A\u54E1\u30E9\u30F3\u30AF\u5909\u66F4\u306E\u304A\u77E5\u3089\u305B\uFF01\u{1F389} ",-1),U=t("p",{class:"text-black mb-4"},"\u3042\u306A\u305F\u306E\u30E9\u30F3\u30AF\u304C\u30A2\u30C3\u30D7\u3057\u307E\u3057\u305F\u{1F44F}\u2728",-1),G={class:"mb-4"},J=["src"],M={class:"text-left text-black space-y-2 text-sm md:text-base"},q=t("p",{class:"font-bold"},"\u{1F4E6}\u73FE\u5728\u53D7\u3051\u3089\u308C\u308B\u7279\u5178\u4E00\u89A7\u{1F4E6}",-1),K=t("p",null,"\u{1F539} \u30E9\u30F3\u30AF\u9650\u5B9A\uFF1A\u7279\u5225\u30AC\u30C1\u30E3\u304C\u89E3\u653E\u3055\u308C\u307E\u3057\u305F\uFF01",-1),Q=t("p",{class:"text-black mt-4"},"\u{1F4A1}\u7279\u5178\u3092\u6D3B\u304B\u3057\u3066\u3001\u3055\u3089\u306B\u304A\u5F97\u306B\u30A4\u30D6\u30AC\u30C1\u30E3\u3092\u697D\u3057\u3082\u3046\uFF01",-1),W={class:"bg-white px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse justify-center"},X={class:"md:w-[760px] m-auto items-center px-2 h-full flex flex-col justify-center"},Y=t("div",{class:"sticky top-20 z-20 bg-neutral-800 w-full pt-4 md:pt-6 pb-2 md:pb-3"},[t("h1",{class:"text-neutral-100 text-lg underline underline-offset-8 text-center font-bold"},"\xA0\xA0\xA0\u30AC\u30C1\u30E3 \u2013 \u7D50\u679C\xA0\xA0\xA0")],-1),Z=["href"],$=t("div",{class:"bg-theme bg-theme-hover px-3 py-2 rounded-md text-center text-white"},[t("img",{src:"/images/video_review.png",class:"w-full",alt:"\u30AC\u30C1\u30E3\u6F14\u51FA\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B"})],-1),tt=[$],et={class:"mb-3 pt-4 flex flex-wrap justify-center w-full gap-x-6 md:gap-x-4 gap-y-4"},st={class:"relative max-w-40 w-4/5"},ot=["for"],it={class:"text-center p-0 relative mb-1"},nt=["src"],lt=["src","alt"],at={class:"text-white truncate text-center text-md px-4",style:{"line-height":"1.3"}},rt={class:"text-neutral-300 text-md truncate mb-1 text-center px-4",style:{"line-height":"1.3"}},ct={class:"flex justify-center items-center w-fit mx-auto text-white relative rounded-full text-sm text-center px-3 bg-red-500",style:{"line-height":"1.5"}},dt=t("span",{class:"text-white"},"\xA0PT",-1),mt={key:0,class:"flex justify-center items-center w-fit mx-auto text-orange-200 text-[9px]"},ht={key:1,class:"absolute -top-3.5 -right-2"},ut=["id","onUpdate:modelValue"],ft={key:2,class:"absolute w-full top-0 bg-orange-600/90 text-white px-3 py-1"},_t={class:"sticky bottom-16 md:bottom-20 z-10 bg-neutral-800 py-4"},xt={class:"text-center text-neutral-50 mb-3 relative"},bt={class:"cursor-pointer flex items-center justify-center"},pt=t("span",{class:"ml-2 text-sm md:text-base font-bold"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),gt={class:"text-center text-neutral-50 relative flex gap-x-4 max-w-md mx-auto"},kt=["disabled"],vt=["disabled"],yt=t("div",{class:"pb-6 pt-4 text-center text-xs md:text-sm font-semibold text-neutral-200 z-10"}," \u203B\u9078\u629E\u3055\u308C\u306A\u304B\u3063\u305F\u5546\u54C1\u306F\u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3055\u308C\u307E\u3059\u3002 ",-1);function wt(e,s,o,n,a,l){const v=u("Head"),y=u("AppLayout");return r(),c(_,null,[f(v,{title:"\u30AC\u30C1\u30E3\u2013\u7D50\u679C"}),f(y,{is_home:!0},{default:A(()=>[a.showRankDialog?(r(),c("div",N,[t("div",O,[B,H,t("div",P,[t("div",S,[t("div",E,[T,U,t("div",G,[t("img",{src:o.rank.badge,alt:"Rank Image",class:"mx-auto h-32"},null,8,J)]),t("div",M,[q,t("p",null,"\u{1F539} \u30E9\u30F3\u30AF\u30A2\u30C3\u30D7\u30DC\u30FC\u30CA\u30B9\uFF1A"+d(o.rank.bonus.toLocaleString())+"PT\u4ED8\u4E0E\uFF01",1),t("p",null,"\u{1F539} \u8CFC\u5165\u91D1\u984D\u306B\u5FDC\u3058\u3066\uFF1A"+d(o.rank.pt_rate)+"%\u306E\u30DC\u30FC\u30CA\u30B9\u30DD\u30A4\u30F3\u30C8\u9084\u5143\uFF01",1),t("p",null,"\u{1F539} EP\u9084\u5143\u7387\uFF1A"+d(o.rank.dp_rate)+"%\uFF08\u901A\u5E38\u3088\u308A\u304A\u5F97\u306B\u8CAF\u307E\u308B\uFF01\uFF09",1),K]),Q])]),t("div",W,[t("button",{type:"button",onClick:s[0]||(s[0]=(...i)=>l.closeRankDialog&&l.closeRankDialog(...i)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-theme text-base font-medium text-white hover:bg-theme-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-theme sm:ml-3 sm:w-auto sm:text-sm"}," \u9589\u3058\u308B ")])])])])):m("",!0),t("div",X,[Y,o.show_review?(r(),c("a",{key:0,class:"w-full px-3 md:px-6 my-2",href:e.route("user.gacha.video",{token:o.token})},tt,8,Z)):m("",!0),t("div",null,[t("div",et,[(r(!0),c(_,null,R(o.products.data,(i,Ct)=>(r(),c("div",st,[t("label",{for:"checkbox"+i.id,class:"z-10 block cursor-pointer text-center justify-center relative rounded-sm"},[t("div",it,[t("img",{class:"inline-block w-full",src:i.image},null,8,nt),i.badge?(r(),c("img",{key:0,src:i.badge,class:"absolute bottom-0.5 right-0.5 w-[25%]",alt:i.badge},null,8,lt)):m("",!0)]),t("div",at,d(i.name),1),t("div",rt,d(i.rare),1),t("div",ct,[D(d(l.format_number(i.point)),1),dt]),i.status==3?(r(),c("div",mt," \u767A\u9001\u306E\u307F\u306E\u666F\u54C1\u306E\u305F\u3081\u767A\u9001\u4F9D\u983C\u6E08\u307F ")):m("",!0),i.status==1?(r(),c("div",ht,[x(t("input",{id:"checkbox"+i.id,type:"checkbox","onUpdate:modelValue":h=>n.form.checks["id"+i.id]=h,onChange:s[1]||(s[1]=(...h)=>l.checkone&&l.checkone(...h)),class:"h-5 w-5 cursor-pointer rounded border-yellow-400 text-yellow-400 shadow-sm focus:ring-yellow-500"},null,40,ut),[[b,n.form.checks["id"+i.id]]])])):m("",!0),i.status==3?(r(),c("div",ft," \u767A\u9001\u4F9D\u983C\u6E08\u307F ")):m("",!0)],8,ot)]))),256))]),t("div",_t,[t("div",xt,[t("label",bt,[x(t("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=i=>a.isCheckAll=i),onChange:s[3]||(s[3]=i=>l.checkall()),class:"h-5 w-5 rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,544),[[b,a.isCheckAll]]),pt])]),t("div",gt,[t("button",{type:"button",onClick:s[4]||(s[4]=i=>l.submit()),class:p([{"opacity-25":n.form.processing},"inline-block items-center flex-1 py-2 rounded-md font-semibold text-sm md:text-base text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150"]),disabled:n.form.processing}," \u30DD\u30A4\u30F3\u30C8\u306B\u5909\u63DB ",10,kt),t("button",{type:"button",onClick:s[5]||(s[5]=i=>l.delivery()),class:p([{"opacity-25":n.form.processing},"inline-block items-center flex-1 py-2 rounded-md font-semibold text-sm md:text-base text-neutral-600 bg-white hover:text-neutral-800 hover:bg-neutral-200 uppercase tracking-widest transition ease-in-out duration-150"]),disabled:n.form.processing}," \u767A\u9001\u4F9D\u983C ",10,vt)])]),yt])])]),_:1})],64)}const Vt=V(F,[["render",wt]]);export{Vt as default};
