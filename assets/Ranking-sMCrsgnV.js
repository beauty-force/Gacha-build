import{d as m,r as h,c as l,o as s,a as _,w as d,b as e,l as u,e as a,F as x,f as g,n as v,t as n,i as w}from"./app-BTr9j_VE.js";import{U as k}from"./UserLayout-D0q0YFs0.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-Z-qtAhiy.js";import"./index-B057chzG.js";const C={components:{Head:m.Head,AppLayout:k,Link:m.Link},props:{},data(){return{user:null,period:"",users:[],loading:!1,periods:[{title:"本日",period:"daily"},{title:"週間",period:"weekly"},{title:"月間",period:"monthly"}]}},setup(i){},computed:{is_admin(){return this.user&&this.user.type==1}},mounted(){this.user=m.usePage().props.value.auth.user,this.onPeriodSelection("daily")},methods:{onPeriodSelection(i){this.period!=i&&(this.loading=!0,this.users=[],this.period=i,axios.get(route("ranking.data",{period:this.period})).then(t=>{this.loading=!1,this.users=t.data.users}).catch(t=>{}))}}},S={class:"h-full flex flex-col"},j={class:"px-4 pt-4 pb-1"},B={class:"pt-2 w-full"},H={class:"w-full text-neutral-500 space-x-1 border-b-4 border-yellow-500 px-4 flex justify-center"},E=["onClick"],N={class:"flex-1 relative"},P={key:0,class:"absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-neutral-300/75 z-[20]"},V={class:"p-3"},z={key:0,class:"flex justify-center flex-col items-center gap-1 py-2 border-b"},A={class:"relative flex justify-center w-full pb-4"},F=["src"],I={key:1,class:"flex font-bold text-base"},U={class:"flex gap-1 items-center justify-center text-sm"},D={key:1,class:"flex items-center gap-2.5 border-b py-2"},M={class:"w-8 text-center text-xl font-[mplus2]"},R=["src"],T={class:"space-y-0.5"},q={key:1,class:"flex font-bold text-base"},G={class:"flex gap-1 items-center text-sm"};function J(i,t,K,O,o,p){const y=h("Head"),c=h("Link"),b=h("AppLayout");return s(),l(x,null,[_(y,{title:"ランキング"}),_(b,null,{default:d(()=>[e("div",S,[e("div",j,[t[2]||(t[2]=e("h1",{class:"text-xl font-bold flex gap-4 md:gap-6 items-end"},[a(" ランキング "),e("span",{class:"text-xs md:text-sm text-neutral-500 md:leading-6 leading-5"}," ※1時間毎に更新 ")],-1)),p.is_admin?(s(),u(c,{key:0,href:i.route("admin.ranking.history"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:d(()=>[...t[0]||(t[0]=[a(" 報酬履歴 ",-1)])]),_:1},8,["href"])):(s(),u(c,{key:1,href:i.route("ranking.about"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:d(()=>[...t[1]||(t[1]=[a(" 報酬について ",-1)])]),_:1},8,["href"]))]),e("div",B,[e("div",H,[(s(!0),l(x,null,g(o.periods,(r,f)=>(s(),l("button",{onClick:Q=>p.onPeriodSelection(r.period),class:v(["-mb-[1px] flex-1 inline-block text-center py-1.5 rounded-t-md border-yellow-500 border-x border-t",{"bg-yellow-500 text-white":r.period==o.period,"hover:bg-yellow-400 hover:text-white":r.period!=o.period}])},n(r.title),11,E))),256))])]),e("div",N,[o.loading?(s(),l("div",P,[...t[3]||(t[3]=[e("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[e("svg",{class:"animate-spin h-8 w-8 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1)])])):w("",!0),e("div",V,[(s(!0),l(x,null,g(o.users,(r,f)=>(s(),l("div",null,[r.total_points==o.users[0].total_points?(s(),l("div",z,[e("div",A,[e("img",{src:o.users[0].avatar?"/images/avatars/"+o.users[0].avatar:"/images/icon_user.png",class:"w-24 h-24 rounded-full border-[#EE4444] border-2"},null,8,F),t[4]||(t[4]=e("img",{src:"/images/top_one.svg",class:"w-28 absolute bottom-0"},null,-1))]),p.is_admin?(s(),u(c,{key:0,href:i.route("admin.users.detail",{id:o.users[0].id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:d(()=>[a(n(o.users[0].name),1)]),_:1},8,["href"])):(s(),l("span",I,n(o.users[0].name),1)),e("span",U,[t[5]||(t[5]=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1)),a(" "+n(parseInt(o.users[0].total_points).toLocaleString()),1)])])):(s(),l("div",D,[e("span",M,n(o.users[f-1].total_points!=r.total_points?f+1:""),1),e("img",{src:r.avatar?"/images/avatars/"+r.avatar:"/images/icon_user.png",class:"w-14 h-14 rounded-full border"},null,8,R),e("div",T,[p.is_admin?(s(),u(c,{key:0,href:i.route("admin.users.detail",{id:r.id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:d(()=>[a(n(r.name),1)]),_:2},1032,["href"])):(s(),l("span",q,n(r.name),1)),e("span",G,[t[6]||(t[6]=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1)),a(" "+n(parseInt(r.total_points).toLocaleString()),1)])])]))]))),256))])])])]),_:1})],64)}const ee=L(C,[["render",J]]);export{ee as default};
