import{q as C,o as i,i as j,w as l,b as h,D as u,H as L,d as e,e as x,L as p,c as n,f as _,F as a,t as s,h as m,n as B,E as w}from"./app.c76ab1a9.js";import{A as H}from"./Admin.e1cada74.js";import{u as A}from"./useConfirm.0f24beaa.js";import"./_plugin-vue_export-helper.cdc0426e.js";const M={class:"mx-auto"},S={class:"bg-white overflow-hidden"},V={class:"p-3 md:p-6 bg-white"},$={class:"flex justify-between items-center mb-4"},N=e("h3",{class:"text-lg font-medium"},"\u30D7\u30E9\u30F3\u4E00\u89A7",-1),z={class:"hidden md:block overflow-x-auto"},U={class:"min-w-full divide-y divide-gray-200"},D=e("thead",{class:"bg-gray-50 whitespace-nowrap"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30D7\u30E9\u30F3\u540D "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u8AAC\u660E "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u753B\u50CF "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u91D1\u984D "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30DC\u30FC\u30CA\u30B9\u7387 "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30E6\u30FC\u30B6\u30FC\u6570 "),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u64CD\u4F5C ")])],-1),E={class:"bg-white divide-y divide-gray-200"},F={class:"px-3 py-1 whitespace-nowrap"},I={class:"px-3 py-1"},P={class:"px-3 py-1 whitespace-nowrap"},q=["src"],O={class:"px-3 py-1 whitespace-nowrap"},T={class:"px-3 py-1 whitespace-nowrap"},G={class:"px-3 py-1 whitespace-nowrap"},J={class:"flex items-center space-x-2"},K=["onClick"],Q={class:"whitespace-nowrap"},R={class:"flex gap-1"},W=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),X=["onClick"],Y=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Z=[Y],ee={key:0,class:"bg-gray-50"},te={colspan:"7",class:"px-6 py-4"},se={class:"space-y-2"},oe=e("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"\u30E6\u30FC\u30B6\u30FC\u4E00\u89A7",-1),ie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},ne=["onClick"],de={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},re={class:"text-sm font-medium text-gray-600"},ce={class:"text-sm font-medium text-gray-900"},ae={class:"text-xs text-gray-500"},le={class:"md:hidden space-y-4"},he={class:"p-4"},ue={class:"flex items-start justify-between mb-3"},_e={class:"flex-1"},me={class:"text-lg font-semibold text-gray-900 mb-1"},xe={class:"text-sm text-gray-600 mb-2"},pe={class:"flex items-center space-x-4 text-sm"},ge={class:"text-gray-700"},fe={class:"text-gray-700"},ve={class:"text-blue-600 font-medium"},ye=["src"],we={key:0,class:"border-t pt-3"},be=["onClick"],ke=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),Ce=[ke],je={key:0,class:"mt-3 space-y-2"},Le=["onClick"],Be={class:"flex items-center space-x-3"},He={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},Ae={class:"text-xs font-medium text-gray-600"},Me={class:"text-sm font-medium text-gray-900"},Se={class:"text-xs text-gray-500"},Ve={class:"flex justify-end space-x-2 mt-4 pt-3 border-t"},$e=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Ne=["onClick"],ze=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Pe={__name:"Index",props:{plans:Array},setup(g){const{confirm:b,alert:Ue}=A(),r=C([]),f=d=>{const c=r.value.indexOf(d);c>-1?r.value.splice(c,1):r.value.push(d)},v=d=>{b("\u3053\u306E\u30D7\u30E9\u30F3\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F").then(c=>{c&&w.Inertia.delete(route("admin.plans.destroy",d.id))})},y=d=>{w.Inertia.visit(route("admin.users.detail",{id:d}),{preserveScroll:!0,preserveState:!0})};return(d,c)=>(i(),j(H,null,{default:l(()=>[h(u(L),{title:"\u30D7\u30E9\u30F3\u7BA1\u7406"}),e("div",null,[e("div",M,[e("div",S,[e("div",V,[e("div",$,[N,h(u(p),{href:d.route("admin.plans.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:l(()=>[x(" \u65B0\u898F\u30D7\u30E9\u30F3\u4F5C\u6210 ")]),_:1},8,["href"])]),e("div",z,[e("table",U,[D,e("tbody",E,[(i(!0),n(a,null,_(g.plans,t=>(i(),n(a,{key:t.id},[e("tr",null,[e("td",F,s(t.name),1),e("td",I,s(t.description),1),e("td",P,[e("img",{src:t.image,class:"w-32 h-20 inline-block object-contain"},null,8,q)]),e("td",O," \xA5 "+s(t.amount.toLocaleString()),1),e("td",T,s(t.point.toLocaleString())+" pt ",1),e("td",G,[e("div",J,[e("span",null,s(t.users?t.users.length:0)+" \u4EBA",1),t.users&&t.users.length>0?(i(),n("button",{key:0,onClick:o=>f(t.id),class:"text-blue-600 hover:text-blue-900 text-sm"},s(r.value.includes(t.id)?"\u96A0\u3059":"\u8868\u793A"),9,K)):m("",!0)])]),e("td",Q,[e("div",R,[h(u(p),{href:d.route("admin.plans.edit",t.id),class:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100 rounded-full p-2"},{default:l(()=>[W]),_:2},1032,["href"]),e("button",{onClick:o=>v(t),class:"text-red-600 hover:text-red-900 hover:bg-red-100 rounded-full p-2"},Z,8,X)])])]),t.users&&t.users.length>0&&r.value.includes(t.id)?(i(),n("tr",ee,[e("td",te,[e("div",se,[oe,e("div",ie,[(i(!0),n(a,null,_(t.users,o=>(i(),n("div",{key:o.id,class:"flex items-center space-x-3 p-3 bg-white rounded-lg border cursor-pointer",onClick:k=>y(o.id)},[e("div",de,[e("span",re,s(o.name?o.name.charAt(0):"U"),1)]),e("div",null,[e("p",ce,s(o.name||"\u540D\u524D\u306A\u3057"),1),e("p",ae,s(o.email),1)])],8,ne))),128))])])])])):m("",!0)],64))),128))])])]),e("div",le,[(i(!0),n(a,null,_(g.plans,t=>(i(),n("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[e("div",he,[e("div",ue,[e("div",_e,[e("h4",me,s(t.name),1),e("p",xe,s(t.description),1),e("div",pe,[e("span",ge,"\xA5"+s(t.amount.toLocaleString()),1),e("span",fe,s(t.point.toLocaleString())+" pt",1),e("span",ve,s(t.users?t.users.length:0)+" \u30E6\u30FC\u30B6\u30FC",1)])]),e("img",{src:t.image,class:"w-20 h-16 object-contain ml-3"},null,8,ye)]),t.users&&t.users.length>0?(i(),n("div",we,[e("button",{onClick:o=>f(t.id),class:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900"},[e("span",null,"\u30E6\u30FC\u30B6\u30FC\u4E00\u89A7\u3092"+s(r.value.includes(t.id)?"\u96A0\u3059":"\u8868\u793A"),1),(i(),n("svg",{class:B(["w-4 h-4 transition-transform duration-200",{"rotate-180":r.value.includes(t.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ce,2))],8,be),r.value.includes(t.id)?(i(),n("div",je,[(i(!0),n(a,null,_(t.users,o=>(i(),n("div",{key:o.id,class:"flex items-center justify-between p-2 bg-gray-50 rounded cursor-pointer",onClick:k=>y(o.id)},[e("div",Be,[e("div",He,[e("span",Ae,s(o.name?o.name.charAt(0):"U"),1)]),e("div",null,[e("p",Me,s(o.name||"\u540D\u524D\u306A\u3057"),1),e("p",Se,s(o.email),1)])])],8,Le))),128))])):m("",!0)])):m("",!0),e("div",Ve,[h(u(p),{href:d.route("admin.plans.edit",t.id),class:"flex items-center px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-md"},{default:l(()=>[$e,x(" \u7DE8\u96C6 ")]),_:2},1032,["href"]),e("button",{onClick:o=>v(t),class:"flex items-center px-3 py-2 text-sm font-medium text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md"},[ze,x(" \u524A\u9664 ")],8,Ne)])])]))),128))])])])])])]),_:1}))}};export{Pe as default};
