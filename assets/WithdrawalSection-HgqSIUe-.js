import{r as d,c as a,o as n,a9 as u,b as e,i as x,j as w,a as c,v as b,n as g,t as m,d as y}from"./app-DgUmgxei.js";import{_ as h}from"./InputError-BMf8pPEw.js";import{u as _}from"./useConfirm-C4UDPcad.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as D}from"./ExclamationTriangleIcon-CbXgtT-6.js";const{confirm:E,alert:k}=_(),S={components:{InputError:h,ExclamationTriangleIcon:D},props:{withdrawalRequestedAt:String},setup(){return{form:y.useForm({confirmation:""})}},methods:{submitWithdrawal(){if(this.form.confirmation!=="削除"){k("「削除」と正確に入力してください。");return}E("本当に退会しますか？","退会申請を行うと、7日後にアカウントが完全に削除されます。7日以内にログインするとキャンセルされます。","warning").then(o=>{o&&this.form.post(route("user.withdrawal.request"),{onFinish:()=>{this.form.confirmation="",window.location.reload()}})})},formatDate(o){return o?new Date(o).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},getDeletionDate(o){if(!o)return null;const t=new Date(o);return t.setDate(t.getDate()+7),t.toISOString()}}},I={class:"space-y-4"},C={class:"space-y-4"},V=["disabled"],q={key:0},A={key:1},N={key:0,class:"bg-yellow-50 rounded-lg border border-yellow-300 p-4"},R={class:"flex items-start gap-2"},T={class:"space-y-2 text-sm"},W={class:"text-yellow-800"},B={class:"text-yellow-800"};function j(o,t,i,r,F,s){const f=d("InputError"),p=d("ExclamationTriangleIcon");return n(),a("div",I,[t[5]||(t[5]=u('<h2 class="text-lg font-bold text-neutral-900">退会申請</h2><div class="space-y-2 text-sm text-neutral-700"><p> 退会申請を行うと、申請日から7日後にアカウントが完全に削除されます。 </p><p> 申請後7日以内に再度ログインされた場合、退会申請は自動的にキャンセルされます。 </p><p class="text-xs text-neutral-500"> *完全削除される日付と時刻は1日前にメールでお知らせします。 </p></div><div class="font-bold text-base text-neutral-900 pt-2 border-t border-neutral-200"> 本当に退会されますか？ </div><div class="bg-red-50 rounded-lg border border-red-200 p-4 space-y-3"><div class="space-y-2 text-sm text-neutral-700"><p> 退会申請から7日が経過し、アカウントが削除されると、保有しているコイン、獲得済みカードを含むすべてのデータおよび商品は完全に消去され、復元することはできません。 </p><p> また、発送依頼中、発送済みなどの全ての商品に関するサポート、対応等ができかねます。 </p><p> 削除をご希望の場合は、下記フォームに「削除」と入力のうえ、送信ボタンをタップしてください。退会が完了すると所持されているポイント、EPは全て消失いたします。 </p><p class="text-xs text-neutral-600 pt-2 border-t border-red-200"> また、新たにアカウントを作成される場合、不正利用防止の観点から、以前ご登録されていた電話番号でのSMS認証はご利用いただけませんので、あらかじめご了承ください。 </p></div></div>',4)),e("div",C,[e("div",null,[t[2]||(t[2]=e("label",{for:"confirmation",class:"block text-sm font-bold mb-2"}," 確認のため「削除」と入力してください ",-1)),w(e("input",{id:"confirmation","onUpdate:modelValue":t[0]||(t[0]=l=>r.form.confirmation=l),type:"text",class:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:border-yellow-500 focus:ring focus:ring-yellow-200 focus:ring-opacity-50",placeholder:"削除"},null,512),[[b,r.form.confirmation]]),c(f,{class:"mt-2",message:r.form.errors.confirmation},null,8,["message"])]),e("button",{type:"button",onClick:t[1]||(t[1]=(...l)=>s.submitWithdrawal&&s.submitWithdrawal(...l)),disabled:r.form.processing||r.form.confirmation!=="削除",class:g(["w-full py-3 rounded-md font-semibold text-white transition-colors",r.form.processing||r.form.confirmation!=="削除"?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])},[r.form.processing?(n(),a("span",q,"処理中...")):(n(),a("span",A,"削除する"))],10,V)]),i.withdrawalRequestedAt?(n(),a("div",N,[e("div",R,[c(p,{class:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e("div",T,[t[3]||(t[3]=e("p",{class:"font-bold text-yellow-900"}," 退会申請が受理されました ",-1)),e("p",W," 退会申請日: "+m(s.formatDate(i.withdrawalRequestedAt)),1),e("p",B," 削除予定日: "+m(s.formatDate(s.getDeletionDate(i.withdrawalRequestedAt))),1),t[4]||(t[4]=e("p",{class:"text-xs text-yellow-700 pt-2"}," 7日以内にログインすると、退会申請は自動的にキャンセルされます。 ",-1))])])])):x("",!0)])}const O=v(S,[["render",j]]);export{O as default};
