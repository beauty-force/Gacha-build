import{d as i,r as u,c as n,o as l,a as m,w as v,b as e,e as _,t as a,j as x,v as k,k as C,F as f,f as h,i as S,y as j}from"./app-DD9omvKC.js";import{A as V}from"./Admin-C4yZ5GHu.js";import{P as L}from"./Pagination-tndpwlec.js";import{G as N}from"./GachaCard-C1psp2-d.js";import{u as F}from"./useConfirm-DqzKcb5y.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CjfmXPOA.js";import"./GachaButtons-CTFGrDsT.js";import"./PlayIcon-HOMxmXBS.js";const{confirm:b}=F(),A={components:{Head:i.Head,AppLayout:V,Link:i.Link,GachaCard:N,Pagination:L},props:{errors:Object,users:Object,search_cond:Object,total:Number,total_point:Number},mounted(){},methods:{search(){this.form_search.get(route("admin.users"))},go_detail(s){this.$inertia.visit(route("admin.users.detail",{id:s}),{preserveScroll:!0,preserveState:!0})},updateStatus(s,t){t==0?b("アカウントをブロックしますか？","獲得した商品と発送依頼中の商品は全て回収されます。","warning").then(r=>{r&&i.useForm({id:s,status:t}).post(route("admin.users.update"))}):b("アカウントを承認しますか？").then(r=>{r&&i.useForm({id:s,status:t}).post(route("admin.users.update"))})},format_number(s){return s==null?0:String(s).replace(/(.)(?=(\d{3})+$)/g,"$1,")}},setup(s){return{form_search:i.useForm(s.search_cond)}}},H={class:"md:px-4 px-2"},B={class:"border-b w-full p-2 my-2 font-semibold flex justify-between flex-wrap items-center gap-3"},O={class:"font-normal flex gap-2"},T={class:"font-bold"},D=["href"],E={class:"w-full flex flex-col gap-4 mb-8"},G={class:"w-full flex justify-between gap-4"},M={class:"flex-1 flex flex-wrap gap-2"},U={class:"flex gap-2"},z={class:"w-full overflow-auto"},I={class:"min-w-full"},q={class:"text-sm"},J=["onClick"],K={class:"text-center py-3 px-1"},Q={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},R={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},W={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},X={class:"text-center py-3 px-1"},Y={class:"flex flex-wrap gap-1 justify-center"},Z={key:0,class:"text-gray-400 text-xs"};function $(s,t,r,c,ee,d){const y=u("Head"),w=u("Pagination"),g=u("AppLayout");return l(),n(f,null,[m(y,{title:"ユーザー管理"}),m(g,null,{default:v(()=>[e("div",H,[e("div",B,[t[5]||(t[5]=e("h3",null,"ユーザー管理",-1)),e("span",O,[t[3]||(t[3]=_("合計ポイント: ",-1)),e("span",T,a(d.format_number(r.total_point)),1),t[4]||(t[4]=_("PT",-1))]),e("a",{href:s.route("admin.users.export"),class:"rounded-md border bg-green-600 text-white px-4 py-1 hover:bg-green-700 text-sm"},"CSVエクスポート",8,D)]),e("div",E,[e("div",G,[e("div",M,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>c.form_search.keyword=o),type:"text",class:"text-sm flex-1 md:min-w-96 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"ユーザー名、メールアドレス、電話番号を入力します。"},null,512),[[k,c.form_search.keyword]]),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.form_search.order_by=o),id:"order_by",class:"bg-white/90 flex-1 px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400"},[...t[6]||(t[6]=[e("option",{value:"amount"},"購入金額",-1),e("option",{value:"rank"},"ランク",-1),e("option",{value:"status"},"状態",-1)])],512),[[C,c.form_search.order_by]])]),e("div",U,[e("button",{type:"button",onClick:t[2]||(t[2]=(...o)=>d.search&&d.search(...o)),class:"rounded-md border bg-neutral-600 text-white px-4 py-1"},"検索")])]),e("div",z,[e("table",I,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-collapse border-yellow-100 whitespace-nowrap"},[e("th",{class:"text-center py-2"},"名前"),e("th",{class:"text-center py-2"},"電話番号"),e("th",{class:"text-center py-2"},"購入金額"),e("th",{class:"text-center py-2"},"ランク"),e("th",{class:"text-center py-2"},"タグ")])],-1)),e("tbody",q,[(l(!0),n(f,null,h(r.users,o=>(l(),n("tr",{class:"border border-yellow-100 divide-x-2 divide-sky-50 border-collapse cursor-pointer hover:bg-sky-100",onClick:p=>d.go_detail(o.id)},[e("td",K,a(o.first_name)+" "+a(o.last_name),1),e("td",Q,a(o.phone),1),e("td",R,a(d.format_number(o.amount)),1),e("td",W,a(o.rank),1),e("td",X,[e("div",Y,[(l(!0),n(f,null,h(o.tags||[],p=>(l(),n("span",{key:p.id,class:"px-2 py-0.5 rounded-full text-xs font-medium text-white",style:j({backgroundColor:p.color_theme})},a(p.name),5))),128)),!o.tags||o.tags.length===0?(l(),n("span",Z,"-")):S("",!0)])])],8,J))),256))])])]),m(w,{search_cond:r.search_cond,route_name:"admin.users",total:r.total},null,8,["search_cond","total"])])])]),_:1})],64)}const ce=P(A,[["render",$]]);export{ce as default};
