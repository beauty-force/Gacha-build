import{d as p,r as m,c as l,o as d,a as u,w as v,b as e,e as x,t as a,j as h,v as k,k as C,F as f,f as b,i as S,y as j}from"./app-DgUmgxei.js";import{A as V}from"./Admin-CiPIkyx0.js";import{P as L}from"./Pagination-BgUOZSS1.js";import{G as N}from"./GachaCard-DYCXQiCb.js";import{u as P}from"./useConfirm-C4UDPcad.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Category-BQFnIiTG.js";import"./index-CkxHydh2.js";import"./GachaButtons-jG98UA1r.js";import"./PlayIcon-DO1QsWqG.js";const{confirm:F}=P(),H={components:{Head:p.Head,AppLayout:V,Link:p.Link,GachaCard:N,Pagination:L},props:{errors:Object,users:Object,search_cond:Object,total:Number,total_point:Number},mounted(){},methods:{search(){this.form_search.get(route("admin.users"))},go_detail(r){this.$inertia.visit(route("admin.users.detail",{id:r}),{preserveScroll:!0,preserveState:!0})},updateStatus(r,t){let s="",n="";t==1?(s="アカウントをアクティブにしますか？",n="アカウントが通常状態に戻ります。"):t==0?(s="アカウントを停止しますか？",n="獲得した商品と発送依頼中の商品は全て回収されます。"):t==2&&(s="アカウントを削除しますか？",n="ユーザー情報などを削除し、ユーザー管理には表示されなくなります。この操作は取り消せません。"),F(s,n,t==2?"error":t==0?"warning":"info").then(_=>{_&&p.useForm({id:r,status:t}).post(route("admin.users.update"))})},format_number(r){return r==null?0:String(r).replace(/(.)(?=(\d{3})+$)/g,"$1,")}},setup(r){return{form_search:p.useForm(r.search_cond)}}},B={class:"md:px-4 px-2"},O={class:"border-b w-full p-2 my-2 font-semibold flex justify-between flex-wrap items-center gap-3"},T={class:"font-normal flex gap-2"},D={class:"font-bold"},E=["href"],G={class:"w-full flex flex-col gap-4 mb-8"},M={class:"w-full flex justify-between gap-4"},U={class:"flex-1 flex flex-wrap gap-2"},z={class:"flex gap-2"},I={class:"w-full overflow-auto"},q={class:"min-w-full"},J={class:"text-sm"},K=["onClick"],Q={class:"text-center py-3 px-1"},R={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},W={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},X={class:"text-center py-3 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},Y={class:"text-center py-3 px-1"},Z={class:"flex flex-wrap gap-1 justify-center"},$={key:0,class:"text-gray-400 text-xs"};function ee(r,t,s,n,_,i){const y=m("Head"),w=m("Pagination"),g=m("AppLayout");return d(),l(f,null,[u(y,{title:"ユーザー管理"}),u(g,null,{default:v(()=>[e("div",B,[e("div",O,[t[5]||(t[5]=e("h3",null,"ユーザー管理",-1)),e("span",T,[t[3]||(t[3]=x("合計ポイント: ",-1)),e("span",D,a(i.format_number(s.total_point)),1),t[4]||(t[4]=x("PT",-1))]),e("a",{href:r.route("admin.users.export"),class:"rounded-md border bg-green-600 text-white px-4 py-1 hover:bg-green-700 text-sm"},"CSVエクスポート",8,E)]),e("div",G,[e("div",M,[e("div",U,[h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.form_search.keyword=o),type:"text",class:"text-sm flex-1 md:min-w-96 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"ユーザー名、メールアドレス、電話番号を入力します。"},null,512),[[k,n.form_search.keyword]]),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.form_search.order_by=o),id:"order_by",class:"bg-white/90 flex-1 px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400"},[...t[6]||(t[6]=[e("option",{value:"amount"},"購入金額",-1),e("option",{value:"rank"},"ランク",-1),e("option",{value:"status"},"状態",-1)])],512),[[C,n.form_search.order_by]])]),e("div",z,[e("button",{type:"button",onClick:t[2]||(t[2]=(...o)=>i.search&&i.search(...o)),class:"rounded-md border bg-neutral-600 text-white px-4 py-1"},"検索")])]),e("div",I,[e("table",q,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-collapse border-yellow-100 whitespace-nowrap"},[e("th",{class:"text-center py-2"},"名前"),e("th",{class:"text-center py-2"},"電話番号"),e("th",{class:"text-center py-2"},"購入金額"),e("th",{class:"text-center py-2"},"ランク"),e("th",{class:"text-center py-2"},"タグ")])],-1)),e("tbody",J,[(d(!0),l(f,null,b(s.users,o=>(d(),l("tr",{class:"border border-yellow-100 divide-x-2 divide-sky-50 border-collapse cursor-pointer hover:bg-sky-100",onClick:c=>i.go_detail(o.id)},[e("td",Q,a(o.first_name)+" "+a(o.last_name),1),e("td",R,a(o.phone),1),e("td",W,a(i.format_number(o.amount)),1),e("td",X,a(o.rank),1),e("td",Y,[e("div",Z,[(d(!0),l(f,null,b(o.tags||[],c=>(d(),l("span",{key:c.id,class:"px-2 py-0.5 rounded-full text-xs font-medium text-white",style:j({backgroundColor:c.color_theme})},a(c.name),5))),128)),!o.tags||o.tags.length===0?(d(),l("span",$,"-")):S("",!0)])])],8,K))),256))])])]),u(w,{search_cond:s.search_cond,route_name:"admin.users",total:s.total},null,8,["search_cond","total"])])])]),_:1})],64)}const pe=A(H,[["render",ee]]);export{pe as default};
