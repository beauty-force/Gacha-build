import{H as k,L as y,G as w,r as u,o as a,c as l,b as f,w as v,F as _,d as e,h as r,I as C,f as j,t as m,e as A,J as x,a2 as p,n as V}from"./app.7e4cc698.js";import{A as z}from"./UserLayout.9b2e7cdd.js";import{u as L}from"./useConfirm.b9f55074.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as F}from"./PlayIcon.9da2e243.js";import"./index.78917769.js";const{confirm:H}=L(),N={components:{Head:k,AppLayout:z,Link:y,PlayIcon:F},props:{errors:Object,auth:Object,category_share:Object,products:Object,token:String,show_review:Boolean},data(){return{isCheckAll:!1}},setup(t){let o={},i;for(i=0;i<t.products.data.length;i++)o["id"+t.products.data[i].id]=!1;return{form:w({checks:o,token:t.token})}},methods:{format_number(t){return String(t).replace(/(.)(?=(\d{3})+$)/g,"$1,")},submit(){let t,o=0;var i=0;for(t=0;t<this.products.data.length;t++)this.form.checks["id"+this.products.data[t].id]&&(o++,i=i+parseInt(this.products.data[t].point));let n="";i>0?n="\u9078\u629E\u3057\u305F"+o+"\u70B9\u306E\u5546\u54C1\u3092"+i+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002":n="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002",H(n).then(d=>{d&&this.form.post(route("user.gacha.result.exchange"),{onFinish:()=>{}})})},checkall(){let t;for(t=0;t<this.products.data.length;t++)this.form.checks["id"+this.products.data[t].id]=this.isCheckAll},checkone(){this.isCheckAll=this.products.data.length>0,this.products.data.forEach(t=>{this.form.checks["id"+t.id]!=!0&&(this.isCheckAll=!1)})}}},O={class:"md:w-[760px] m-auto items-center px-2 h-full flex flex-col justify-center"},S=e("div",{class:"sticky top-20 z-20 bg-neutral-800 w-full pt-4 md:pt-6 pb-2 md:pb-3"},[e("h1",{class:"text-neutral-100 text-lg underline underline-offset-8 text-center font-bold"},"\xA0\xA0\xA0\u30AC\u30C1\u30E3 \u2013 \u7D50\u679C\xA0\xA0\xA0")],-1),I=["href"],U=e("div",{class:"bg-theme bg-theme-hover px-3 py-2 rounded-md text-center text-white"},[e("img",{src:"/images/video_review.png",class:"w-full",alt:"\u30AC\u30C1\u30E3\u6F14\u51FA\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B"})],-1),D=[U],E={class:"mb-3 pt-4 flex flex-wrap justify-center w-full gap-x-6 md:gap-x-4 gap-y-4"},M={class:"relative max-w-40 w-4/5"},P=["for"],T={class:"text-center p-0 relative mb-1"},G=["src"],J=["src","alt"],R={class:"text-white truncate text-center text-md px-4",style:{"line-height":"1.3"}},q={class:"text-neutral-300 text-md truncate mb-1 text-center px-4",style:{"line-height":"1.3"}},K={class:"flex justify-center items-center w-fit mx-auto text-white relative rounded-full text-sm text-center px-3 bg-red-500",style:{"line-height":"1.5"}},Q=e("span",{class:"text-white"},"\xA0PT",-1),W={key:0,class:"flex justify-center items-center w-fit mx-auto text-orange-200 text-[9px]"},X={key:1,class:"absolute -top-3.5 -right-2"},Y=["id","onUpdate:modelValue"],Z={key:2,class:"absolute w-full top-0 bg-orange-600/90 text-white px-3 py-1"},$={key:0,class:"absolute top-0 left-0 z-0 w-full h-full flex justify-center items-center"},ee=e("img",{src:"/images/sparking_star.png",style:{"max-width":"200%"}},null,-1),te=[ee],se={class:"sticky bottom-16 md:bottom-20 z-10 bg-neutral-800 py-4"},oe={class:"text-center text-neutral-50 mb-3 relative"},ie={class:"cursor-pointer flex items-center justify-center"},ne=e("span",{class:"ml-2 text-sm md:text-base font-bold"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),ae={class:"text-center text-neutral-50 relative"},le=["disabled"],re=e("div",{class:"pb-6 pt-4 text-center text-xs md:text-sm font-semibold text-neutral-200 z-10"}," \u203B\u9078\u629E\u3055\u308C\u306A\u304B\u3063\u305F\u5546\u54C1\u306F\u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3055\u308C\u307E\u3059\u3002 ",-1);function ce(t,o,i,n,d,c){const b=u("Head"),g=u("AppLayout");return a(),l(_,null,[f(b,{title:"\u30AC\u30C1\u30E3\u2013\u7D50\u679C"}),f(g,{is_home:!0},{default:v(()=>[e("div",O,[S,i.show_review?(a(),l("a",{key:0,class:"w-full px-3 md:px-6 my-2",href:t.route("user.gacha.video",{token:i.token})},D,8,I)):r("",!0),e("form",{onSubmit:o[3]||(o[3]=C(s=>c.submit(),["prevent"]))},[e("div",E,[(a(!0),l(_,null,j(i.products.data,(s,de)=>(a(),l("div",M,[e("label",{for:"checkbox"+s.id,class:"z-10 block cursor-pointer text-center justify-center relative rounded-sm"},[e("div",T,[e("img",{class:"inline-block w-full",src:s.image},null,8,G),s.badge?(a(),l("img",{key:0,src:s.badge,class:"absolute bottom-0.5 right-0.5 w-[25%]",alt:s.badge},null,8,J)):r("",!0)]),e("div",R,m(s.name),1),e("div",q,m(s.rare),1),e("div",K,[A(m(c.format_number(s.point)),1),Q]),s.status==3?(a(),l("div",W," \u767A\u9001\u306E\u307F\u306E\u666F\u54C1\u306E\u305F\u3081\u767A\u9001\u4F9D\u983C\u6E08\u307F ")):r("",!0),s.status==1?(a(),l("div",X,[x(e("input",{id:"checkbox"+s.id,type:"checkbox","onUpdate:modelValue":h=>n.form.checks["id"+s.id]=h,onChange:o[0]||(o[0]=(...h)=>c.checkone&&c.checkone(...h)),class:"h-5 w-5 cursor-pointer rounded border-yellow-400 text-yellow-400 shadow-sm focus:ring-yellow-500"},null,40,Y),[[p,n.form.checks["id"+s.id]]])])):r("",!0),s.status==3?(a(),l("div",Z," \u767A\u9001\u4F9D\u983C\u6E08\u307F ")):r("",!0)],8,P),s.is_last?(a(),l("div",$,te)):r("",!0)]))),256))]),e("div",se,[e("div",oe,[e("label",ie,[x(e("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=s=>d.isCheckAll=s),onChange:o[2]||(o[2]=s=>c.checkall()),class:"h-5 w-5 rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,544),[[p,d.isCheckAll]]),ne])]),e("div",ae,[e("button",{type:"submit",class:V([{"opacity-25":n.form.processing},"inline-block items-center px-8 py-2 rounded-md font-semibold text-sm md:text-base text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150"]),disabled:n.form.processing}," \u9078\u629E\u3057\u305F\u5546\u54C1\u3092\u30DD\u30A4\u30F3\u30C8\u306B\u5909\u63DB ",10,le)])]),re],32)])]),_:1})],64)}const pe=B(N,[["render",ce]]);export{pe as default};
