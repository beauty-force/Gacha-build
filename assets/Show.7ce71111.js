import{G as V,q as k,o as u,c as g,b as p,D as a,w as v,V as D,F as q,H as L,d as e,L as z,e as _,t as n,n as x,f as N,h as f,I as m,J as j,K as T,a1 as $,a6 as F,a7 as O}from"./app.1344c7a3.js";import{A}from"./Admin.f073411e.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import"./useConfirm.a9e673e9.js";const s=t=>(F("data-v-9a50d564"),t=t(),O(),t),J={class:"py-3"},U={class:"w-full"},E={class:"px-4 sm:px-6 py-1"},G=s(()=>e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),K={class:"bg-white shadow-sm sm:rounded-lg"},P={class:"p-3 sm:p-6 text-gray-900"},Q={class:"mb-6 pb-6 border-b border-gray-200"},R={class:"flex items-start justify-between mb-4"},W={class:"space-y-1"},X={class:"text-lg font-bold text-gray-900 mb-2"},Y={class:"flex items-center space-x-4 text-sm text-gray-500 px-2"},Z=s(()=>e("span",null,"\u2022",-1)),ee={class:"bg-gray-50 rounded-lg p-4"},te={class:"text-gray-700 whitespace-pre-line mb-4"},se={key:0,class:"mt-4"},oe={class:"text-sm font-semibold text-gray-700 mb-2"},ne={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},le=["onClick"],ie=["src","alt"],ae=s(()=>e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center pointer-events-none"},[e("svg",{class:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),re=["onSubmit"],de=s(()=>e("label",{for:"admin_response",class:"block text-sm font-medium text-gray-700 mb-2"}," \u7BA1\u7406\u8005\u306E\u56DE\u7B54 ",-1)),ce=s(()=>e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," \u30B9\u30C6\u30FC\u30BF\u30B9 ",-1)),ue=s(()=>e("option",{value:"pending"},"\u672A\u5BFE\u5FDC",-1)),ge=s(()=>e("option",{value:"answered"},"\u56DE\u7B54\u6E08\u307F",-1)),he=s(()=>e("option",{value:"closed"},"\u30AF\u30ED\u30FC\u30BA",-1)),me=[ue,ge,he],pe={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-gray-700"},fe=s(()=>e("strong",null,"\u6700\u7D42\u66F4\u65B0:",-1)),ve={key:0},_e=s(()=>e("strong",null,"\u5BFE\u5FDC\u8005:",-1)),xe={class:"flex justify-end space-x-3"},be=["disabled"],ye={class:"flex flex-col items-center justify-center h-screen p-4 gap-2"},we=s(()=>e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-90 transition-opacity"},null,-1)),ke={class:"relative z-10 flex items-center justify-center gap-4 w-full max-w-6xl flex-shrink-0"},qe=s(()=>e("div",{class:"flex-1"},null,-1)),je={class:"px-4 py-2 bg-white rounded-full text-gray-900 text-sm font-bold shadow-xl"},Ce={class:"flex-1 flex justify-end"},Me=["onClick"],Se=s(()=>e("svg",{class:"w-6 h-6 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M6 18L18 6M6 6l12 12"})],-1)),Ie=[Se],Be={class:"relative z-10 flex flex-col items-center w-full max-w-6xl flex-1 min-h-0 gap-2"},Ve={class:"flex-1 flex items-center justify-center min-h-0 w-full"},De=["src"],Le={class:"flex items-center justify-center gap-3 flex-shrink-0"},ze=["onClick","disabled"],Ne=s(()=>e("svg",{class:"w-6 h-6 text-gray-800 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M15 19l-7-7 7-7"})],-1)),Te=[Ne],$e=["onClick","disabled"],Fe=s(()=>e("svg",{class:"w-6 h-6 text-gray-800 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M9 5l7 7-7 7"})],-1)),Oe=[Fe],Ae={__name:"Show",props:{question:Object},setup(t){const r=t,d=V({status:r.question.status,admin_response:r.question.admin_response||""}),c=k(null),o=k(0),C=l=>{console.log("Opening image:",l),c.value=l,o.value=r.question.images.indexOf(l),console.log("selectedImage is now:",c.value)},M=()=>{o.value<r.question.images.length-1&&(o.value++,c.value=r.question.images[o.value])},S=()=>{o.value>0&&(o.value--,c.value=r.question.images[o.value])},b=()=>{c.value=null},I=()=>{d.post(route("admin.support-questions.update-status",r.question.id))},B=l=>({pending:"\u672A\u5BFE\u5FDC",answered:"\u56DE\u7B54\u6E08\u307F",closed:"\u30AF\u30ED\u30FC\u30BA"})[l]||l,y=l=>new Date(l).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(l,i)=>(u(),g(q,null,[p(a(L),{title:"\u30B5\u30DD\u30FC\u30C8\u8CEA\u554F\u8A73\u7D30"}),p(A,null,{default:v(()=>[e("div",J,[e("div",U,[e("div",E,[p(a(z),{href:l.route("admin.support-questions.index"),class:"inline-flex items-center text-gray-600 hover:text-yellow-600 font-semibold"},{default:v(()=>[G,_(" \u8CEA\u554F\u4E00\u89A7\u306B\u623B\u308B ")]),_:1},8,["href"])]),e("div",K,[e("div",P,[e("div",Q,[e("div",R,[e("div",W,[e("h3",X,n(t.question.subject),1),e("div",Y,[e("span",null,n(y(t.question.created_at)),1),Z,e("span",null,n(t.question.name)+" ("+n(t.question.email)+")",1)])]),e("span",{class:x({"my-1 px-3 py-1 text-xs font-semibold rounded-full text-nowrap":!0,"bg-yellow-100 text-yellow-800":t.question.status==="pending","bg-green-100 text-green-800":t.question.status==="answered","bg-gray-100 text-gray-800":t.question.status==="closed"})},n(B(t.question.status)),3)]),e("div",ee,[e("p",te,n(t.question.question),1),t.question.images&&t.question.images.length>0?(u(),g("div",se,[e("h4",oe,"\u6DFB\u4ED8\u753B\u50CF ("+n(t.question.images.length)+")",1),e("div",ne,[(u(!0),g(q,null,N(t.question.images,(h,w)=>(u(),g("div",{key:w,class:"relative group aspect-square bg-white rounded-lg overflow-hidden border border-gray-200 hover:border-yellow-400 transition-all cursor-pointer",onClick:He=>C(h)},[e("img",{src:`/images/support_questions/${h}`,alt:`\u6DFB\u4ED8\u753B\u50CF ${w+1}`,class:"w-full h-full object-cover"},null,8,ie),ae],8,le))),128))])])):f("",!0)])]),e("form",{onSubmit:m(I,["prevent"]),class:"space-y-4"},[e("div",null,[de,j(e("textarea",{id:"admin_response","onUpdate:modelValue":i[0]||(i[0]=h=>a(d).admin_response=h),rows:"6",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400",placeholder:"\u56DE\u7B54\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044..."},null,512),[[T,a(d).admin_response]])]),e("div",null,[ce,j(e("select",{id:"status","onUpdate:modelValue":i[1]||(i[1]=h=>a(d).status=h),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"},me,512),[[$,a(d).status]])]),t.question.responded_at?(u(),g("div",pe,[e("p",null,[fe,_(" "+n(y(t.question.responded_at)),1)]),t.question.responder?(u(),g("p",ve,[_e,_(" "+n(t.question.responder.name),1)])):f("",!0)])):f("",!0),e("div",xe,[e("button",{type:"submit",disabled:a(d).processing,class:"px-6 py-2 bg-gradient-to-r from-yellow-400 to-amber-500 hover:from-yellow-500 hover:to-amber-600 text-white font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50"},n(a(d).processing?"\u66F4\u65B0\u4E2D...":"\u66F4\u65B0"),9,be)])],40,re)])])])])]),_:1}),p(D,{name:"modal"},{default:v(()=>[c.value?(u(),g("div",{key:0,class:"fixed inset-0 z-[9999]",onClick:b},[e("div",ye,[we,e("div",ke,[qe,e("div",je,n(o.value+1)+" / "+n(t.question.images.length),1),e("div",Ce,[e("button",{onClick:m(b,["stop"]),class:"p-3 bg-white rounded-full hover:bg-gray-100 transition-colors shadow-xl",type:"button",title:"\u9589\u3058\u308B"},Ie,8,Me)])]),e("div",Be,[e("div",Ve,[e("img",{src:`/images/support_questions/${c.value}`,alt:"\u62E1\u5927\u753B\u50CF",class:"max-w-full max-h-full w-auto h-auto object-contain rounded-lg shadow-2xl border-4 border-white",onClick:i[2]||(i[2]=m(()=>{},["stop"]))},null,8,De)]),e("div",Le,[e("button",{onClick:m(S,["stop"]),disabled:o.value===0,class:x({"p-3 rounded-full transition-all shadow-xl group":!0,"bg-white hover:bg-gray-100":o.value>0,"bg-gray-300 cursor-not-allowed opacity-50":o.value===0}),type:"button",title:"\u524D\u3078"},Te,10,ze),e("button",{onClick:m(M,["stop"]),disabled:o.value>=t.question.images.length-1,class:x({"p-3 rounded-full transition-all shadow-xl group":!0,"bg-white hover:bg-gray-100":o.value<t.question.images.length-1,"bg-gray-300 cursor-not-allowed opacity-50":o.value>=t.question.images.length-1}),type:"button",title:"\u6B21\u3078"},Oe,10,$e)])])])])):f("",!0)]),_:1})],64))}},Ke=H(Ae,[["__scopeId","data-v-9a50d564"]]);export{Ke as default};
