import{q as P,o as d,i as J,w as m,b as h,D as g,H as F,d as t,e as p,L as v,c as n,f as x,F as _,t as a,n as y,h as f,E as S,a6 as $,a7 as T}from"./app.68a61c2a.js";import{A as B}from"./Admin.c326ec89.js";import{u as H}from"./useConfirm.f7e6c9b6.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const r=l=>($("data-v-9a1aae48"),l=l(),T(),l),A={class:"mx-auto"},M={class:"bg-white"},V={class:"p-3 md:p-6 bg-white"},N={class:"flex justify-between items-center mb-4"},z=r(()=>t("h3",{class:"text-lg font-medium"},"\u30D7\u30E9\u30F3\u4E00\u89A7",-1)),U={class:"hidden overflow-x-auto"},E={class:"min-w-full divide-y divide-gray-200"},q=r(()=>t("thead",{class:"bg-gray-50 whitespace-nowrap"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30D7\u30E9\u30F3\u540D "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u8AAC\u660E "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u753B\u50CF "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u91D1\u984D "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30DC\u30FC\u30CA\u30B9\u7387 "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u671F\u9593 "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u30E6\u30FC\u30B6\u30FC\u6570 "),t("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider"}," \u64CD\u4F5C ")])],-1)),O={class:"bg-white divide-y divide-gray-200"},G={class:"px-3 py-1 whitespace-nowrap"},K={class:"px-3 py-1"},Q={class:"px-3 py-1 whitespace-nowrap"},R=["src"],W={class:"px-3 py-1 whitespace-nowrap"},X={class:"px-3 py-1 whitespace-nowrap"},Y={class:"px-3 py-1 whitespace-nowrap"},Z={class:"flex flex-col"},tt=r(()=>t("span",{class:"text-xs text-gray-500 mb-1"},"\u767B\u9332\u671F\u9593",-1)),et=["title"],st={class:"px-3 py-1 whitespace-nowrap"},ot={class:"flex items-center space-x-2"},it=["onClick"],at={class:"whitespace-nowrap"},dt={class:"flex gap-1"},nt=r(()=>t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),rt=["onClick"],ct=r(()=>t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),lt=[ct],ut={key:0,class:"bg-gray-50"},_t={colspan:"8",class:"px-6 py-4"},mt={class:"space-y-2"},ht=r(()=>t("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"\u30E6\u30FC\u30B6\u30FC\u4E00\u89A7",-1)),gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},xt=["onClick"],ft={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},pt={class:"text-sm font-medium text-gray-600"},vt={class:"text-sm font-medium text-gray-900"},yt={class:"text-xs text-gray-500"},wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={class:"p-4"},kt={class:"flex items-start justify-between mb-3"},jt={class:"flex-1"},Dt={class:"text-lg font-semibold text-gray-900 mb-1"},Lt={class:"text-sm text-gray-600 mb-2"},St={class:"flex items-center space-x-4 text-sm"},Ct={class:"text-gray-700"},Pt={class:"text-gray-700"},Jt={class:"text-blue-600 font-medium"},Ft={class:"mt-2"},$t={class:"flex flex-col"},Tt=r(()=>t("span",{class:"text-xs text-gray-500 mb-1"},"\u767B\u9332\u671F\u9593",-1)),Bt=["title"],Ht=["src"],It={key:0,class:"border-t pt-3"},At=["onClick"],Mt=r(()=>t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)),Vt=[Mt],Nt={key:0,class:"mt-3 space-y-2"},zt=["onClick"],Ut={class:"flex items-center space-x-3"},Et={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},qt={class:"text-xs font-medium text-gray-600"},Ot={class:"text-sm font-medium text-gray-900"},Gt={class:"text-xs text-gray-500"},Kt={class:"flex justify-end space-x-2 mt-4 pt-3 border-t"},Qt=r(()=>t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),Rt=["onClick"],Wt=r(()=>t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Xt={__name:"Index",props:{plans:Array},setup(l){const{confirm:C,alert:Yt}=H(),c=P([]),w=s=>{const o=c.value.indexOf(s);o>-1?c.value.splice(o,1):c.value.push(s)},b=s=>{C("\u3053\u306E\u30D7\u30E9\u30F3\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F").then(o=>{o&&S.Inertia.delete(route("admin.plans.destroy",s.id))})},k=s=>{S.Inertia.visit(route("admin.users.detail",{id:s}),{preserveScroll:!0,preserveState:!0})},j=s=>{if(!s.start_date&&!s.end_date)return"\u7121\u5236\u9650";if(s.start_date&&s.end_date){const o=new Date(s.start_date),e=new Date(s.end_date),i=o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),u=e.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`${i} - ${u}`}if(s.start_date){const o=new Date(s.start_date);return`${o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} \u304B\u3089`}if(s.end_date){const o=new Date(s.end_date);return`${o.toLocaleDateString("ja-JP",{month:"2-digit",day:"2-digit"})+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} \u307E\u3067`}return"\u7121\u5236\u9650"},D=s=>{if(!s.start_date&&!s.end_date)return"\u767B\u9332\u671F\u9593: \u7121\u5236\u9650";if(s.start_date&&s.end_date){const o=new Date(s.start_date),e=new Date(s.end_date),i=o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),u=e.toLocaleDateString("ja-JP")+" "+e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`\u767B\u9332\u671F\u9593: ${i} - ${u}`}if(s.start_date){const o=new Date(s.start_date);return`\u767B\u9332\u958B\u59CB: ${o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}if(s.end_date){const o=new Date(s.end_date);return`\u767B\u9332\u7D42\u4E86: ${o.toLocaleDateString("ja-JP")+" "+o.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}return"\u767B\u9332\u671F\u9593: \u7121\u5236\u9650"},L=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"upcoming":return"bg-blue-100 text-blue-800";case"ended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return(s,o)=>(d(),J(B,null,{default:m(()=>[h(g(F),{title:"\u30D7\u30E9\u30F3\u7BA1\u7406"}),t("div",null,[t("div",A,[t("div",M,[t("div",V,[t("div",N,[z,h(g(v),{href:s.route("admin.plans.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:m(()=>[p(" \u65B0\u898F\u30D7\u30E9\u30F3\u4F5C\u6210 ")]),_:1},8,["href"])]),t("div",U,[t("table",E,[q,t("tbody",O,[(d(!0),n(_,null,x(l.plans,e=>(d(),n(_,{key:e.id},[t("tr",null,[t("td",G,a(e.name),1),t("td",K,a(e.description),1),t("td",Q,[t("img",{src:e.image,class:"w-32 h-20 inline-block object-contain"},null,8,R)]),t("td",W," \xA5 "+a(e.amount.toLocaleString()),1),t("td",X,a(e.point.toLocaleString())+" pt ",1),t("td",Y,[t("div",Z,[tt,t("span",{class:y([L(e.status),"px-2 py-1 text-xs font-medium rounded-full inline-block max-w-32 truncate"]),title:D(e)},a(j(e)),11,et)])]),t("td",st,[t("div",ot,[t("span",null,a(e.users?e.users.length:0)+" \u4EBA",1),e.users&&e.users.length>0?(d(),n("button",{key:0,onClick:i=>w(e.id),class:"text-blue-600 hover:text-blue-900 text-sm"},a(c.value.includes(e.id)?"\u96A0\u3059":"\u8868\u793A"),9,it)):f("",!0)])]),t("td",at,[t("div",dt,[h(g(v),{href:s.route("admin.plans.edit",e.id),class:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100 rounded-full p-2"},{default:m(()=>[nt]),_:2},1032,["href"]),t("button",{onClick:i=>b(e),class:"text-red-600 hover:text-red-900 hover:bg-red-100 rounded-full p-2"},lt,8,rt)])])]),e.users&&e.users.length>0&&c.value.includes(e.id)?(d(),n("tr",ut,[t("td",_t,[t("div",mt,[ht,t("div",gt,[(d(!0),n(_,null,x(e.users,i=>(d(),n("div",{key:i.id,class:"flex items-center space-x-3 p-3 bg-white rounded-lg border cursor-pointer",onClick:u=>k(i.id)},[t("div",ft,[t("span",pt,a(i.name?i.name.charAt(0):"U"),1)]),t("div",null,[t("p",vt,a(i.name||"\u540D\u524D\u306A\u3057"),1),t("p",yt,a(i.email),1)])],8,xt))),128))])])])])):f("",!0)],64))),128))])])]),t("div",wt,[(d(!0),n(_,null,x(l.plans,e=>(d(),n("div",{key:e.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[t("div",bt,[t("div",kt,[t("div",jt,[t("h4",Dt,a(e.name),1),t("p",Lt,a(e.description),1),t("div",St,[t("span",Ct,"\xA5"+a(e.amount.toLocaleString()),1),t("span",Pt,a(e.point.toLocaleString())+" pt",1),t("span",Jt,a(e.users?e.users.length:0)+" \u30E6\u30FC\u30B6\u30FC",1)]),t("div",Ft,[t("div",$t,[Tt,t("span",{class:y([L(e.status),"px-2 py-1 text-xs font-medium rounded-full inline-block max-w-full truncate"]),title:D(e)},a(j(e)),11,Bt)])])]),t("img",{src:e.image,class:"w-20 h-16 object-contain ml-3"},null,8,Ht)]),e.users&&e.users.length>0?(d(),n("div",It,[t("button",{onClick:i=>w(e.id),class:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900"},[t("span",null,"\u30E6\u30FC\u30B6\u30FC\u4E00\u89A7\u3092"+a(c.value.includes(e.id)?"\u96A0\u3059":"\u8868\u793A"),1),(d(),n("svg",{class:y(["w-4 h-4 transition-transform duration-200",{"rotate-180":c.value.includes(e.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vt,2))],8,At),c.value.includes(e.id)?(d(),n("div",Nt,[(d(!0),n(_,null,x(e.users,i=>(d(),n("div",{key:i.id,class:"flex items-center justify-between p-2 bg-gray-50 rounded cursor-pointer",onClick:u=>k(i.id)},[t("div",Ut,[t("div",Et,[t("span",qt,a(i.name?i.name.charAt(0):"U"),1)]),t("div",null,[t("p",Ot,a(i.name||"\u540D\u524D\u306A\u3057"),1),t("p",Gt,a(i.email),1)])])],8,zt))),128))])):f("",!0)])):f("",!0),t("div",Kt,[h(g(v),{href:s.route("admin.plans.edit",e.id),class:"flex items-center px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-md"},{default:m(()=>[Qt,p(" \u7DE8\u96C6 ")]),_:2},1032,["href"]),t("button",{onClick:i=>b(e),class:"flex items-center px-3 py-2 text-sm font-medium text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md"},[Wt,p(" \u524A\u9664 ")],8,Rt)])])]))),128))])])])])])]),_:1}))}},oe=I(Xt,[["__scopeId","data-v-9a1aae48"]]);export{oe as default};
