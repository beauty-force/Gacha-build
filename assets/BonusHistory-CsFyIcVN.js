import{c as i,o as s,i as M,b as n,j as b,t as d,v as I,F as y,f as R,n as w,r as f,a7 as _,a as m,a3 as L,d as x,w as k,e as p}from"./app-CcbLVeuA.js";import{U as j}from"./UserLayout-R5jl2GYN.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-C5PAXQJA.js";import"./index-C024q8mn.js";const A={af:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],ar:["كانون الثاني","شهر فبراير","مارس","أبريل","قد","يونيو","يوليو","أغسطس","سبتمبر","شهر اكتوبر","شهر نوفمبر","ديسمبر"],cs:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],da:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],de:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],el:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],et:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],fi:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],fr:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],he:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],hi:["जनवरी ","फ़रवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितंबर","अक्टूबर","नवंबर","दिसम्बर"],hr:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],hu:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],id:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],is:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],it:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],ja:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],km:["មករា","កុម្ភៈ","ខែមីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","ខែវិច្ឆិកា","ខែធ្នូ"],ko:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],ku:["Rêbendan","Reşemî","Adar","Avrêl","Gulan","Pûşper","Tîrmeh","Tebax","Îlon","Cotmeh","Mijdar","Berfanbar"],lt:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],lv:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],ms:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],ne:["जनवरी","फेब्रुअरी","मार्च","अप्रिल","सक्छ","जुन","जुलाई","अगस्ट","सेप्टेम्बर","अक्टोबर","नोभेम्बर","डिसेम्बर"],nl:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],no:["Januar","Februar","Mars","April","May","Juni","Juli","August","September","Oktober","November","Desember"],pa:["ਜਨਵਰੀ","ਫਰਵਰੀ","ਮਾਰਚ","ਅਪ੍ਰੈਲ","ਮਈ","ਜੂਨ","ਜੁਲਾਈ","ਅਗਸਤ","ਸਤੰਬਰ","ਅਕਤੂਬਰ","ਨਵੰਬਰ","ਦਸੰਬਰ"],pl:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],ro:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],sv:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],sk:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],sl:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],sr:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],so:["Janaayo","Febraayo","Maarso","Abriil","Laga yaabaa","Juun","July","Agoosto","Sebtembar","Oktoobar","November","December"],sq:["Janar","Shkurt","Marsh","Prill","Mund","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],th:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],tr:["Ocak","Şubat","Mart","Nisan","Mayıs ayı","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],uk:["Січень","Лютий","Березень","Квітень","Може","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],ur:["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],vi:["Tháng một","Tháng hai","Tháng ba","Tháng tư","Tháng năm","Tháng sáu","Tháng bảy","Tháng tám","Tháng chín","Tháng mười","Tháng mười một","Tháng mười hai"],yi:["יאנואר","פעברואַר","מאַרץ","אפריל","מייַ","יוני","יולי","אויגוסט","סעפטעמבער","אקטאבער","נאוועמבער","דעצעמבער"],zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],zu:["Januwari","Febhuwari","Mashi","April","Kwangathi","Juni","Julayi","Agasti","September","Okthoba","Novemba","December"],tm:["ஜனவரி","பிப்ரவரி","மார்ச்","ஏப்ரல்","மே","ஜூன்","ஜூலை","ஆகஸ்ட்","செப்டம்பர்","அக்டோபர்","நவம்பர்","டிசம்பர்"]},S={props:{lang:{type:String,default:"en",validator:function(e){return Object.keys(A).some(t=>Object.is(t,e))},required:!1},months:{type:Array,default:null,validator:function(e){return e.length===12},required:!1},defaultMonth:{type:Number,default:null,required:!1},defaultYear:{type:Number,default:null,required:!1},showYear:{type:Boolean,default:!0,required:!1},editableYear:{type:Boolean,default:!1,required:!1},yearOnly:{type:Boolean,default:!1,required:!1},noDefault:{type:Boolean,default:!1,required:!1},clearable:{type:Boolean,default:!1,required:!1},minDate:{type:Date,default:null,required:!1},maxDate:{type:Date,default:null},inputPreFilled:{type:Boolean,default:!1,required:!1},range:{type:Boolean,default:!1,required:!1},defaultMonthRange:{type:Array,default:null,required:!1,validator:function(e){if(e===null||e.length!==2)return!1;const[t,o]=e;return!(o<=t)}},variant:{type:String,default:"default",required:!1,validator:function(e){return["default","dark"].includes(e)}},dateFormat:{type:String,default:"%n, %Y"},highlightExactDate:{type:Boolean,default:!1,required:!1}},computed:{monthsByLang:function(){return this.months!==null&&this.months.length===12?this.months:A[this.lang]}}},N={name:"MonthPicker",mixins:[S],emits:["change","clear","input","change-year"],data:()=>({currentMonthIndex:null,firstRangeMonthIndex:null,secondRangeMonthIndex:null,year:new Date().getFullYear(),selectedYear:new Date().getFullYear()}),computed:{currentMonth:function(){return this.currentMonthIndex!==null?this.monthsByLang[this.currentMonthIndex]:null},firstRangemonth:function(){return this.firstRangeMonthIndex!==null?this.monthsByLang[this.firstRangeMonthIndex]:null},secondRangemonth:function(){return this.secondRangeMonthIndex!==null?this.monthsByLang[this.secondRangeMonthIndex]:null},date:function(){const e=this.monthsByLang.indexOf(this.currentMonth)+1;let t=new Date(`${this.year}/${e}/01`),o=new Date(this.year,e,1);const l={from:t,to:o,month:this.monthsByLang[e-1],monthIndex:e,year:this.year,rangeFrom:null,rangeTo:null,rangeFromMonth:null,rangeToMonth:null};if(this.range){const u=this.monthsByLang.indexOf(this.firstRangeMonthIndex)+1,r=this.monthsByLang.indexOf(this.secondRangeMonthIndex)+1;t=new Date(`${this.year}/${u}/01`),o=new Date(`${this.year}/${r}/01`),l.rangeFrom=this.firstRangeMonthIndex,l.rangeTo=this.secondRangeMonthIndex,l.rangeFromMonth=this.monthsByLang[this.firstRangeMonthIndex],l.rangeToMonth=this.monthsByLang[this.secondRangeMonthIndex]}return l}},watch:{defaultMonth(e){this.currentMonthIndex=e-1},defaultYear(e){this.year=e}},mounted(){if(this.defaultYear&&(this.year=this.defaultYear),this.range){this.setDefaultMonthRange();return}this.defaultMonth?this.selectMonth(this.defaultMonth-1):this.noDefault||this.selectMonth(0)},methods:{onChange(){Number.parseInt(this.year)||(this.year=this.defaultYear||new Date().getFullYear()),this.$emit("change",this.date)},selectMonth(e,t=!1){if(this.isInactive(e))return;if(this.range)return this.selectMonthRange(e,t);const o=this.currentMonthIndex===e;if(this.clearable&&o){this.currentMonthIndex=null,this.$emit("clear");return}this.isAlreadySelected||(this.currentMonthIndex=e,this.onChange(),t&&this.$emit("input",this.date))},selectMonthRange(e,t){if(this.firstRangeMonthIndex===null){this.firstRangeMonthIndex=e;return}if(this.firstRangeMonthIndex!==null&&this.secondRangeMonthIndex!==null){this.firstRangeMonthIndex=e,this.secondRangeMonthIndex=null;return}if(e>=this.firstRangeMonthIndex){this.secondRangeMonthIndex=e,this.onChange(),t&&this.$emit("input",this.date);return}this.firstRangeMonthIndex=e},setDefaultMonthRange(){if(this.defaultMonthRange===null||this.defaultMonthRange.length!==2)return;const[e,t]=this.defaultMonthRange;t<=e||(this.firstRangeMonthIndex=e,this.secondRangeMonthIndex=t)},changeYear(e){this.year+=e,!this.isInactive(e)&&(this.onChange(),this.$emit("change-year",this.year))},isInactive(e){let t=e;if(this.minDate===null&&this.maxDate===null)return!1;Number.isInteger(t)&&(t=this.monthsByLang[t]);const o=this.monthsByLang.indexOf(t)+1,l=new Date(`${this.year}/${o}/01`),u=r=>r!==null&&r instanceof Date;return!!(u(this.minDate)&&l<this.minDate||u(this.maxDate)&&l>this.maxDate)}}},B={key:0,class:"month-picker__year"},Y={key:0},T={key:1,class:"month-picker"},$=["onClick"];function C(e,t,o,l,u,r){return s(),i("div",{class:w(["month-picker__container",{[`month-picker--${e.variant}`]:!0,"year-picker":e.yearOnly}])},[e.showYear?(s(),i("div",B,[n("button",{type:"button",onClick:t[0]||(t[0]=h=>r.changeYear(-1))},"‹"),e.editableYear?b((s(),i("input",{key:1,"onUpdate:modelValue":t[1]||(t[1]=h=>e.year=h),type:"text",onChange:t[2]||(t[2]=h=>r.onChange())},null,544)),[[I,e.year,void 0,{number:!0}]]):(s(),i("p",Y,d(e.year),1)),n("button",{type:"button",onClick:t[3]||(t[3]=h=>r.changeYear(1))},"›")])):M("",!0),e.yearOnly?M("",!0):(s(),i("div",T,[(s(!0),i(y,null,R(e.monthsByLang,(h,c)=>(s(),i("div",{key:h,class:w([{inactive:r.isInactive(h),clearable:e.clearable,selected:e.highlightExactDate&&!e.range&&e.showYear&&e.currentMonthIndex===c&&e.year===e.selectedYear||!e.range&&!e.showYear&&e.currentMonthIndex==c||!e.highlightExactDate&&!e.range&&e.currentMonthIndex===c},"month-picker__month"]),onClick:g=>r.selectMonth(c,!0)},d(h),11,$))),128))]))],2)}const D=v(N,[["render",C]]),P={name:"MonthPickerInput",directives:{clickOutside:{bind:function(e,t,o){e.event=function(l){e===l.target||e.contains(l.target)||o.context[t.expression](l)},document.body.addEventListener("click",e.event)},unbind:function(e){document.body.removeEventListener("click",e.event)},beforeMount:(e,t)=>{e.clickOutsideEvent=o=>{e==o.target||e.contains(o.target)||t.value()},document.addEventListener("click",e.clickOutsideEvent)},unmounted:e=>{document.removeEventListener("click",e.clickOutsideEvent)}}},components:{MonthPicker:D},mixins:[S],props:{placeholder:{type:String,default:null}},emits:["change","input"],data(){return{monthPickerVisible:!1,selectedDate:null}},watch:{defaultYear:{immediate:!0,handler(e){!e||!this.inputPreFilled||(this.selectedDate=this.dateFormat.replace("%n",this.monthsByLang[this.defaultMonth-1]).replace("%Y",e))}},defaultMonth:{immediate:!0,handler(e){!e||!this.inputPreFilled||(this.selectedDate=this.dateFormat.replace("%n",this.monthsByLang[e-1]).replace("%Y",this.defaultYear))}}},methods:{populateInput(e){this.range?this.selectedDate=`${e.rangeFromMonth} - ${e.rangeToMonth}, ${e.year}`:this.selectedDate=this.dateFormat.replace("%n",e.month).replace("%Y",e.year),this.monthPickerVisible=!1,this.$emit("input",e)},showMonthPicker(){this.monthPickerVisible=!this.monthPickerVisible},hide(){this.monthPickerVisible=!1},updateDate(e){this.range?this.selectedDate=`${e.rangeFromMonth} - ${e.rangeToMonth}, ${e.year}`:this.selectedDate=this.dateFormat.replace("%n",e.month).replace("%Y",e.year),this.$emit("change",e)}}},z={class:"month-picker-input-container"},V=["placeholder"];function E(e,t,o,l,u,r){const h=f("month-picker"),c=_("click-outside");return b((s(),i("div",z,[b(n("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>u.selectedDate=g),class:"month-picker-input",type:"text",placeholder:o.placeholder,readonly:"",onClick:t[1]||(t[1]=g=>r.showMonthPicker())},null,8,V),[[I,u.selectedDate]]),b(m(h,{"default-year":e.defaultYear,"default-month":e.defaultMonth,lang:e.lang,months:e.months,"no-default":e.noDefault,"show-year":e.showYear,"highlight-exact-date":e.highlightExactDate,clearable:e.clearable,variant:e.variant,"editable-year":e.editableYear,"max-date":e.maxDate,"min-date":e.minDate,"year-only":e.yearOnly,range:e.range,onInput:r.populateInput,onChange:r.updateDate},null,8,["default-year","default-month","lang","months","no-default","show-year","highlight-exact-date","clearable","variant","editable-year","max-date","min-date","year-only","range","onInput","onChange"]),[[L,u.monthPickerVisible]])])),[[c,r.hide]])}const F=v(P,[["render",E],["__scopeId","data-v-ec32febd"]]);function q(e){e.component("month-picker",D),e.component("month-picker-input",F)}typeof window<"u"&&window.Vue&&window.Vue.use(q);const H={components:{Head:x.Head,AppLayout:j,Link:x.Link,MonthPicker:D,MonthPickerInput:F},props:{history:Object},data(){return{month:"",loading:!1,_history:[],periods:{daily:"日次報酬",weekly:"週次報酬",monthly:"月次報酬"}}},mounted(){this._history=this.history},methods:{format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},showDate(e){this.month=e.year+"-"+("0"+e.monthIndex).slice(-2)},getHistory(){this.loading=!0,axios.get(route("admin.ranking.get_history",{month:this.month})).then(e=>{this.loading=!1,this._history=e.data.history}).catch(e=>{})}},setup(e){}},K={key:0,class:"absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-neutral-300/75 z-[20]"},G={class:"px-4 pt-4 pb-1"},U={class:"flex flex-col px-4 md:px-8 text-xs md:text-sm font-[mplus2]"},Q={class:"w-full flex pt-4 gap-2 items-center justify-between relative"},W={key:0},Z={colspan:3,class:"pt-8 pb-2"},X={class:"md:text-lg font-semibold"},ee={class:"leading-7"},te={class:""},ne={class:"flex gap-3 text-nowrap"},re={class:"flex gap-1 items-center justify-center text-sm"},ae={class:""},ie={key:0,class:"flex items-center gap-3"},se=["src","alt"],oe={key:1,class:"w-12 h-12 flex items-center justify-center border border-gray-200 rounded text-gray-400 text-xs"},le={key:1},ue={key:2};function he(e,t,o,l,u,r){const h=f("Head"),c=f("Link"),g=f("MonthPickerInput"),O=f("AppLayout");return s(),i(y,null,[m(h,{title:"報酬履歴"}),m(O,null,{default:k(()=>[u.loading?(s(),i("div",K,[...t[1]||(t[1]=[n("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[n("svg",{class:"animate-spin h-8 w-8 text-neutral-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1)])])):M("",!0),n("div",G,[t[3]||(t[3]=n("h1",{class:"md:text-center text-lg font-bold"},"報酬履歴",-1)),m(c,{href:e.route("ranking.index"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:k(()=>[...t[2]||(t[2]=[p(" ランキング ",-1)])]),_:1},8,["href"])]),n("div",U,[n("div",Q,[m(g,{onChange:r.showDate,lang:"ja",editableYear:!0},null,8,["onChange"]),n("button",{onClick:t[0]||(t[0]=(...a)=>r.getHistory&&r.getHistory(...a)),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500"},"履歴を見る")]),n("table",null,[(s(!0),i(y,null,R(u._history,(a,J)=>(s(),i(y,null,[J==0||u._history[J-1].startDate!=a.startDate?(s(),i("tr",W,[n("td",Z,[n("span",X,[n("span",null,d(u.periods[a.period]),1),t[4]||(t[4]=p("   ",-1)),n("span",null,"( "+d(a.startDate)+" - "+d(a.endDate)+" )",1)])])])):M("",!0),n("tr",ee,[n("td",te,[n("span",ne,[n("span",null,d(a.rank)+" 位",1),n("span",re,[t[5]||(t[5]=p(" (",-1)),t[6]||(t[6]=n("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1)),p(" "+d(r.format_number(a.total_point))+" ) ",1)])])]),n("td",ae,[m(c,{href:e.route("admin.users.detail",{id:a.user_id}),class:"text-sky-600"},{default:k(()=>[p(d(a.email),1)]),_:2},1032,["href"])]),n("td",null,[a.item?(s(),i("div",ie,[a.item.image?(s(),i("img",{key:0,src:a.item.image,class:"w-12 h-12 object-contain border border-gray-200 rounded",alt:a.item.name},null,8,se)):(s(),i("span",oe," 画像なし ")),n("span",null,d(a.item.name)+" 付与",1)])):a.ref_id>0?(s(),i("span",le,d(r.format_number(a.description))+" coin付与",1)):(s(),i("span",ue,d(a.description),1))])])],64))),256))])])]),_:1})],64)}const fe=v(H,[["render",he]]);export{fe as default};
