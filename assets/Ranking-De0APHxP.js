import{d as h,r as m,c as r,o as s,a as x,w as a,b as e,l as p,e as d,F as _,f as b,n as w,t as n,i as k,y}from"./app-d5gBoxw1.js";import{U as C}from"./UserLayout-CjNOU91w.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirm-BCJmOtE9.js";import"./index-aVb63ak4.js";const j={components:{Head:h.Head,AppLayout:C,Link:h.Link},props:{},data(){return{user:null,period:"",users:[],loading:!1,periods:[{title:"本日",period:"daily"},{title:"週間",period:"weekly"},{title:"月間",period:"monthly"}]}},setup(i){},computed:{is_admin(){return this.user&&this.user.type==1}},mounted(){this.user=h.usePage().props.value.auth.user,this.onPeriodSelection("daily")},methods:{onPeriodSelection(i){this.period!=i&&(this.loading=!0,this.users=[],this.period=i,axios.get(route("ranking.data",{period:this.period})).then(o=>{this.loading=!1,this.users=o.data.users}).catch(o=>{}))}}},F={class:"h-full flex flex-col"},B={class:"px-4 pt-4 pb-1"},H={class:"pt-2 w-full"},S={class:"w-full text-neutral-500 space-x-1 border-b-4 border-yellow-500 px-4 flex justify-center"},z=["onClick"],N={class:"flex-1 relative"},P={key:0,class:"absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-neutral-300/75 z-[20]"},V={class:"p-3"},A={key:0,class:"flex justify-center flex-col items-center gap-1 py-2 border-b"},D={class:"relative flex justify-center w-full pb-4"},E=["src"],U={key:1,class:"flex font-bold text-base"},M={key:1,class:"flex items-center gap-2.5 border-b py-2"},R={class:"w-8 text-center text-xl font-[mplus2]"},T=["src"],q={class:"space-y-0.5"},G={key:1,class:"flex font-bold text-base"};function I(i,o,J,K,l,c){const g=m("Head"),u=m("Link"),v=m("AppLayout");return s(),r(_,null,[x(g,{title:"ランキング"}),x(v,null,{default:a(()=>[e("div",F,[e("div",B,[o[2]||(o[2]=e("h1",{class:"text-xl font-bold flex gap-4 md:gap-6 items-end"},[d(" ランキング "),e("span",{class:"text-xs md:text-sm text-neutral-500 md:leading-6 leading-5"}," ※1時間毎に更新 ")],-1)),c.is_admin?(s(),p(u,{key:0,href:i.route("admin.ranking.history"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:a(()=>[...o[0]||(o[0]=[d(" 報酬履歴 ",-1)])]),_:1},8,["href"])):(s(),p(u,{key:1,href:i.route("ranking.about"),class:"text-sm border border-yellow-500 rounded-full px-3 py-1 hover:text-white hover:bg-yellow-500 absolute top-4 right-3"},{default:a(()=>[...o[1]||(o[1]=[d(" 報酬について ",-1)])]),_:1},8,["href"]))]),e("div",H,[e("div",S,[(s(!0),r(_,null,b(l.periods,(t,f)=>(s(),r("button",{onClick:O=>c.onPeriodSelection(t.period),class:w(["-mb-[1px] flex-1 inline-block text-center py-1.5 rounded-t-md border-yellow-500 border-x border-t",{"bg-yellow-500 text-white":t.period==l.period,"hover:bg-yellow-400 hover:text-white":t.period!=l.period}])},n(t.title),11,z))),256))])]),e("div",N,[l.loading?(s(),r("div",P,[...o[3]||(o[3]=[e("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[e("svg",{class:"animate-spin h-8 w-8 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1)])])):k("",!0),e("div",V,[(s(!0),r(_,null,b(l.users,(t,f)=>(s(),r("div",null,[t.total_points==l.users[0].total_points?(s(),r("div",A,[e("div",D,[e("div",{class:"w-24 h-24 rounded-full border-2 overflow-hidden",style:y({backgroundColor:t.bg_color||"#FFD700"})},[e("img",{src:l.users[0].avatar?"/images/avatars/"+l.users[0].avatar:"/images/user_icon.png",class:"w-full h-full object-cover"},null,8,E)],4),o[4]||(o[4]=e("img",{src:"/images/top_one.svg",class:"w-28 absolute bottom-0"},null,-1))]),c.is_admin?(s(),p(u,{key:0,href:i.route("admin.users.detail",{id:l.users[0].id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:a(()=>[d(n(l.users[0].name),1)]),_:1},8,["href"])):(s(),r("span",U,n(l.users[0].name),1))])):(s(),r("div",M,[e("span",R,n(l.users[f-1].total_points!=t.total_points?f+1:""),1),e("div",{class:"w-14 h-14 rounded-full border overflow-hidden",style:y({backgroundColor:t.bg_color||"#FFD700"})},[e("img",{src:t.avatar?"/images/avatars/"+t.avatar:"/images/user_icon.png",class:"w-full h-full object-cover"},null,8,T)],4),e("div",q,[c.is_admin?(s(),p(u,{key:0,href:i.route("admin.users.detail",{id:t.id}),class:"flex font-bold text-base hover:text-yellow-500"},{default:a(()=>[d(n(t.name),1)]),_:2},1032,["href"])):(s(),r("span",G,n(t.name),1))])]))]))),256))])])])]),_:1})],64)}const $=L(j,[["render",I]]);export{$ as default};
