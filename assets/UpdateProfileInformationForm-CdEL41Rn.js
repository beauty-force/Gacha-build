import{d as f,p as d,c as m,o as c,b as e,y as _,n as y,u as o,i as b,a as s,j as w,v as S,e as k,w as V,a3 as P,Z as $,h as z}from"./app-C802-wAc.js";import{_ as g}from"./InputError-_fsNMxeN.js";import{_ as x}from"./InputLabel-B2VY4hT4.js";import{_ as h}from"./TextInput-BPQFITmo.js";const D={class:"relative flex flex-col items-center justify-center pt-8 sm:pt-16 px-4"},N={class:"absolute top-4 right-4"},A={class:"-mb-12"},E=["src"],M={class:"flex flex-col items-center justify-center gap-3 mt-16"},T={class:"flex gap-3"},q={class:"p-4 sm:p-8 bg-white/70 border shadow rounded-lg shadow-yellow-300 space-y-4"},I={class:"mt-1 flex items-center gap-3"},O={key:0},H={class:"text-sm mt-2 text-neutral-600"},Z={class:"mt-2 font-medium text-sm text-yellow-500"},G={class:"flex gap-4 items-center justify-end"},J={key:0,class:"text-sm text-neutral-600"},K={class:"text-center border border-yellow-600 rounded-full p-0.5 w-fit"},Q=["disabled"],te={__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:Boolean,status:String},setup(C){const R=C,l=f.usePage().props.value.auth.user,a=f.useForm({name:l.name,email:l.email,avatar:null,banner:null,bg_color:l.bg_color||"#FFD700",remove_avatar:!1}),p=d(l.avatar?"/images/avatars/"+l.avatar:"/images/user_icon.png"),u=d(l.banner?"/images/banners/"+l.banner:null),i=d(null),v=d(null),U=n=>{const t=n.target.files[0];t&&(p.value=URL.createObjectURL(t),a.avatar=t,a.remove_avatar=!1)},j=()=>{a.avatar=null,a.remove_avatar=!0,p.value="/images/user_icon.png",i.value&&(i.value.value="")},F=n=>{const t=n.target.files[0];t&&(u.value=URL.createObjectURL(t),a.banner=t)},B=()=>{i.value&&i.value.click()},L=()=>{v.value&&v.value.click()};return(n,t)=>(c(),m("section",null,[e("form",{onSubmit:t[4]||(t[4]=z(r=>o(a).post(n.route("profile.update"),{preserveScroll:!0}),["prevent"])),class:"space-y-6"},[e("div",{class:y(["relative mb-16 -mx-4 md:-mx-6 lg:-mx-8",u.value?"":"bg-gradient-to-b from-amber-300 to-amber-200"]),style:_(u.value?{backgroundImage:`url(${u.value})`,backgroundSize:"cover",backgroundPosition:"center"}:{})},[t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white/30"},null,-1)),e("div",D,[e("div",N,[e("input",{type:"file",accept:"image/*",hidden:"",ref_key:"bannerRef",ref:v,onChange:F},null,544),e("button",{type:"button",onClick:L,class:"inline-flex items-center gap-2 px-4 py-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full font-semibold text-sm text-gray-700 transition-all duration-300 shadow-md hover:shadow-lg hover:bg-gray-50"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),e("span",null,"バナー選択",-1)])])]),e("div",A,[e("div",{class:"h-32 w-32 rounded-full mx-auto border-4 border-white shadow-lg overflow-hidden",style:_({backgroundColor:o(a).bg_color||o(l).bg_color||"#FFD700"})},[e("img",{src:p.value,class:"h-full w-full object-cover"},null,8,E)],4)])])],6),e("div",M,[e("input",{type:"file",accept:"image/*",hidden:"",ref_key:"avatarRef",ref:i,onChange:U},null,544),e("div",T,[e("button",{type:"button",class:"rounded-full bg-theme bg-theme-hover text-white text-sm px-6 py-1",onClick:B},"ユーザー画像選択"),o(l).avatar||o(a).avatar?(c(),m("button",{key:0,type:"button",onClick:j,class:"rounded-full bg-red-500 hover:bg-red-600 text-white text-sm px-6 py-1 transition-colors"}," 画像を削除 ")):b("",!0)])]),e("div",q,[e("div",null,[s(x,{for:"name",value:"名前",class:"text-neutral-600 pl-2"}),s(h,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o(a).name,"onUpdate:modelValue":t[0]||(t[0]=r=>o(a).name=r),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),s(g,{class:"mt-2",message:o(a).errors.name},null,8,["message"])]),e("div",null,[s(x,{for:"email",value:"メールアドレス",class:"text-neutral-600 pl-2"}),s(h,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:o(a).email,"onUpdate:modelValue":t[1]||(t[1]=r=>o(a).email=r),required:"",autocomplete:"email"},null,8,["modelValue"]),s(g,{class:"mt-2",message:o(a).errors.email},null,8,["message"])]),e("div",null,[s(x,{for:"bg_color",value:"背景色",class:"text-neutral-600 pl-2"}),e("div",I,[w(e("input",{id:"bg_color",type:"color","onUpdate:modelValue":t[2]||(t[2]=r=>o(a).bg_color=r),class:"h-10 w-20 rounded border border-gray-300 cursor-pointer"},null,512),[[S,o(a).bg_color]]),s(h,{type:"text",modelValue:o(a).bg_color,"onUpdate:modelValue":t[3]||(t[3]=r=>o(a).bg_color=r),class:"flex-1",placeholder:"#FFD700",maxlength:"7"},null,8,["modelValue"])]),s(g,{class:"mt-2",message:o(a).errors.bg_color},null,8,["message"])]),o(l).email_verified_at===null?(c(),m("div",O,[e("p",H,[t[8]||(t[8]=k(" メールアドレスは認証されていません。 ",-1)),s(o(f.Link),{href:n.route("verification.send"),method:"post",as:"button",class:"mt-2 underline text-xs md:text-sm text-neutral-600 hover:text-neutral-600 rounded-md text-start"},{default:V(()=>[...t[7]||(t[7]=[k(" 確認メールを再送信するには、ここをクリックしてください。 ",-1)])]),_:1},8,["href"])]),w(e("div",Z," 新しい確認リンクがあなたの電子メール アドレスに送信されました。 ",512),[[P,R.status==="verification-link-sent"]])])):b("",!0),e("div",G,[s($,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:V(()=>[o(a).recentlySuccessful?(c(),m("p",J,"保存されました。")):b("",!0)]),_:1}),e("div",K,[e("button",{type:"submit",class:y([{"opacity-50":o(a).processing},"inline-block items-center px-10 py-1 bg-theme bg-theme-hover rounded-full font-semibold text-base text-white uppercase tracking-widest"]),disabled:o(a).processing}," 保存 ",10,Q)])])])],32)]))}};export{te as default};
