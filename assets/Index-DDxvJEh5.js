import{d as c,r as p,l as f,o as d,w as i,a as u,b as t,c as x,i as w,e as _,F as v,f as b,t as n,n as k}from"./app-CUpOazTT.js";import{A as L}from"./Admin-BVkMtbI6.js";import{u as C}from"./useConfirm-DNxwfvJr.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const{confirm:H}=C(),A={components:{Head:c.Head,Link:c.Link,AdminLayout:L},props:{notifications:Array},methods:{formatDate(s){const e=new Date(s),o=e.getFullYear(),m=String(e.getMonth()+1).padStart(2,"0"),g=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0");return`${o}/${m}/${g} ${r}:${l}`},getTypeLabel(s){return{announcement:"お知らせ",maintenance:"メンテナンス",event:"イベント",campaign:"キャンペーン",important:"重要"}[s]||s||"お知らせ"},truncateMessage(s){if(!s)return"";const e=100;return s.length<=e?s:s.substring(0,e)+"..."},deleteNotification(s){H("このお知らせを削除しますか？","削除すると元に戻せません。","warning").then(e=>{e&&c.useForm({}).delete(route("admin.notifications.destroy",s))})}}},M={class:"py-2"},B={class:"max-w-7xl mx-auto sm:px-0 lg:px-2"},N={class:"bg-white shadow-sm sm:rounded-lg"},D={class:"p-4 text-gray-900"},V={class:"flex justify-between items-center mb-6"},F={class:"overflow-x-scroll w-full"},$={class:"min-w-full divide-y divide-gray-200"},j={class:"bg-white divide-y divide-gray-200"},T={class:"px-3 py-4"},z={class:"text-sm font-medium text-gray-900 max-w-md line-clamp-2",style:{"white-space":"pre-line"}},E={class:"text-xs text-gray-500 mt-1"},I={class:"px-3 py-4 whitespace-nowrap text-sm text-gray-500"},Y={class:"text-xs text-gray-400 mt-1"},q={class:"px-3 py-4 whitespace-nowrap"},G={class:"px-3 py-4 whitespace-nowrap text-sm font-medium"},J={class:"flex space-x-2"},K=["onClick"],O={key:0,class:"text-center py-12"};function P(s,e,o,m,g,r){const l=p("Head"),h=p("Link"),y=p("AdminLayout");return d(),f(y,null,{default:i(()=>[u(l,null,{default:i(()=>[...e[0]||(e[0]=[t("title",null,"お知らせ管理",-1)])]),_:1}),t("div",M,[t("div",B,[t("div",N,[t("div",D,[t("div",V,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold"},"お知らせ一覧",-1)),u(h,{href:s.route("admin.notifications.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:i(()=>[...e[1]||(e[1]=[_(" 新規作成 ",-1)])]),_:1},8,["href"])]),t("div",F,[t("table",$,[e[5]||(e[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-3 text-left text-sm text-nowrap text-gray-500 uppercase tracking-wider"}," メッセージ "),t("th",{class:"px-3 py-3 text-left text-sm text-nowrap text-gray-500 uppercase tracking-wider"}," 配信対象 "),t("th",{class:"px-3 py-3 text-left text-sm text-nowrap text-gray-500 uppercase tracking-wider"}," 公開状態 "),t("th",{class:"px-3 py-3 text-left text-sm text-nowrap text-gray-500 uppercase tracking-wider"}," 操作 ")])],-1)),t("tbody",j,[(d(!0),x(v,null,b(o.notifications,a=>(d(),x("tr",{key:a.id},[t("td",T,[t("div",z,n(r.truncateMessage(a.message)),1),t("div",E,n(r.getTypeLabel(a.type))+" | "+n(r.formatDate(a.created_at)),1)]),t("td",I,[_(n(a.target_name)+" ",1),t("div",Y," 読了: "+n(a.read_count)+" / "+n(a.user_count),1)]),t("td",q,[t("span",{class:k({"px-2 inline-flex text-xs leading-5 font-semibold rounded-full":!0,"bg-green-100 text-green-800":a.is_published,"bg-gray-100 text-gray-800":!a.is_published})},n(a.is_published?"公開":"非公開"),3)]),t("td",G,[t("div",J,[u(h,{href:s.route("admin.notifications.edit",a.id),class:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"編集"},{default:i(()=>[...e[3]||(e[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),t("button",{onClick:Q=>r.deleteNotification(a.id),class:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"削除"},[...e[4]||(e[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,K)])])]))),128))])])]),o.notifications.length===0?(d(),x("div",O,[...e[6]||(e[6]=[t("p",{class:"text-gray-500"},"お知らせがありません",-1)])])):w("",!0)])])])])]),_:1})}const Z=S(A,[["render",P]]);export{Z as default};
